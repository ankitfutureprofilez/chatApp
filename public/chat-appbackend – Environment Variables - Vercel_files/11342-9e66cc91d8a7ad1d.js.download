(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11342],{605424:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(397458),a=n(298179),i=n(68839),l=n(261409),o=n(505645),d=n(684624);function s(e){let{envs:t,search:n,setSearch:s,envTarget:u,sortTarget:c,setEnvTarget:v,setSortTarget:h,disabled:p}=e;return(0,r.jsxs)(i.K,{direction:{sm:"column",md:"row",lg:"row"},gap:2,children:[(0,r.jsx)(i.K,{flex:"50%",children:(0,r.jsx)(o.Z,{"data-testid":(0,d.C)("env-variables-filter","search-input"),disabled:p,maxLength:256,onChange:e=>s(e.target.value),placeholder:"Search...",value:n,width:"100%"})}),(0,r.jsx)(i.K,{flex:"25%",children:(0,r.jsxs)(l.P,{"data-testid":(0,d.C)("env-variables-filter","select"),disabled:p,onChange:e=>v(e.target.value),placeholder:"Filter by…",value:u,children:[(0,r.jsx)("option",{value:"all-environments",children:"All Environments"}),(0,r.jsx)("option",{value:"production",children:"Production"}),(0,r.jsx)("option",{value:"preview",children:"Preview"}),Array.from(new Set((t||[]).map(e=>e.gitBranch??null).filter(Boolean))).map(e=>(0,r.jsxs)("option",{value:`[custom]${e??""}`,children:["Preview (",e,")"]},e)),(0,r.jsx)("option",{value:"development",children:"Development"})]})}),(0,r.jsx)(i.K,{flex:"25%",children:(0,r.jsxs)(l.P,{disabled:p,onChange:e=>h(e.target.value),placeholder:"Sort by…",prefix:(0,r.jsx)(a.P,{}),value:c,children:[(0,r.jsx)("option",{value:"createdAt",children:"Last Updated"}),(0,r.jsx)("option",{value:"key",children:"Name"}),(0,r.jsx)("option",{value:"type",children:"Type"})]})})]})}},317779:function(e,t,n){"use strict";n.d(t,{V:function(){return f}});var r=n(397458),a=n(652983),i=n(353729),l=n(905839),o=n(68839),d=n(283900),s=n(605424),u=n(761891),c=n(596295),v=n(234113),h=n(66818),p=n(248388);function f(e){let{teamId:t,projectId:n,withFilters:f=!0,sharedEnvs:g,projectEnvs:m,mutateSharedEnvVarData:x,isLoading:j,SWRCacheKey:b,envTarget:S,sortTarget:w,setEnvTarget:y,setSortTarget:_,search:P,setSearch:E}=e,C=(0,h.e1)(),{cache:T}=(0,i.kY)(),[I,A]=(0,a.useState)(""),[k,V]=(0,a.useState)("all-environments"),[$,Z]=(0,a.useState)("createdAt");!f&&(P&&E&&(I=P,A=E),S&&y&&(k=S,V=y),w&&_&&($=w,Z=_));let{can:N,isLoading:R}=(0,u.ZP)({teamId:t}),z=N(u.aU.Read,n?u._z.ProjectEnvVars:u._z.SharedEnvVars),H=N(u.aU.Read,n?u._z.ProjectEnvVarsProduction:u._z.SharedEnvVarsProduction),L=(0,d._j)(void 0,x),{decryptEnvVar:O}=(0,p.Q)(b,x,{teamId:t,projectId:n}),M=(0,c.w)(g,I,k,$),U=(0,a.useCallback)(async(e,n)=>{try{await (0,v.jk)({envVar:e,projectId:n,teamId:t}),x(),C.success("Successfully unlinked Shared Environment Variable")}catch(e){C.error((0,l.SC)(e).message)}},[x,t,C]),B=(0,a.useCallback)(e=>m?m.filter(t=>t.key===e.key).reduce((t,n)=>{let r=Array.isArray(n.target)?n.target:[n.target];return r.forEach(n=>{e.target.includes(n)&&t.push(n)}),t},[]):[],[m]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.K,{gap:4,children:[f?(0,r.jsx)(s.Z,{disabled:!1,envTarget:k,envs:g,search:I,setEnvTarget:V,setSearch:A,setSortTarget:Z,sortTarget:$}):null,(0,r.jsx)(d.ZP,{canReadProductionValues:H,disabled:j||R||!(z||H),envs:M(),getOverriddenTargetsForSharedEnvVar:B,isLoading:j||R,onRemove:e=>{if(void 0!==n){U(e,n);return}L.open(e)},onSave:e=>{var t;let n=null===(t=T.get(b))||void 0===t?void 0:t.data;if(n.envs.length>0){let t=[...n.envs],r=t.findIndex(t=>t.id===e.id),a={...t[r],...e,decrypted:!1};t[r]=a,x({envs:t},!1),O(a)}},onViewEnvironmentVariable:O,search:I,teamId:t,textConfig:{emptyState:{title:n?"No Shared Environment Variables are linked to this app.":"No Shared Environment Variables are set.",description:n?`Shared Environment Variables are set at the ${t?"Team":"Account"} level
              and are inherited by this Project.`:"Shared Environment Variables are set at the Team level."}},withEnvs:!0,withSecrets:!1})]}),L.modal]})}},596295:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(652983);function a(e,t,n,a){return(0,r.useCallback)(()=>{if(!e)return[];let r=[...e];return t&&(r=r.filter(e=>e.key.toLowerCase().includes(t.toLowerCase()))),"all-environments"!==n&&-1===n.indexOf("[custom]")&&(r=r.filter(e=>!!(e.target&&e.target.includes(n)&&!e.gitBranch||!e.target&&["production","preview"].includes(n)))),-1!==n.indexOf("[custom]")&&(r=r.filter(e=>e.gitBranch===n.replace("[custom]",""))),a&&"contentHint"!==a&&(r.sort((e,t)=>e[a].toString().localeCompare(t[a].toString())),"createdAt"===a&&r.sort((e,t)=>(t.updatedAt??t.createdAt)-(e.updatedAt??e.createdAt))),r},[e,t,n,a])}},541e3:function(e,t,n){"use strict";var r=n(397458),a=n(14517),i=n(494145),l=n.n(i);t.Z=e=>{let{children:t,className:n,noWrap:i,title:o,truncate:d,style:s}=e;return(0,r.jsx)("code",{className:(0,a.W)(l().code,n,{[l().nowrap]:i,[l().truncate]:d}),"data-geist-inline-code":"","data-version":"v1",style:s,title:o,children:t})}},749705:function(e,t,n){"use strict";var r=n(397458),a=n(652983),i=n(14517),l=n(991990),o=n(131555),d=n(593757),s=n.n(d);t.Z=(0,a.memo)((0,a.forwardRef)((e,t)=>{let{value:n,scrollOnClear:d=!0,onChange:u,disabled:c,width:v,...h}=e,p=(0,a.useRef)(null),f=t||null,[g,m]=(0,a.useState)(null),x=(0,a.useCallback)(e=>{var n;e&&(p.current=e,f&&(f.current=e),m((null===(n=e.closest("[data-geist-input-wrapper]"))||void 0===n?void 0:n.getBoundingClientRect().width)||null),"function"==typeof t&&t(e))},[f,t]),j=(0,a.useCallback)(()=>{p.current&&!c&&(p.current.value&&(p.current.value="",null==u||u({target:{value:""}})),p.current.focus({preventScroll:!d}))},[p,c,u,d]);return(0,r.jsx)(o.I,{...h,"aria-label":h["aria-label"]||h.label||h.title,disabled:c,onChange:u,ref:x,suffix:!!n&&(0,r.jsx)("button",{className:(0,i.W)(s().button,{[s().disabled]:c}),onClick:j,tabIndex:c?-1:void 0,type:"button",children:(0,r.jsx)("span",{children:(0,r.jsx)(l.a,{})})}),suffixContainer:!1,suffixStyling:!1,value:n,width:v||g||void 0})}))},505645:function(e,t,n){"use strict";var r=n(397458),a=n(652983),i=n(335139),l=n(101036),o=n(131555),d=n(749705);t.Z=(0,a.forwardRef)((e,t)=>{let{clearable:n=!0,loading:a=!1,...s}=e,u=n?d.Z:o.I,c=a?l.$:i.o;return(0,r.jsx)(u,{...s,"aria-label":"Search",prefix:(0,r.jsx)(c,{size:20}),prefixStyling:!1,ref:t,typeName:"search"})})},248388:function(e,t,n){"use strict";n.d(t,{Q:function(){return v}});var r=n(353729),a=n(652983),i=n(761891),l=n(135635),o=n(966130),d=n(611648),s=n(539142),u=n(495142),c=n(502383);function v(e,t,n){let[v,h]=(0,a.useState)(void 0),{cache:p}=(0,r.kY)(),{data:f}=function(e,t,n,a){let{isReady:v,team:h}=(0,l.t7)(),{can:p,isLoading:f}=(0,i.ZP)(),g=p(i.aU.Read,i._z.ProjectEnvVars),m=v&&!f&&g&&t&&n!==c.t.Sensitive,x="";return m&&((0,o.In)(t)?x=`${d.Nc}/${t}${(0,s.c)({teamId:null==h?void 0:h.id})}`:e&&(x=`${(0,d.HJ)("v1")}/${encodeURIComponent(e)}/env/${t}${(0,s.c)({teamId:null==h?void 0:h.id})}`)),(0,r.ZP)(x,e=>(0,u.I)(e,{throwOnHTTPError:!0}),void 0)}(n.projectId||n.projectName,null==v?void 0:v.id,null==v?void 0:v.type);return(0,a.useEffect)(()=>{var n;if(!v||!f||v.type===c.t.Sensitive)return;let r=null===(n=p.get(e))||void 0===n?void 0:n.data;if(0===r.envs.length)return;let a=[...r.envs],i=a.findIndex(e=>e.id===v.id),l=a[i];f.updatedAt&&l.updatedAt&&!(f.updatedAt<l.updatedAt)&&(a[i]=f,t({envs:a},!1),h(void 0))},[e,p,f,v,t]),{decryptEnvVar:h}}},727455:function(e,t,n){"use strict";n.d(t,{A:function(){return h},FC:function(){return c},jT:function(){return v}});var r=n(353729),a=n(532870),i=n(652983),l=n(611648),o=n(495142),d=n(539142),s=n(761891);let u=null;function c(e){var t;let{teamId:n,projectId:s,ids:c,excludeIds:v,excludeProjectId:h}=e,{limit:p=8,search:f,revalidateFirstPage:g=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},x=arguments.length>3&&void 0!==arguments[3]&&arguments[3],j=arguments.length>4&&void 0!==arguments[4]&&arguments[4],b=(0,a.ZP)((e,t)=>{if(!e)return`${l.Nc}${(0,d.c)({limit:p,search:f,teamId:n,projectId:s,ids:c,exclude:{ids:v??null,projectId:h??null}})}`;if(t&&t.length>=p){let e=t[t.length-1];return`${l.Nc}${(0,d.c)({until:e.updatedAt||e.createdAt-1,limit:p,search:f,teamId:n,projectId:s,ids:c,exclude:{ids:v??null,projectId:h??null}})}`}return null},async e=>{if(u&&u[0]===e){let{data:e}=await u[1];return u=null,e}let t=await (0,o.I)(e,{throwOnHTTPError:!0});return t.data},{...m,keepPreviousData:j,revalidateFirstPage:g,persistSize:!0}),S=!!b.data,w=S&&(null===(t=b.data[b.data.length-1])||void 0===t?void 0:t.length)<p,y=(0,i.useMemo)(()=>b.data?b.data.flat():[],[b.data]),_=S&&0===y.length,P=S&&b.size>b.data.length;return x&&(0,r.ZP)(()=>{if(!b.data||w)return null;let e=b.data[b.data.length-1];return`${l.Nc}${(0,d.c)({until:(e[e.length-1].updatedAt??e[e.length-1].createdAt)-1,limit:p,search:f,teamId:n,projectId:s,ids:c,exclude:{ids:v??null,projectId:h??null}})}`},e=>(0,o.I)(e,{throwOnHTTPError:!0})),[b,{envVars:y,initialDataLoaded:S,isEmpty:_,loadMore:()=>b.setSize(e=>e+1),isLoadingMore:P,isReachingEnd:w,isValidating:b.isValidating}]}function v(e,t,n,a){let{can:i,isLoading:l}=(0,s.ZP)(),d=i(s.aU.List,s._z.ProjectEnvVars),u=e&&!l&&d;return(0,r.ZP)(()=>u?h({teamId:e,ids:n,projectId:t}):"",async e=>{let{data:t}=await (0,o.I)(e,{throwOnHTTPError:!0});return{envs:t}},a)}function h(e){let{teamId:t,projectId:n,ids:r}=e;return`${l.Nc}/all${(0,d.c)({teamId:t,projectId:n,ids:r})}`}},347771:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(353729),a=n(611648),i=n(495142);let l=e=>`${a.Ms}/integration/${e}?public=1`,o=e=>{let t=l(e);return(0,r.JG)(t,(0,i.I)(t,{throwOnHTTPError:!0}))};t.Z=e=>{let t=(0,r.ZP)(()=>e?l(e):null,i.I);return Object.assign(t,{integration:t.data??null})}},502383:function(e,t,n){"use strict";var r,a,i,l;n.d(t,{r:function(){return r},t:function(){return a}}),(i=r||(r={})).Production="production",i.Preview="preview",i.Development="development",(l=a||(a={})).Plain="plain",l.Secret="secret",l.System="system",l.Encrypted="encrypted",l.Sensitive="sensitive"},327943:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var r=n(923390);let a=(0,r.H)('<path d="M16 18l6-6-6-6"/><path d="M8 6l-6 6 6 6"/>')},235551:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(923390);let a=(0,r.H)('<path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><path d="M7 10l5 5 5-5"/><path d="M12 15V3"/>')},494145:function(e){e.exports={code:"inline_code__oyCmg",nowrap:"inline_nowrap__9PYnJ",truncate:"inline_truncate__7Rl6D"}},593757:function(e){e.exports={button:"clearable_button__npmw2 reset_reset__cB_56 reset_reset__KRyvc",disabled:"clearable_disabled__sfEx_"}}}]);