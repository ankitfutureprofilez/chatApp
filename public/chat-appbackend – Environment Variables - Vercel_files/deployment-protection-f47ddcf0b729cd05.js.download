(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26218],{740435:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[teamSlug]/[project]/settings/deployment-protection",function(){return n(930068)}])},192734:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(397458),o=n(904414),i=n.n(o);n(652983);var s=n(68839),l=n(832191),a=n(607974),d=n(135205),c=n(684624),u=n(99703);function p(e){let{title:t,description:n,note:o,error:p,type:h,disabled:g=!1,disabledForBilling:y,onSave:v=null,saveLoading:x=!1,saveDisabled:m=!1,highlightNote:b=!1,beta:f=!1,action:j=null,className:w,children:P,headerNote:I}=e,C=(0,a.B)(g);return(0,r.jsxs)("div",{className:"jsx-20df583c4acadbf9 "+(w||""),children:[(0,r.jsxs)(d.Fieldset,{"data-testid":(0,c.C)("project-settings",t),disabled:C&&void 0===y,type:C||y||"error"!==h?"default":"error",children:[(0,r.jsxs)(d.Content,{disabled:y,children:[(0,r.jsx)(d.Title,{children:(0,r.jsxs)(s.K,{direction:"row",gap:3,style:{flexWrap:"wrap"},children:[(0,r.jsx)(r.Fragment,{children:t}),f?(0,r.jsx)(u.Z,{muted:y}):null,(0,r.jsx)(r.Fragment,{children:I})]})}),(0,r.jsx)(d.Subtitle,{children:n}),P]}),(0,r.jsxs)(d.Footer,{disabled:!1,highlight:y||b,children:[(0,r.jsx)(d.Footer.Status,{children:p?(0,r.jsx)(d.ErrorText,{children:p instanceof Error?p.message:p}):o||null}),!C&&(v||j)?(0,r.jsxs)(d.Footer.Actions,{children:[v?(0,r.jsx)(l.z,{"data-testid":(0,c.C)("project-settings","save"),disabled:C||m,loading:x,onClick:v,size:"small",children:"Save"}):null,j]}):null]})]}),(0,r.jsx)(i(),{id:"20df583c4acadbf9",children:"div.jsx-20df583c4acadbf9:not(:last-of-type){margin-bottom:var(--geist-gap-section)}"})]})}},647387:function(e,t,n){"use strict";n.d(t,{B8:function(){return a},D9:function(){return s},Er:function(){return l},uX:function(){return i}});var r=n(149836),o=n(557385);let i=()=>{var e;let{team:t}=(0,o.Z)();if(null===t)return!1;let n=(null===(e=t.billing)||void 0===e?void 0:e.plan)==="enterprise";return n||(0,r.X)(t,"passwordProtection")},s=e=>{let{deployment:t,project:n}=e;if(!t||!n)return{isLoading:!0,protectionEnabledForDeployment:null,protectionEnabledForProject:null,productionProtectionEnabled:null};let{passwordProtection:r,ssoProtection:o,trustedIps:i}=n,s="production"!==t.target,l=(null==r?void 0:r.deploymentType)==="all"||s&&(null==r?void 0:r.deploymentType)==="preview",a=(null==o?void 0:o.deploymentType)==="all"||s&&(null==o?void 0:o.deploymentType)==="preview",d=(null==i?void 0:i.deploymentType)==="all"||s&&(null==i?void 0:i.deploymentType)==="preview",c=(null==r?void 0:r.deploymentType)==="all"||(null==o?void 0:o.deploymentType)==="all"||(null==i?void 0:i.deploymentType)==="all";return{productionProtectionEnabled:c,protectionEnabledForProject:!!(r||o||i),protectionEnabledForDeployment:l||a||d,isLoading:!1}},l=e=>{let{team:t,user:n,projectName:r}=e,o=(null==t?void 0:t.slug)||(null==n?void 0:n.username);return o&&r?`/${o}/${r}/settings/deployment-protection`:""},a=e=>{let{team:t}=e;return t?`/teams/${t.slug}/settings/general#preview-comments`:"/account/general#preview-comments"}},541e3:function(e,t,n){"use strict";var r=n(397458),o=n(14517),i=n(494145),s=n.n(i);t.Z=e=>{let{children:t,className:n,noWrap:i,title:l,truncate:a,style:d}=e;return(0,r.jsx)("code",{className:(0,o.W)(s().code,n,{[s().nowrap]:i,[s().truncate]:a}),"data-geist-inline-code":"","data-version":"v1",style:d,title:l,children:t})}},343870:function(e,t,n){"use strict";var r=n(397458),o=n(652983),i=n(672854),s=n(351267),l=n(927062),a=n(14517),d=n(477452),c=n(813348),u=n(832191),p=n(38162),h=n(66818),g=n(684624),y=n(661654),v=n.n(y);let x={visible:{opacity:1,scale:1},hidden:{opacity:0,scale:.5}};t.Z=e=>{let{className:t,textToCopy:n,onClick:y,label:m,title:b,type:f="secondary",variant:j,normal:w,hover:P,active:I,shape:C="square",size:T,icon:_,iconSize:k=20,...S}=e,E=(0,h.e1)(),[A,Z]=(0,o.useState)(!1),N=(0,o.useRef)(null),D=o.useCallback(e=>{N.current&&clearTimeout(N.current),Z(!0),navigator.clipboard.writeText(n).catch(()=>E.error("Failed to copy to clipboard")).finally(()=>null==y?void 0:y(e)),N.current=setTimeout(()=>{Z(!1)},1e3)},[n,E,y]),O=(0,r.jsx)(i.A,{transition:{duration:.15},children:(0,r.jsx)(s.M,{initial:!1,mode:"wait",children:A?(0,r.jsx)(l.m.div,{animate:"visible",className:v().copyButtonIcon,"data-testid":(0,g.C)("copy","success"),exit:"hidden",initial:"hidden",variants:x,children:(0,r.jsx)(d.J,{size:k})},"check"):(0,r.jsx)(l.m.div,{animate:"visible",className:v().copyButtonIcon,exit:"hidden",initial:"hidden",variants:x,children:_||(0,r.jsx)(c.C,{size:k})},"copy")})});return w||P||I?(0,r.jsx)(p.o,{active:I,"aria-label":m,className:(0,a.W)(t),"data-testid":(0,g.C)("copy","button"),hover:P,normal:w,onClick:D,shape:C,size:T,svgOnly:!0,title:b,typeName:"button",...S,children:O}):(0,r.jsxs)(u.z,{"aria-label":m,className:(0,a.W)(t),"data-testid":(0,g.C)("copy","button"),onClick:D,shape:C,size:T,svgOnly:!0,title:b,type:f,typeName:"button",variant:j,...S,children:[A?(0,r.jsx)("div",{"aria-live":"assertive",className:"geist-sr-only",role:"status",children:"Copied!"}):null,O]})}},749705:function(e,t,n){"use strict";var r=n(397458),o=n(652983),i=n(14517),s=n(991990),l=n(131555),a=n(593757),d=n.n(a);t.Z=(0,o.memo)((0,o.forwardRef)((e,t)=>{let{value:n,scrollOnClear:a=!0,onChange:c,disabled:u,width:p,...h}=e,g=(0,o.useRef)(null),y=t||null,[v,x]=(0,o.useState)(null),m=(0,o.useCallback)(e=>{var n;e&&(g.current=e,y&&(y.current=e),x((null===(n=e.closest("[data-geist-input-wrapper]"))||void 0===n?void 0:n.getBoundingClientRect().width)||null),"function"==typeof t&&t(e))},[y,t]),b=(0,o.useCallback)(()=>{g.current&&!u&&(g.current.value&&(g.current.value="",null==c||c({target:{value:""}})),g.current.focus({preventScroll:!a}))},[g,u,c,a]);return(0,r.jsx)(l.I,{...h,"aria-label":h["aria-label"]||h.label||h.title,disabled:u,onChange:c,ref:m,suffix:!!n&&(0,r.jsx)("button",{className:(0,i.W)(d().button,{[d().disabled]:u}),onClick:b,tabIndex:u?-1:void 0,type:"button",children:(0,r.jsx)("span",{children:(0,r.jsx)(s.a,{})})}),suffixContainer:!1,suffixStyling:!1,value:n,width:p||v||void 0})}))},624396:function(e,t,n){"use strict";var r=n(397458),o=n(652983),i=n(14517),s=n(926829),l=n(343870),a=n(786325),d=n.n(a);let c=(0,o.memo)(e=>{let{text:t,copyText:n,onCopy:a,width:c,compact:u=!1,prompt:p=!0,icon:h=!0,dark:g,type:y,fill:v,className:x,variant:m,placeholder:b,...f}=e,j=(0,s.X)(y,v,m),w=(0,o.useMemo)(()=>n||(Array.isArray(t)?t.join("\n"):"string"==typeof t?t:""),[t,n]),P=!!(!t&&b);return(0,r.jsxs)("div",{className:(0,i.W)(d().snippet,{[d().prompt]:p,[d().dark]:g,[d().isUsingPlaceholder]:P},x,j),...f,"data-geist-snippet":"","data-version":"v1",style:{width:c,height:u?"36px":"auto",...f.style},children:[Array.isArray(t)?t.map((e,n)=>(0,r.jsx)("pre",{className:"geist-overflow-scroll-y",children:e},`snippet-${t}-${e}-${n}`)):(0,r.jsx)("pre",{className:"geist-overflow-scroll-y",style:u?{height:"36px",lineHeight:1}:void 0,children:t||b}),h?(0,r.jsx)(l.Z,{className:d().copyIcon,label:"Copy to clipboard",onClick:()=>{null==a||a()},textToCopy:w}):null]})});t.Z=c},610029:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(611648),o=n(495142);async function i(e,t,n){return(0,o.I)(`${(0,r.HJ)("v5")}/${encodeURIComponent(e)}${t?"?teamId="+t:""}`,{method:"PATCH",body:JSON.stringify(n),throwOnHTTPError:!0})}},847993:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(446118),o=n.n(r);function i(e){let{as:t,res:n,status:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if(n){n.writeHead(r||302,{Location:t||e}),n.end();return}if(e.match(/^https?:\/\//)){window.setLocationHref(e);return}if("/"===e[0]&&"/"!==e[1])return i?o().replace(e,t):o().push(e,t);window.setLocationHref(`${window.location.protocol}//${window.location.host}${e}`)}}window.setLocationHref=e=>{window.isRedirecting=!0,window.location.href=e}},930068:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ef}});var r=n(397458),o=n(446118),i=n(75883),s=n(904414),l=n.n(s),a=n(652983),d=n(68839),c=n(9055),u=n(335978),p=n(921690),h=n(749705),g=n(66818),y=n(526810),v=n(610029),x=n(557385),m=n(927628),b=n(667268),f=n(761891),j=n(566968),w=n(291033),P=n(384157),I=n(192734),C=n(611648),T=n(495142),_=n(847993);let k=async e=>{let{toasts:t,team:n}=e,r=n?`?slug=${encodeURIComponent(n.slug)}`:"";try{await (0,T.I)(C.G2+r,{method:"PUT",body:JSON.stringify({active:!0}),throwOnHTTPError:!0}),t.success("Enabled Advanced Deployment Protection.")}catch(o){let{message:e,action:n,link:r}=o||{};t.message({type:"error",text:e,action:n,onAction:r?()=>void(0,_.Z)(r):void 0})}};var S=n(842140),E=n(241967),A=n(351267),Z=n(927062),N=n(886847);function D(e){let{type:t,key:n,children:o}=e;return(0,r.jsx)(A.M,{children:o?(0,r.jsx)(Z.m.div,{animate:{height:"auto",opacity:1,marginTop:0},exit:{height:0,opacity:0,marginTop:"var(--geist-space-4x-negative)"},initial:{height:0,opacity:0,marginTop:"var(--geist-space-4x-negative)"},style:{overflow:"hidden"},transition:{ease:"easeInOut"},children:(0,r.jsx)(N.Z,{fill:!0,label:!1,style:{backgroundColor:"warning"===t?void 0:"var(--ds-gray-100)",border:"none",color:"warning"===t?void 0:"var(--accents-6)"},type:t,variant:"contrast",children:(0,r.jsxs)(d.K,{align:"center",direction:"row",gap:2,children:["warning"===t?(0,r.jsx)(E.u,{size:14,style:{marginBottom:"-1px",flexShrink:0}}):(0,r.jsx)(S.k,{color:"currentcolor",fill:!1,style:{flexShrink:0}}),(0,r.jsx)(r.Fragment,{children:o})]})})},n):null})}var O=n(477452),R=n(942058),$=n(539965),B=n(568841);function L(e){let{values:t,selectedValue:n,onChange:o,disabled:i,ariaLabel:s,width:l}=e,a=Object.entries(t).map(e=>{let[t,n]=e;return{value:t,...n}});return(0,r.jsxs)($.Fe,{position:"bottom-end",children:[(0,r.jsx)($.j2,{align:"start","aria-label":s,disabled:i,shape:"square",style:{padding:"0 var(--geist-gap-half)",width:l},suffix:(0,r.jsx)(R._,{}),svgOnly:!0,type:"secondary",typeName:"button",children:(0,r.jsx)(c.x,{children:i?null:t[n].label})}),(0,r.jsx)($.v2,{width:l+100,children:a.map(e=>{let{value:t,label:i,description:s,disabledDescription:l}=e;return(0,r.jsx)($.sN,{disabled:!!l,onClick:()=>{t!==n&&o(t)},style:{height:"auto",padding:"var(--geist-space-gap-quarter)",pointerEvents:l?"auto":"inherit",cursor:l?"not-allowed":"pointer"},suffix:n===t?(0,r.jsx)(O.J,{}):null,children:(0,r.jsx)(B.Z,{delay:!1,disableTriggers:!l,maxWidth:324,position:"right",text:l,children:(0,r.jsxs)(d.K,{justify:"center",children:[(0,r.jsx)(c.x,{color:l?"inherit":"gray-1000",children:i}),(0,r.jsx)(c.x,{color:l?"inherit":"gray-900",children:s})]})})},t)})})]})}function z(e){let{overrides:t,...n}=e,o={preview:{label:"Preview Deployments",description:"Protect all Preview Deployments.",...null==t?void 0:t.preview},all:{label:"All Deployments",description:"Protect all Preview and Production Deployments.",...null==t?void 0:t.all}};return(0,r.jsx)(L,{ariaLabel:"Select the deployment type for the protection",values:o,width:200,...n})}let V="__VERCEL_PASS__";function H(){var e,t;let n=(0,g.e1)(),o=(0,j.ic)(),{data:i,mutate:s}=(0,m.PY)(o,{apiVersion:"v10"}),C=(0,x.Z)(),{can:T,isLoading:_}=(0,f.ZP)(),{user:S,team:E}=C,[A,Z]=(0,a.useState)(!!(null==i?void 0:i.passwordProtection)),[N,O]=(0,a.useState)(""),[R,$]=(0,a.useState)((null==i?void 0:null===(e=i.passwordProtection)||void 0===e?void 0:e.deploymentType)||"preview"),[B,L]=(0,a.useState)(!1),[H,F]=(0,a.useState)(null),[M,U]=(0,a.useState)(!1),{isReady:K,value:Y}=(0,P.wc)(),W=(0,a.useCallback)(async()=>{L(!0);try{w.co.track(w.s6.DEPLOYMENT_PROTECTION_TOGGLE_PASSWORD_PROTECTION,{enabled:A,protectProductionEnvironment:"all"===R,projectId:o}),F(null);let e=N&&N!==V?N:null;await (0,v.Z)(o,null==E?void 0:E.id,{passwordProtection:A?{deploymentType:R,password:e||void 0}:null}),n.success("Updated Password Protection successfully."),await s()}catch(e){F(e.message)}L(!1),U(!1)},[o,s,E,n,A,R,N]),q=(0,a.useCallback)(async()=>{await k({team:E,toasts:n}),await C.mutate()},[E,C,n]),G=(0,a.useCallback)(e=>{Z(e),U(!0)},[]),J=(0,a.useCallback)(()=>{N===V&&O("")},[N]),X=(0,a.useCallback)(()=>{""===N&&(null==i?void 0:i.passwordProtection)&&O(V)},[null==i?void 0:i.passwordProtection,N]),Q=(0,a.useCallback)(e=>{O(e),U(!0)},[]),ee=(0,a.useCallback)(e=>{$(e),U(!0)},[]);(0,a.useEffect)(()=>{var e;Z(!!(null==i?void 0:i.passwordProtection)),O((null==i?void 0:i.passwordProtection)?V:""),$((null==i?void 0:null===(e=i.passwordProtection)||void 0===e?void 0:e.deploymentType)||"preview")},[null==i?void 0:i.passwordProtection]);let{enabled:et,message:en,action:er}=(0,b.Z)({name:"passwordProtection",options:{enable:()=>void q(),labelPrefix:(0,r.jsxs)(c.x,{as:"span",color:"gray-900",children:["This feature is available with the"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/advanced-deployment-protection",type:"highlight",children:"Advanced Deployment Protection"})," ","add-on for"]})}}),eo=!i||!(E||S)||_,ei=T(f.aU.Update,f._z.Project),es=T(f.aU.Create,f._z.PasswordProtection),el=ei&&N&&M,ea=(0,a.useCallback)(()=>A&&(null==i?void 0:i.trustedIps)?"additional"===i.trustedIps.protectionMode?(0,r.jsxs)("span",{children:["Only visitors from an allowed IP address in the"," ",(0,r.jsx)(p.r,{href:"/docs/concepts/deployments/deployment-protection#ip-allowlist",type:"underline",children:"Trusted IPs"})," ","can access deployments via the password."]}):(0,r.jsxs)("span",{children:["Visitors from an allowed IP address in the"," ",(0,r.jsx)(p.r,{href:"/docs/concepts/deployments/deployment-protection#ip-allowlist",type:"underline",children:"Trusted IPs"})," ","will bypass Password Protection."]}):null,[A,null==i?void 0:i.trustedIps]),ed=(0,a.useCallback)(()=>ei?et?(0,r.jsxs)(c.x,{children:["Learn more about"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#password-protection",type:"highlight",children:"Password Protection"})]}):es?en:(0,r.jsxs)(c.x,{lineHeight:32,children:["You need additional permissions to enable"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#password-protection",type:"highlight",children:"Password Protection"})," ","for your project."]}):(0,r.jsxs)(c.x,{lineHeight:32,children:["You need additional permissions to manage your project's"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#password-protection",type:"highlight",children:"Password Protection"}),"."]}),[ei,et,en,es]);if(eo)return(0,r.jsxs)("div",{className:"jsx-1ec8bdf1cd4e4b34",children:[(0,r.jsx)(u.Z,{height:170}),(0,r.jsx)(l(),{id:"1ec8bdf1cd4e4b34",children:"div.jsx-1ec8bdf1cd4e4b34:not(:last-of-type){margin-bottom:var(--geist-gap-section)}"})]});let ec=B||!A,eu=!ei||!et;return(0,r.jsx)(I.Z,{action:es?er:void 0,description:"Ensures visitors to your deployments must enter a password in order to gain access.",disabled:!ei,disabledForBilling:eu,error:H,highlightNote:!ei,note:ed(),onSave:et?W:null,saveDisabled:!el,saveLoading:B,title:"Password Protection",children:(0,r.jsxs)(d.K,{gap:4,children:[(0,r.jsxs)(d.K,{align:"center",direction:"row",gap:{sm:2,md:4,lg:4},style:{flexWrap:"wrap"},children:[(0,r.jsx)(d.K,{align:"center",direction:"row",gap:2,style:{padding:"var(--geist-gap-quarter) 0"},children:(0,r.jsx)(y.Z,{"aria-labelledby":"label-for-password-protection-enabled-toggle",checked:A,direction:"switch-first",onChange:G,size:"large",children:(0,r.jsx)(c.x,{color:eu?"gray-800":void 0,id:"label-for-password-protection-enabled-toggle",transform:"none",weight:500,children:A?"Enabled for":"Disabled"})})}),A?(0,r.jsx)(z,{disabled:ec,onChange:ee,selectedValue:R}):null]}),(0,r.jsx)(D,{type:"warning",children:A&&"all"===R&&(null===(t=i.passwordProtection)||void 0===t?void 0:t.deploymentType)!=="all"?(0,r.jsx)(r.Fragment,{children:"Selecting this option will make Production Deployments no longer publicly accessible. Please be sure this is intended."}):null},"password-protection-all-deployments-note"),(0,r.jsxs)(d.K,{gap:4,children:[(0,r.jsxs)(d.K,{gap:2,children:[(0,r.jsx)(c.x,{color:"gray-900",id:"label-for-password-protection-password-input",size:12,transform:"uppercase",weight:500,children:"Password"}),(0,r.jsx)(h.Z,{"aria-labelledby":"label-for-password-protection-password-input",autoFocus:M,disabled:ec,maxLength:72,onBlur:X,onChange:e=>Q(e.target.value),onFocus:J,placeholder:ec?"":"Enter password",typeName:"password",value:N,width:"290px"},`input-focus-on-change-${A.toString()}`)]}),K&&Y?(0,r.jsx)(D,{children:ea()},"password-protection-ip-note"):null]})]})})}var F=n(647387);function M(){var e,t,n,o,i,s,h;let b=(0,j.ic)(),{data:C,mutate:T}=(0,m.PY)(b,{apiVersion:"v10"}),{user:_,team:k}=(0,x.Z)(),S=(null==k?void 0:null===(e=k.standaloneTrustedIps)||void 0===e?void 0:e.enabled)||!1,{can:E,isLoading:A}=(0,f.ZP)(),[Z,N]=(0,a.useState)(!!(null==C?void 0:C.ssoProtection)),[O,R]=(0,a.useState)((null==C?void 0:null===(t=C.ssoProtection)||void 0===t?void 0:t.deploymentType)||"preview"),[$,L]=(0,a.useState)(!1),[V,H]=(0,a.useState)(null),M=(0,g.e1)(),U=(0,F.uX)(),{isReady:K,value:Y}=(0,P.wc)(),W=(0,a.useCallback)(async()=>{L(!0),H(null);try{w.co.track(w.s6.DEPLOYMENT_PROTECTION_TOGGLE_VERCEL_AUTHENTICATION,{enabled:Z,protectProductionEnvironment:"all"===O,projectId:b}),await (0,v.Z)(b,null==k?void 0:k.id,{ssoProtection:Z?{deploymentType:O}:null}),M.success("Updated Vercel Authentication successfully."),await T()}catch(e){H(e.message)}L(!1)},[b,T,k,M,Z,O]),q=(0,a.useCallback)(()=>{N(!Z)},[N,Z]),G=(0,a.useCallback)(e=>{R(e)},[]);(0,a.useEffect)(()=>{var e;N(!!(null==C?void 0:C.ssoProtection)),R((null==C?void 0:null===(e=C.ssoProtection)||void 0===e?void 0:e.deploymentType)||"preview")},[null==C?void 0:C.ssoProtection]);let J=(0,a.useCallback)(()=>Z&&(null==C?void 0:C.trustedIps)?"additional"===C.trustedIps.protectionMode?(0,r.jsxs)("span",{children:["Only visitors from an allowed IP address in the"," ",(0,r.jsx)(p.r,{href:"/docs/concepts/deployments/deployment-protection#ip-allowlist",type:"underline",children:"Trusted IPs"})," ","can access deployments and authenticate with Vercel."]}):(0,r.jsxs)("span",{children:["Visitors from an allowed IP address in the"," ",(0,r.jsx)(p.r,{href:"/docs/concepts/deployments/deployment-protection#ip-allowlist",type:"underline",children:"Trusted IPs"})," ","will bypass Vercel Authentication."]}):null,[Z,null==C?void 0:C.trustedIps]),X=!C||!(k||_)||A,Q=E(f.aU.Update,f._z.Project);if(X)return(0,r.jsxs)("div",{className:"jsx-1ec8bdf1cd4e4b34",children:[(0,r.jsx)(u.Z,{height:88}),(0,r.jsx)(l(),{id:"1ec8bdf1cd4e4b34",children:"div.jsx-1ec8bdf1cd4e4b34:not(:last-of-type){margin-bottom:var(--geist-gap-section)}"})]});let ee=null===k&&(null==_?void 0:null===(n=_.billing)||void 0===n?void 0:n.plan)==="hobby",et=!!C.ssoProtection!==Z||(null===(o=C.ssoProtection)||void 0===o?void 0:o.deploymentType)&&C.ssoProtection.deploymentType!==O,en=Y&&!S&&!!(null===(i=C.trustedIps)||void 0===i?void 0:i.deploymentType);return(0,r.jsx)(I.Z,{description:(0,r.jsx)(d.K,{gap:4,children:ee?(0,r.jsx)(c.x,{children:"Ensures visitors to your deployments are logged in to Vercel."}):(0,r.jsx)(c.x,{children:"Ensures visitors to your deployments are logged in to Vercel and are a member of your team."})}),disabled:!Q,error:V,highlightNote:!Q,note:Q?(0,r.jsxs)(c.x,{children:["Learn more about"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#vercel-authentication",type:"highlight",children:"Vercel Authentication"})]}):(0,r.jsxs)(c.x,{lineHeight:32,children:["You need additional permissions to manage your project's"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#vercel-authentication",type:"highlight",children:"Vercel Authentication"})]}),onSave:W,saveDisabled:!et,saveLoading:$,title:"Vercel Authentication",children:(0,r.jsxs)(d.K,{gap:4,children:[(0,r.jsxs)(d.K,{align:"center",direction:"row",gap:{sm:2,md:4,lg:4},style:{flexWrap:"wrap"},children:[(0,r.jsx)(d.K,{align:"center",direction:"row",gap:2,style:{padding:"var(--geist-gap-quarter) 0"},children:(0,r.jsx)(B.Z,{desktopOnly:!0,forceHide:!Z||!en,text:"Trusted IPs must be disabled before disabling Vercel Authentication.",children:(0,r.jsx)(y.Z,{"aria-labelledby":"label-for-vercel-auth-enabled-toggle",checked:Z,direction:"switch-first",disabled:!!(Z&&en),onChange:q,size:"large",children:(0,r.jsx)(c.x,{id:"label-for-vercel-auth-enabled-toggle",transform:"none",weight:500,children:Z?"Enabled for":"Disabled"})})})}),Z?(0,r.jsx)(z,{disabled:$,onChange:G,overrides:{all:{disabledDescription:U?null:(0,r.jsxs)(c.x,{as:"span",color:"background-100",children:["Requires"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/advanced-deployment-protection",style:{whiteSpace:"nowrap",paddingRight:"0.5ch"},type:"highlight",children:"Advanced Deployment Protection"}),ee?(0,r.jsxs)(r.Fragment,{children:["on the"," ",(0,r.jsx)(p.r,{external:!0,href:"/pricing",type:"highlight",children:"Pro plan"})]}):null]})},preview:{disabledDescription:Y&&!S&&(null===(s=C.trustedIps)||void 0===s?void 0:s.deploymentType)==="all"?"Trusted IPs may not be enabled in an environment that Vercel Authentication is not enabled.":null}},selectedValue:O}):null]}),(0,r.jsx)(D,{type:"warning",children:Z&&"all"===O&&(null===(h=C.ssoProtection)||void 0===h?void 0:h.deploymentType)!=="all"?(0,r.jsx)(r.Fragment,{children:"Selecting this option will make Production Deployments no longer publicly accessible. Please be sure this is intended."}):null},"vercel-auth-all-deployments-note"),K&&Y?(0,r.jsx)(D,{children:J()},"vercel-auth-ip-note"):null]})})}var U=n(897831),K=n(14517),Y=n(565893),W=n(118838),q=n(101036),G=n(832191),J=n(624396),X=n(160446),Q=n(531635),ee=n(588875),et=n(541e3),en=n(824852),er=n.n(en);function eo(){let e=(0,j.ic)(),{data:t,mutate:n}=(0,m.PY)(e,{apiVersion:"v10"}),{can:o,isLoading:i}=(0,f.ZP)(),s=(0,x.Z)(),{user:h,team:v}=s,C=(0,g.e1)(),T=t?(0,X.R)(t,"automation-bypass"):null,[_,E]=(0,a.useState)(!!T),[A,Z]=(0,a.useState)(null),[N,O]=(0,a.useState)(!1),[R,$]=(0,a.useState)(!0),[L,z]=(0,a.useState)(!1),{isReady:V,value:H}=(0,P.wc)(),F=!t||!(v||h)||i,M=o(f.aU.Create,f._z.PasswordProtection),U=o(f.aU.Update,f._z.Project),en=o(f.aU.Read,f._z.ProjectProtectionBypass),eo=U&&o(f.aU.Delete,f._z.ProjectProtectionBypass),ei=U&&o(f.aU.Update,f._z.ProjectProtectionBypass),es=U&&o(f.aU.Create,f._z.ProjectProtectionBypass),el=(0,a.useCallback)(async t=>{Z(null),O(!0);try{switch(t){case"Deleted":case"Created":w.co.track(w.s6.DEPLOYMENT_PROTECTION_TOGGLE_BYPASS_FOR_AUTOMATION,{enabled:"Created"===t,projectId:e});break;case"Regenerated":w.co.track(w.s6.DEPLOYMENT_PROTECTION_REGENERATE_BYPASS_HEADER,{projectId:e})}await (0,Q.i)({teamId:null==v?void 0:v.id,projectIdOrName:e,body:T&&"Created"!==t?{revoke:{secret:T,regenerate:"Regenerated"===t}}:{}}),C.success(`${t} Automation Bypass successfully.`)}catch(e){Z(`Request failed: ${e.message}`)}await n(),O(!1)},[e,null==v?void 0:v.id,C,n,T]),ea=(0,a.useCallback)(async()=>{await k({team:v,toasts:C}),await s.mutate()},[C,v,s]),ed=(0,a.useCallback)(()=>{E(!_)},[E,_]);(0,a.useEffect)(()=>{E(!!T)},[T]);let ec=async()=>{T?z("delete"):await el("Created")},eu=(0,a.useCallback)(()=>{z(!1),E(!!T)},[T]),ep=(0,a.useCallback)(async()=>{await el("regenerate"===L?"Regenerated":"Deleted"),z(!1)},[L,el]),eh=(0,a.useCallback)(()=>{$(!R)},[R]),{enabled:eg,message:ey,action:ev}=(0,b.Z)({name:"passwordProtection",options:{enable:()=>void ea(),labelPrefix:(0,r.jsxs)(c.x,{as:"span",color:"gray-900",children:["This feature is available with the"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/advanced-deployment-protection",type:"highlight",children:"Advanced Deployment Protection"})," ","add-on for"]})}}),ex=!!(!T&&!es),em=!!(T&&!eo),eb=!!T!==_,ef=(0,a.useCallback)(()=>_&&N?{text:"Generating secret",prefix:(0,r.jsx)(q.$,{color:"var(--accents-3)",size:14})}:_&&!T?{text:"Secret will be created once you save these changes",prefix:(0,r.jsx)(S.k,{color:"var(--accents-6)",fill:!1})}:T?{text:R?Array(T.length).fill("•").join(""):T,prefix:(0,r.jsx)(G.z,{"aria-label":`${R?"Show":"Hide"} secret`,className:(0,K.W)(er().snippetButton),onClick:eh,shape:"square",svgOnly:!0,type:"tertiary",children:R?(0,r.jsx)(Y.b,{color:N||!_?"var(--accents-3)":"var(--accents-6)",size:14}):(0,r.jsx)(W._,{color:N||!_?"var(--accents-3)":"var(--accents-6)",size:14})})}:{text:" "},[_,N,T,R,eh]),ej=(0,a.useCallback)(()=>U?eg?(0,r.jsxs)(c.x,{children:["Learn more about"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#protection-bypass-for-automation",type:"highlight",children:"Protection Bypass for Automation"})]}):M?ey:(0,r.jsxs)(c.x,{lineHeight:32,children:["You need additional permissions to enable"," ",(0,r.jsx)(p.r,{href:"/docs/concepts/deployments/deployment-protection#protection-bypass-for-automation",type:"highlight",children:"Protection Bypass for Automation"})," ","for your project."]}):(0,r.jsxs)(c.x,{lineHeight:32,children:["You need additional permissions to manage your project's"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#protection-bypass-for-automation",type:"highlight",children:"Protection Bypass for Automation"}),"."]}),[U,eg,ey,M]);if(F)return(0,r.jsxs)("div",{className:"jsx-fafd13aae6183080",children:[(0,r.jsx)(u.Z,{height:100}),(0,r.jsx)(l(),{id:"fafd13aae6183080",children:"div.jsx-fafd13aae6183080:not(:last-of-type){margin-bottom:var(--geist-gap-double)}"})]});let ew=!!(t.ssoProtection||t.passwordProtection||t.trustedIps),eP=!en||!eg||!es&&!T,eI={noPermission:ex||em?`Missing required permission to ${ex?"create":""}${em?"delete":""} secret`:null,noProtectionEnabled:ew||T?null:"No protections currently enabled for the project."},eC=eI.noPermission||eI.noProtectionEnabled;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Z,{action:M?ev:void 0,beta:!0,description:V&&H?(0,r.jsxs)(r.Fragment,{children:["To allow automation services to access protected deployments on this project, you can bypass Vercel Authentication, Password Protection, and Trusted IPs by setting an HTTP header or query parameter named"," ",(0,r.jsx)(et.Z,{children:"x-vercel-protection-bypass"}),", along with the secret provided below."]}):(0,r.jsxs)(r.Fragment,{children:["Allow automation services to bypass Vercel Authentication and Password Protection for both Preview and Production Deployments on this project when using an HTTP header named"," ",(0,r.jsx)(et.Z,{children:"x-vercel-protection-bypass"})," with the secret below."]}),disabled:!(en&&U),disabledForBilling:eP,error:A,highlightNote:!en,note:ej(),onSave:eg?ec:void 0,saveDisabled:!eb,saveLoading:N,title:"Protection Bypass for Automation",children:(0,r.jsxs)(d.K,{gap:4,children:[(0,r.jsx)(d.K,{align:"center",direction:"row",gap:2,children:(0,r.jsx)(B.Z,{forceHide:!eC,text:eC,children:(0,r.jsx)(y.Z,{"aria-labelledby":"label-for-protection-bypass-automation-header",checked:_,direction:"switch-first",disabled:!!eC,onChange:ed,size:"large",children:(0,r.jsx)(c.x,{color:eC?"gray-900":void 0,id:"label-for-protection-bypass-automation-header",weight:500,children:_?"Enabled":"Disabled"})})})}),(0,r.jsx)(D,{children:T&&!ew?(0,r.jsx)("span",{children:"Protection Bypass for Automation with no protections enabled has no effect."}):null},"automation-bypass-no-protection-enabled-note"),(0,r.jsxs)(d.K,{direction:{sm:"column",md:"column",lg:"row"},gap:4,children:[(0,r.jsx)(J.Z,{copyText:T||void 0,fill:!0,icon:!!T,onCopy:()=>{w.co.track(w.s6.DEPLOYMENT_PROTECTION_COPIED_BYPASS_HEADER,{projectId:e})},prompt:!1,style:{backgroundColor:"var(--accents-1)",color:N||!_?"var(--accents-3)":"var(--accents-6)",flexGrow:1,cursor:T&&!N?"default":"not-allowed",width:"100%",display:"flex",padding:"0px var(--geist-gap-double) 0px var(--geist-space-2x)",alignItems:"center",height:"40px"},text:(0,r.jsxs)(d.K,{align:"center",direction:"row",gap:2,children:[(0,r.jsx)(d.K,{align:"center",justify:"center",style:{width:24,height:24},children:ef().prefix}),(0,r.jsx)(r.Fragment,{children:ef().text})]})}),(0,r.jsx)(B.Z,{forceHide:ei,text:ei?null:"Missing required permission to regenerate secret",children:(0,r.jsx)(G.z,{disabled:N||!T||!ei,onClick:()=>z("regenerate"),type:"secondary",children:"Regenerate Secret"})})]}),(0,r.jsxs)(c.x,{color:"gray-900",children:["See the"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#using-protection-bypass-for-automation",type:"highlight",children:"documentation"})," ","for additional options when using Protection Bypass for Automation."]})]})}),(0,r.jsxs)(ee.Modal,{active:!!L,onClickOutside:()=>z(!1),width:480,children:[(0,r.jsx)(ee.Body,{children:(0,r.jsx)(ee.Header,{children:(0,r.jsxs)(d.K,{gap:4,children:[(0,r.jsx)(c.x,{size:20,transform:"initial",weight:500,children:"regenerate"===L?"Regenerate Protection Bypass Secret":"Delete Protection Bypass Secret"}),(0,r.jsx)(ee.Subtitle,{children:(0,r.jsxs)(d.K,{gap:4,children:[(0,r.jsx)(c.x,{color:"gray-900",transform:"initial",children:"regenerate"===L?"Regenerating this secret will mean any automation services using the current secret will no longer work and may report errors until they are switched to the new secret.":"Deleting this secret will mean any automation services currently using it will no longer work and may report errors."}),(0,r.jsx)(c.x,{color:"gray-900",transform:"initial",children:"Are you sure you want to continue?"})]})})]})})}),(0,r.jsxs)(ee.Actions,{children:[(0,r.jsx)(ee.Action,{onClick:eu,type:"secondary",children:"Cancel"}),(0,r.jsx)(ee.Action,{loading:N,onClick:ep,children:"Confirm"})]})]})]})}var ei=n(572465),es=n(338859),el=n(57325),ea=n(131555),ed=n(604803),ec=n(684624),eu=n(280176),ep=n(805595),eh=n(237624);let eg=e=>{try{let[t]=(0,eh.parseCIDR)(e);return"ipv4"===t.kind()}catch{return!1}},ey=e=>eh.IPv4.isValid(e)||eg(e),ev=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];for(let r of t)try{if((0,eh.isValid)(e)&&(0,eh.isValid)(r))e===r&&n.push(r);else if((0,eh.isValid)(e))(0,eh.parse)(e).match((0,eh.parseCIDR)(r))&&n.push(r);else if((0,eh.isValid)(r))(0,eh.parse)(r).match((0,eh.parseCIDR)(e))&&n.push(r);else{let t=(0,eh.parseCIDR)(e),o=(0,eh.parseCIDR)(r);(t[0].match(o)||o[0].match(t))&&n.push(r)}}catch(e){}return n};function ex(e){let{overrides:t,...n}=e,o={additional:{label:"Trusted IP Required",description:(0,r.jsxs)(c.x,{as:"span",color:"inherit",children:["Visitors"," ",(0,r.jsx)(c.x,{as:"span",color:"inherit",weight:500,children:"must"})," ","come from a Trusted IP address, and satisfy Vercel Authentication or Password Protection if enabled."]}),...null==t?void 0:t.additional},exclusive:{label:"Trusted IP Optional",description:(0,r.jsxs)(c.x,{as:"span",color:"inherit",children:["Visitors from a Trusted IP address will automatically"," ",(0,r.jsx)(c.x,{as:"span",color:"inherit",weight:500,children:"bypass"})," ","Vercel Authentication and Password Protection. Other users will be prompted with the enabled Deployment Protection methods."]}),...null==t?void 0:t.exclusive}};return(0,r.jsx)(L,{ariaLabel:"Select the protection mode for Trusted IPs.",values:o,width:280,...n})}function em(){var e,t,n,o,i,s,h,b,w,P,C,T,_,k;let E=(0,g.e1)(),A=(0,j.ic)(),{data:Z,mutate:N}=(0,m.PY)(A,{apiVersion:"v10"}),O=(0,x.Z)(),{can:R,isLoading:$}=(0,f.ZP)(),L=R(f.aU.Update,f._z.Project)&&R(f.aU.Update,f._z.TrustedIps),V=R(f.aU.Read,f._z.TrustedIps),{user:H,team:F}=O,M=(null==F?void 0:null===(e=F.standaloneTrustedIps)||void 0===e?void 0:e.enabled)||!1,U=(0,a.useMemo)(()=>!!(V&&(null==Z?void 0:Z.trustedIps)),[V,null==Z?void 0:Z.trustedIps]),[Y,W]=(0,a.useState)(U),q=(0,a.useMemo)(()=>{var e;return V&&(null==Z?void 0:null===(e=Z.trustedIps)||void 0===e?void 0:e.deploymentType)||"preview"},[V,null==Z?void 0:null===(t=Z.trustedIps)||void 0===t?void 0:t.deploymentType]),[J,X]=(0,a.useState)(q),Q=(0,a.useMemo)(()=>{var e;return V&&(null==Z?void 0:null===(e=Z.trustedIps)||void 0===e?void 0:e.protectionMode)||"additional"},[V,null==Z?void 0:null===(n=Z.trustedIps)||void 0===n?void 0:n.protectionMode]),[et,en]=(0,a.useState)(Q),[eo,eh]=(0,a.useState)(!1),[eg,em]=(0,a.useState)(null),[eb,ef]=(0,a.useState)(!1),{value:ej}=(0,eu.tc)(),ew=R(f.aU.Read,f._z.IpBlocking),{data:eP}=(0,ep.mr)({limit:128}),eI=(0,a.useCallback)(e=>e.map((t,n)=>{let{value:o,note:i}=t;if(!o&&i)return{...t,error:"Please enter a value."};if(o&&!ey(o))return{...t,error:"Unsupported format: Must be an IPv4 address or CIDR block."};if(o&&e.slice(0,n).filter(e=>{let{value:t}=e;return t===o}).length>0)return{...t,error:"Address already in the list."};if(null==F?void 0:F.slug){let e=ej&&ew?null==eP?void 0:eP.result.map(e=>{let{ip:t}=e;return t}):void 0,n=`/teams/${F.slug}/settings/security#ip-blocking`,i=ev(o,e);if(i.length>0)return{...t,warning:(0,r.jsxs)(r.Fragment,{children:["Potential conflict with"," ",(0,r.jsx)(p.r,{href:n,variant:"blend",children:"Blocked IPs"})," ","(",i.join(", "),"). Blocked addresses will not be trusted."]})}}return{...t,error:null,warning:null}}),[eP,ej,ew,null==F?void 0:F.slug]),eC=(0,a.useMemo)(()=>{var e;let t=Date.now();return V&&(null==Z?void 0:null===(e=Z.trustedIps)||void 0===e?void 0:e.addresses)&&0!==Z.trustedIps.addresses.length?eI(Z.trustedIps.addresses.map((e,n)=>{let{value:r,note:o}=e;return{renderingId:t+n,value:r,note:o,error:null,warning:null}})):[{renderingId:t,value:"",error:null,warning:null}]},[V,null==Z?void 0:Z.trustedIps,eI]),[eT,e_]=(0,a.useState)(eC),ek=(0,a.useMemo)(()=>({trustedIps:Y?{deploymentType:J,addresses:eT.map(e=>{let{value:t,note:n}=e;return{value:t,note:n}}).filter(e=>{let{value:t}=e;return!!t}),protectionMode:et}:null}),[Y,J,eT,et]),eS=(0,a.useCallback)(async()=>{eh(!0);try{em(null),await (0,v.Z)(A,null==F?void 0:F.id,ek),E.success("Updated Trusted IPs successfully."),await N()}catch(e){em(e.message)}eh(!1)},[A,N,F,E,ek]),eE=(0,a.useCallback)(e=>{W(e),e_(e=>{let[t,...n]=e;return[{...t,renderingId:t.renderingId-1},...n]})},[]),eA=(0,a.useCallback)(e=>{X(e)},[]),eZ=(0,a.useCallback)(()=>{e_(e=>[...e,{renderingId:Date.now(),value:"",error:null,warning:null}])},[]),eN=(0,a.useCallback)(e=>{e_(t=>{if(t.length<=1)return[{renderingId:Date.now(),value:"",error:null,warning:null}];let n=t.findIndex(t=>{let{renderingId:n}=t;return n===e});return[...t.slice(0,n),...t.slice(n+1)]})},[]),eD=(0,a.useCallback)((e,t)=>{let{value:n,note:r}=t;e_(t=>t.map(t=>t.renderingId===e?{...t,value:n??t.value,note:r??t.note}:t))},[]),eO=(0,a.useCallback)((e,t)=>{var n;(null===(n=t.relatedTarget)||void 0===n?void 0:n.id)!==`remove-input-${e}`&&e_(eI)},[eI]),eR=(0,a.useCallback)(e=>{e_(t=>t.map(t=>t.renderingId===e?{...t,error:null,warning:null}:t))},[]);(0,a.useEffect)(()=>{W(U),X(q),e_(eC),en(Q)},[Q,eC,U,q]);let e$=!Z||!(F||H)||$,eB=JSON.stringify(null==Z?void 0:null===(o=Z.trustedIps)||void 0===o?void 0:o.addresses)!==JSON.stringify(null===(i=ek.trustedIps)||void 0===i?void 0:i.addresses),eL=((null==Z?void 0:Z.trustedIps)||ek.trustedIps)&&((null==Z?void 0:null===(s=Z.trustedIps)||void 0===s?void 0:s.deploymentType)!==(null===(h=ek.trustedIps)||void 0===h?void 0:h.deploymentType)||(null==Z?void 0:null===(b=Z.trustedIps)||void 0===b?void 0:b.protectionMode)!==(null===(w=ek.trustedIps)||void 0===w?void 0:w.protectionMode)||eB),ez=Y&&eT.find(e=>{let{error:t}=e;return!!t}),eV=L&&eL&&!ez&&(!ek.trustedIps||ek.trustedIps.addresses.length>0),eH=(null==F?void 0:null===(P=F.billing)||void 0===P?void 0:P.plan)==="enterprise"&&L,eF=(0,a.useCallback)(()=>L?eH?(0,r.jsxs)(c.x,{children:["Learn more about"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#trusted-ips",type:"highlight",children:"Trusted IPs"})]}):(0,r.jsxs)(c.x,{as:"span",color:"gray-900",children:["This feature is available on the"," ",(0,r.jsx)(p.r,{external:!0,href:"/pricing",type:"highlight",children:"Enterprise plan"}),"."]}):(0,r.jsxs)(c.x,{lineHeight:32,children:["You need additional permissions to manage your project's"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#trusted-ips",type:"highlight",children:"Trusted IPs"}),"."]}),[L,eH]);if(e$)return(0,r.jsxs)("div",{className:"jsx-1ec8bdf1cd4e4b34",children:[(0,r.jsx)(u.Z,{height:280}),(0,r.jsx)(l(),{id:"1ec8bdf1cd4e4b34",children:"div.jsx-1ec8bdf1cd4e4b34:not(:last-of-type){margin-bottom:var(--geist-gap-section)}"})]});let eM=eo||!Y||!V,eU=!(Z.ssoProtection||Z.passwordProtection||(null===(C=Z.trustedIps)||void 0===C?void 0:C.protectionMode)==="exclusive"),eK=eT.length>=12,eY=()=>{ef(!1)},eW=!L||!eH,eq=!M&&!(null===(T=Z.ssoProtection)||void 0===T?void 0:T.deploymentType);return(0,r.jsxs)(I.Z,{action:eH?null:(0,r.jsx)(ei.Z,{"data-testid":(0,ec.C)("project-settings","paid-feature","contact-sales"),href:"/contact/sales",size:"small",tab:!0,children:"Contact Sales"}),beta:!0,description:"Restrict access to deployments to visitors from specific IP addresses only.",disabled:!L,disabledForBilling:eW,error:eg,highlightNote:!L,note:eF(),onSave:eH?async()=>{Y?await eS():ef(!0)}:null,saveDisabled:!eV,saveLoading:eo,title:"Trusted IPs",children:[(0,r.jsxs)(d.K,{gap:4,children:[(0,r.jsxs)(d.K,{align:"center",direction:"row",gap:{sm:2,md:4,lg:4},style:{flexWrap:"wrap"},children:[(0,r.jsx)(d.K,{align:"center",direction:"row",gap:2,children:(0,r.jsx)(B.Z,{desktopOnly:!0,forceHide:!eq,text:"Trusted IPs can only be enabled when Vercel Authentication is enabled.",children:(0,r.jsx)(y.Z,{"aria-labelledby":"label-for-trusted-ips-enabled-toggle",checked:Y,direction:"switch-first",disabled:eq,onChange:eE,size:"large",style:{padding:"var(--geist-gap-quarter) 0"},children:(0,r.jsx)(c.x,{color:eW||eq?"gray-800":void 0,id:"label-for-trusted-ips-enabled-toggle",transform:"none",weight:500,children:Y?"Enabled for":"Disabled"})})})}),Y?(0,r.jsx)(z,{disabled:eM,onChange:eA,overrides:{all:{disabledDescription:(null===(_=Z.ssoProtection)||void 0===_?void 0:_.deploymentType)==="all"||M?null:"Trusted IPs may not be enabled in an environment that Vercel Authentication is not enabled."}},selectedValue:J}):null]}),(0,r.jsx)(D,{type:"warning",children:Y&&"all"===J&&(null===(k=Z.trustedIps)||void 0===k?void 0:k.deploymentType)!=="all"?(0,r.jsx)(r.Fragment,{children:"Selecting this option will make Production Deployments no longer publicly accessible. Please be sure this is intended."}):null},"trusted-ips-all-deployments-note"),(0,r.jsx)(ed.Z,{gap:0,children:eT.sort((e,t)=>e.renderingId>t.renderingId?1:-1).map((e,t)=>{let{renderingId:n,value:o,note:i,error:s,warning:l}=e,a=eM||eT.length<=1;return(0,r.jsxs)(ed.Z,{halfGap:!0,children:[(0,r.jsxs)(ed.Z,{className:t>0?"geist-show-on-mobile":void 0,gap:0,row:!0,style:{marginTop:t>0?"var(--geist-gap-half)":0},children:[(0,r.jsx)(ed.Z,{flex:1,children:(0,r.jsxs)(d.K,{align:"center",direction:"row",gap:1,children:[(0,r.jsx)(c.x,{color:eW?"gray-800":"gray-900",id:"label-for-trusted-ips-trusted-ips-input",size:12,transform:"uppercase",weight:500,children:"IP / Subnet"}),(0,r.jsx)(B.Z,{text:"Supported formats: IPv4 and CIDR.",children:(0,r.jsx)(S.k,{})})]})}),0===t?(0,r.jsx)(ed.Z,{className:"geist-hide-on-mobile",flex:2,children:(0,r.jsx)(d.K,{align:"center",direction:"row",gap:1,children:(0,r.jsx)(c.x,{color:eW?"gray-800":"gray-900",id:"label-for-trusted-ips-trusted-ips-note",size:12,transform:"uppercase",weight:500,children:"Note"})})}):null]}),(0,r.jsxs)(ed.Z,{halfGap:!0,row:!0,children:[(0,r.jsx)(ed.Z,{children:(0,r.jsx)(ea.I,{"aria-labelledby":"label-for-trusted-ips-trusted-ips-input",autoFocus:eB,disabled:eM,error:eM?null:s,onBlur:e=>eO(n,e),onChange:e=>eD(n,{value:e.target.value}),onFocus:()=>eR(n),placeholder:eM?"":s||"85.146.82.237",showErrorMessage:!1,type:l?"warning":void 0,value:o,width:"100%"})}),(0,r.jsx)(ed.Z,{className:(0,K.W)(er().addressNoteInput),flex:2,children:(0,r.jsx)(ea.I,{"aria-labelledby":"label-for-trusted-ips-trusted-ips-input",disabled:eM,onBlur:e=>eO(n,e),onChange:e=>eD(n,{note:e.target.value}),placeholder:eM?"":"Enter a note about this IP Address",value:i,width:"100%"})}),(0,r.jsx)(ed.Z,{className:(0,K.W)(er().deleteIpAddressButton),flex:"0 0 32px",children:(0,r.jsx)(B.Z,{disableTriggers:!a||eM,text:"You must specify at least one address.",children:(0,r.jsx)(G.z,{"aria-label":"Remove IP Address",disabled:eM,id:`remove-input-${n}`,onClick:()=>eN(n),shape:"circle",size:"small",style:{border:"none",background:"none"},svgOnly:!0,type:"tertiary",children:(0,r.jsx)(es.S,{color:a?"var(--accents-3)":void 0})})})}),!eM&&(s||l)&&o?(0,r.jsx)(ed.Z,{className:(0,K.W)(er().ipError),children:s?(0,r.jsx)(c.x,{color:"red-900",children:s}):(0,r.jsx)(c.x,{color:"amber-900",children:l})}):null]})]},n)})}),(0,r.jsx)(B.Z,{disableTriggers:!eK,style:{alignSelf:"flex-start"},text:"Maximum 12 addresses allowed.",children:(0,r.jsx)(G.z,{disabled:eM||eK,onClick:eZ,prefix:(0,r.jsx)(el.F,{}),size:"small",style:{alignSelf:"flex-start",marginBottom:"var(--geist-space-2x)"},type:"secondary",children:"Add another"})}),M?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("hr",{className:"geist-hr-reset"}),(0,r.jsxs)(d.K,{align:"center",direction:"row",gap:2,children:[(0,r.jsx)(c.x,{color:eM?"gray-900":void 0,weight:500,children:"Protection mode"}),(0,r.jsx)(ex,{disabled:eM,onChange:en,overrides:{exclusive:{disabledDescription:eU?"No additional protections currently enabled.":null}},selectedValue:et})]})]}):null,(0,r.jsx)(D,{children:Y&&"exclusive"===et&&!(Z.passwordProtection||Z.ssoProtection)?(0,r.jsx)("span",{children:"Configuration of Trusted IP Optional with no other protections enabled has no effect."}):null},"trusted-ips-ip-note")]}),(0,r.jsxs)(ee.Modal,{active:eb,onClickOutside:eY,children:[(0,r.jsx)(ee.Body,{children:(0,r.jsxs)(d.K,{align:"flex-start",gap:4,children:[(0,r.jsx)(ee.Title,{children:"Disable Trusted IPs"}),(0,r.jsx)(ee.Subtitle,{children:"If you disable Trusted IPs, you will lose any previous values."}),(0,r.jsx)(ee.Subtitle,{children:"Are you sure you want to continue?"})]})}),(0,r.jsxs)(ee.Actions,{children:[(0,r.jsx)(ee.Action,{onClick:eY,type:"secondary",children:"Cancel"}),(0,r.jsx)(ee.Action,{onClick:async()=>{ef(!1),await eS()},children:"Continue"})]})]})]})}function eb(){return(0,r.jsx)(I.Z,{beta:!0,description:(0,r.jsx)(r.Fragment,{children:"Shareable Links allow access to Protected Deployments for collaborators outside of your Vercel team."}),note:(0,r.jsxs)(c.x,{children:["Learn more about"," ",(0,r.jsx)(p.r,{external:!0,href:"/docs/concepts/deployments/deployment-protection#shareable-links",type:"highlight",children:"Shareable Links"})]}),title:"Shareable Links",children:(0,r.jsxs)(c.x,{color:"gray-900",children:["These unique links can be created, revoked, and regenerated for any Deployment's"," ",(0,r.jsx)(B.Z,{text:"Always up-to-date view of a branch",children:(0,r.jsx)("u",{style:{cursor:"help",textDecorationStyle:"dotted",textUnderlineOffset:2},children:"Alias URL"})})," ","via the Share button on a Project's deployment page, or from the toolbar on a Preview Deployment, and will bypass Vercel Authentication, Password Protection, and Trusted IPs when these features are enabled."]})})}var ef=(0,U.Z)(function(){let e=(0,o.useRouter)(),{project:t}=e.query,{isReady:n,value:s}=(0,P.wc)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.G,{title:`${t||""} – Deployment Protection`,titlePostfix:!0}),(0,r.jsx)(M,{}),n&&s?(0,r.jsx)(em,{}):null,(0,r.jsx)(H,{}),(0,r.jsx)(eb,{}),(0,r.jsx)(eo,{})]})})},805595:function(e,t,n){"use strict";n.d(t,{aJ:function(){return u},j$:function(){return c},mr:function(){return d}});var r=n(353729),o=n(34209),i=n(495142),s=n(611648),l=n(539142),a=n(135635);let d=(e,t)=>{let{limit:n,offset:o,deleted:d}=e,{isReady:c,team:u}=(0,a.t7)();return(0,r.ZP)(()=>c?`${s.Sn}/${(0,l.c)({teamId:null==u?void 0:u.id,limit:n,offset:o,deleted:d})}`:null,e=>(0,i.I)(e,{throwOnHTTPError:!0}),t)};function c(e){let{team:t}=(0,a.t7)();return(0,o.Z)(s.Sn,n=>(0,i.I)(`${n}${(0,l.c)({teamId:null==t?void 0:t.id})}`,{body:{ids:[e]},method:"DELETE",throwOnHTTPError:!0}))}function u(e){let{newRule:t}=e,{team:n}=(0,a.t7)();return(0,o.Z)(s.Sn,e=>(0,i.I)(`${e}${(0,l.c)({teamId:null==n?void 0:n.id})}`,{body:{domain:t.domain,ips:[t.ip]},method:"POST"}),{throwOnError:!0})}},531635:function(e,t,n){"use strict";n.d(t,{i:function(){return s},x:function(){return l}});var r=n(611648),o=n(495142),i=n(539142);async function s(e){let{projectIdOrName:t,teamId:n,body:s}=e;return(0,o.I)(`${(0,r.HJ)("v10")}/${t}/protection-bypass${(0,i.c)({teamId:n})}`,{method:"PATCH",body:JSON.stringify(s),throwOnHTTPError:!0})}async function l(e){let{aliasId:t,teamId:n,body:s}=e;return(0,o.I)(`${r.sL}/${t}/protection-bypass${(0,i.c)({teamId:n})}`,{method:"PATCH",body:JSON.stringify(s),throwOnHTTPError:!0})}},160446:function(e,t,n){"use strict";n.d(t,{R:function(){return r},u:function(){return o}});let r=(e,t)=>{if(!e.protectionBypass)return null;let n=Object.keys(e.protectionBypass).find(n=>{var r;return(null===(r=e.protectionBypass)||void 0===r?void 0:r[n].scope)===t});return n||null},o=(e,t)=>`${e}?_vercel_share=${t}`},38162:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});var r=n(397458),o=n(14517);n(652983);var i=n(832191),s=n(585970),l=n.n(s);let a=e=>{let{normal:t,active:n,hover:s,className:a,...d}=e;return(0,r.jsx)(i.z,{...d,className:(0,o.W)(l().button,a),"data-custom-button":"",style:{"--button-custom-fg":`${(null==t?void 0:t.foreground)||""}`,"--button-custom-bg":`${(null==t?void 0:t.background)||""}`,"--button-custom-border":`${(null==t?void 0:t.border)||""}`,"--button-custom-fg-active":`${(null==n?void 0:n.foreground)||""}`,"--button-custom-bg-active":`${(null==n?void 0:n.background)||""}`,"--button-custom-border-active":`${(null==n?void 0:n.border)||""}`,"--button-custom-fg-hover":`${(null==s?void 0:s.foreground)||""}`,"--button-custom-bg-hover":`${(null==s?void 0:s.background)||""}`,"--button-custom-border-hover":`${(null==s?void 0:s.border)||""}`},children:d.children})}},813348:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var r=n(923390);let o=(0,r.H)('<path d="M6 17C4.89543 17 4 16.1046 4 15V5C4 3.89543 4.89543 3 6 3H13C13.7403 3 14.3866 3.4022 14.7324 4M11 21H18C19.1046 21 20 20.1046 20 19V9C20 7.89543 19.1046 7 18 7H11C9.89543 7 9 7.89543 9 9V19C9 20.1046 9.89543 21 11 21Z"/>')},118838:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(923390);let o=(0,r.H)('<path d="M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"/><path d="M1 1l22 22"/>')},565893:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(923390);let o=(0,r.H)('<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>')},824852:function(e){e.exports={snippetButton:"deployment-protection_snippetButton__3PwkS",addressNoteInput:"deployment-protection_addressNoteInput__FNbLg",deleteIpAddressButton:"deployment-protection_deleteIpAddressButton__ByWFG",ipError:"deployment-protection_ipError__2fSas"}},494145:function(e){e.exports={code:"inline_code__oyCmg",nowrap:"inline_nowrap__9PYnJ",truncate:"inline_truncate__7Rl6D"}},661654:function(e){e.exports={copyButtonIcon:"copy-button_copyButtonIcon__c_n2b"}},593757:function(e){e.exports={button:"clearable_button__npmw2 reset_reset__cB_56 reset_reset__KRyvc",disabled:"clearable_disabled__sfEx_"}},786325:function(e){e.exports={snippet:"snippet_snippet__3r5iL",isUsingPlaceholder:"snippet_isUsingPlaceholder__2ysfL",dark:"snippet_dark__gC3Y5",copyIcon:"snippet_copyIcon__X_hqX",copy:"snippet_copy__J41LE",prompt:"snippet_prompt__8ewTu"}},585970:function(e){e.exports={button:"custom_button__pUskI"}}},function(e){e.O(0,[4299,97859,37568,24148,98586,85394,38419,59085,49162,81797,56138,10599,97831,49774,92888,40179],function(){return e(e.s=740435)}),_N_E=e.O()}]);