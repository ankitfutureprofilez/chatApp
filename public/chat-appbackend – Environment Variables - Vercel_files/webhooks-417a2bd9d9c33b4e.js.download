(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67418],{636977:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[teamSlug]/[project]/settings/webhooks",function(){return n(97968)}])},748949:function(e,t,n){"use strict";n.d(t,{Q:function(){return l}});var o=n(397458),r=n(652983),i=n(14517),s=n(806554),a=n.n(s);let l=(0,r.forwardRef)(function(e,t){let{onAction:n,Icon:s,size:l,className:c}=e,d=(0,r.useCallback)(e=>{"Enter"===e.key&&n()},[n]);return(0,o.jsx)("div",{className:a().iconWrapper,onClick:n,onKeyUp:d,ref:t,role:"button",tabIndex:0,children:(0,o.jsx)(s,{className:(0,i.W)(a().icon,c),size:l})})})},654538:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var o=n(397458),r=n(659863),i=n.n(r),s=n(9055),a=n(518027),l=n(802026),c=n.n(l);function d(e){let{project:t}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.h,{deploymentId:t.latestDeployment,framework:t.framework,size:20}),(0,o.jsx)(s.x,{color:"gray-900",children:t.name})]})}function u(e){let{project:t,teamSlug:n}=e;return n?(0,o.jsx)(i(),{className:c().project,href:`/${n}/${encodeURIComponent(t.name)}`,children:(0,o.jsx)(d,{project:t})}):(0,o.jsx)("div",{className:c().project,children:(0,o.jsx)(d,{project:t})})}function h(e){let{projectsMetadata:t,teamSlug:n}=e;return t?(0,o.jsx)("div",{className:c().projectsWrapper,children:t.map(e=>(0,o.jsx)(u,{project:e,teamSlug:n},e.id))}):(0,o.jsx)(s.x,{color:"gray-900",children:"All projects"})}},802184:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var o=n(397458),r=n(9055),i=n(601217),s=n(135635),a=n(464544),l=n(652983),c=n(729435),d=n(991990),u=n(850240),h=n(68839),m=n(212548),g=n(684624),p=n(266798),x=n(748949),j=n(654538),b=n(985991),w=n.n(b);function f(e){let{webhook:t,onRemoveTriggered:n,teamSlug:i,canRemoveWebhook:s}=e;return(0,o.jsxs)("div",{className:w()["webhook-entity"],"data-testid":t?(0,g.C)("webhooks","item"):void 0,children:[(0,o.jsx)("div",{className:w()["globe-wrapper"],children:(0,o.jsx)(c.T,{color:"var(--accents-5)",size:24})}),(0,o.jsx)(r.x,{className:w().url,color:"gray-900",monospace:!0,children:t?t.url:(0,o.jsx)(u.O,{boxHeight:20,height:16,vcenter:!0,width:200})}),(0,o.jsx)(h.K,{className:w()["webhook-main"],direction:"row",children:(0,o.jsx)(h.K,{gap:2,children:t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_,{events:t.events}),(0,o.jsx)(j.Z,{projectsMetadata:t.projectsMetadata,teamSlug:i})]}):(0,o.jsxs)(h.K,{gap:2,children:[(0,o.jsx)(u.O,{boxHeight:20,height:16,vcenter:!0,width:200}),(0,o.jsx)(u.O,{boxHeight:20,height:16,vcenter:!0,width:200})]})})}),t?(0,o.jsx)(r.x,{className:w().age,color:"gray-900",children:`Added ${(0,m.F6)(Date.now()-t.createdAt,{justNowLabel:"now",suffix:" ago"})}`}):(0,o.jsx)(u.O,{boxHeight:60,height:16,width:100}),s?(0,o.jsx)(h.K,{align:"center",className:w().remove,children:(0,o.jsx)(x.Q,{Icon:d.a,onAction:()=>t&&(null==n?void 0:n(t))})}):null]})}function _(e){let{events:t}=e,{data:n,error:i,isLoading:s}=(0,p.Nr)(),a=(0,l.useMemo)(()=>t&&n?(0,p.sx)(n.webhookEventCategories,n.webhookEvents,t):"",[t,n]);return!t||s?(0,o.jsxs)(h.K,{direction:"row",gap:3,children:[(0,o.jsx)(r.x,{color:"gray-900",children:"Events:"}),(0,o.jsx)(u.O,{height:16,width:80}),(0,o.jsx)(u.O,{height:16,width:80})]}):i?(0,o.jsxs)(r.x,{color:"gray-900",children:["Events: ",t.join(", ")]}):(0,o.jsxs)(r.x,{color:"gray-900",children:["Events: ",a]})}var v=n(905839),k=n(588875),y=n(306054),N=n(66818),E=n(125556),W=n.n(E);let S=e=>{let{teamId:t,isProjectReady:n,projectId:o}=e,[r,s]=(0,l.useState)(!1),[a,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(null),h=(0,N.e1)(),{deleteWebhook:m}=(0,i.Hc)({projectId:o,enabled:n}),g=(0,l.useCallback)(async()=>{if(a){s(!0);try{let e=await m({id:a.id,teamId:t});if((e.status??404)>=400)throw Error("Webhook not found");c(null),h.success({text:"Removed Webhook successfully.",key:"remove-webhook"})}catch(e){u((0,v.SC)(e))}finally{s(!1)}}},[a,t,h,m]),p=(0,l.useCallback)(()=>{s(!1),u(null)},[]);return{isRemovingWebhook:r,webhookBeingRemoved:a,removeError:d,handleClose:p,handleRemoveWebhook:g,setWebhookBeingRemoved:c}};function P(e){let{removeError:t,webhookBeingRemoved:n,onRemove:i,isRemovingWebhook:s,onClose:a}=e;return(0,o.jsxs)(k.Modal,{active:!!n,onClickOutside:a,children:[(0,o.jsxs)(k.Body,{children:[(0,o.jsx)("header",{children:(0,o.jsx)(r.x,{align:"center",as:"h1",className:W()["modal-title"],size:24,children:"Remove Webhook"})}),(0,o.jsx)("main",{children:(0,o.jsx)(r.x,{align:"center",children:`The Webhook ${(null==n?void 0:n.url)??""} will be permanently deleted.
              Are you sure you want to continue?`})}),t?(0,o.jsx)(y.Z,{className:W()["error-message"],error:t}):null]}),(0,o.jsxs)(k.Actions,{children:[(0,o.jsx)(k.Action,{onClick:a,type:"secondary",children:"Cancel"}),(0,o.jsx)(k.Action,{loading:s,onClick:i,children:"Remove"})]})]})}var C=n(153336),$=n.n(C);function I(e){let{EmptyState:t,projectId:n,isProjectReady:l=!0,title:c}=e,{team:d,isReady:u}=(0,s.t7)(),{data:h,error:m,permissions:g}=(0,i.Hc)({projectId:n,enabled:l}),{removeError:p,isRemovingWebhook:x,webhookBeingRemoved:j,handleClose:b,handleRemoveWebhook:w,setWebhookBeingRemoved:_}=S({teamId:null==d?void 0:d.id,projectId:n,isProjectReady:l}),v=!l||!u||g.isLoading||g.list&&!m&&!h;return v||g.list?!t&&(v||(null==h?void 0:h.length)===0)?null:v&&t?(0,o.jsxs)("div",{className:$()["webhook-list"],children:[(0,o.jsx)(f,{teamSlug:null}),(0,o.jsx)(f,{teamSlug:null}),(0,o.jsx)(f,{teamSlug:null})]}):(0,o.jsxs)(o.Fragment,{children:[(null==h?void 0:h.length)===0?t:(0,o.jsxs)(o.Fragment,{children:[c?(0,o.jsx)(r.x,{as:"h3",size:20,weight:600,children:c}):null,(0,o.jsx)("div",{className:$()["webhook-list"],children:null==h?void 0:h.map(e=>(0,o.jsx)(f,{canRemoveWebhook:g.remove,onRemoveTriggered:_,teamSlug:(null==d?void 0:d.slug)??null,webhook:e},e.id))})]}),(0,o.jsx)(P,{isRemovingWebhook:x,onClose:()=>{b(),_(null)},onRemove:w,removeError:p,webhookBeingRemoved:j})]}):(0,o.jsx)(a._,{resource:"webhooks",team:d})}},464544:function(e,t,n){"use strict";n.d(t,{_:function(){return m}});var o=n(397458),r=n(603385),i=n.n(r),s=n(68839),a=n(9055),l=n(921690),c=n(466332),d=n(291033),u=n(171267),h=n.n(u);function m(e){var t;let{team:n,resource:r,title:u="Additional Permissions Required",customMessage:m,className:g}=e,p=(null==n?void 0:null===(t=n.membership)||void 0===t?void 0:t.role)??"",x=i()(p.replaceAll("_"," "));return(0,o.jsxs)(s.K,{align:"center",className:g??h().additionalPermissionsWrapper,gap:4,justify:"center",children:[(0,o.jsx)(a.x,{align:"center",weight:500,children:u}),(0,o.jsx)(a.x,{align:"center",as:"p",className:h().message,children:p?(0,o.jsxs)(o.Fragment,{children:["As a ",(0,o.jsx)(a.x,{as:"span",weight:500,children:x})," on the ",(0,o.jsx)(c.qE,{size:20,teamId:(null==n?void 0:n.id)??""}),(0,o.jsx)(a.x,{as:"span",weight:500,children:` ${(null==n?void 0:n.name)??""}`})," team, ",m||`you do not have permission to view ${r}.`]}):`You do not have permission to view ${r}.`}),(0,o.jsxs)(a.x,{align:"center",as:"p",className:h().link,color:"gray-900",children:["Learn more about"," ",(0,o.jsx)(l.r,{external:!0,href:"/docs/accounts/team-members-and-roles/access-roles",onClick:()=>{d.co.track(d.s6.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]})}},99703:function(e,t,n){"use strict";var o=n(397458),r=n(496952),i=n(832191),s=n(14517),a=n(572009),l=n.n(a);t.Z=function(e){let{feedback:t,muted:n,size:a}=e;return(0,o.jsxs)("div",{className:l().betaBadge,children:[(0,o.jsx)(r.C,{className:(0,s.W)(n?l().betaBadgeMuted:null),size:a,variant:n?"gray-subtle":"pink",children:"Beta"}),t?(0,o.jsx)(i.z,{className:l().feedbackButton,onClick:()=>{document.dispatchEvent(new Event("show-feedback"))},size:"small",type:"tertiary",children:"Provide feedback"}):null]})}},518027:function(e,t,n){"use strict";n.d(t,{h:function(){return m}});var o=n(397458),r=n(14517),i=n(850240),s=n(466332),a=n(566968),l=n(9708),c=n(235018),d=n.n(c),u=n(920074),h=n.n(u);function m(e){let{framework:t,deploymentId:n,size:c=20}=e,{data:u}=(0,l.Z)(n?{id:n}:void 0),m=(0,a.mk)({framework:t});return!m||n&&void 0===u?(0,o.jsx)(i.O,{height:c,rounded:!0,style:{flexShrink:0},width:c}):(0,o.jsx)(s.qE,{className:(0,r.W)({[h().favicon]:!!(!u||!u.isSquare),[d().frameworkIcon]:!!(!u&&t)}),size:c,src:(null==u?void 0:u.src)||m.logo,title:`${m.name}`})}},97968:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var o=n(897831),r=n(397458),i=n(446118),s=n(729435),a=n(68839),l=n(9055),c=n(802184),d=n(927628),u=n(921690),h=n(135635),m=n(99703),g=n(618350),p=n.n(g);function x(e){let{teamSlug:t}=e;return(0,r.jsxs)("div",{className:p().noWebhooks,children:[(0,r.jsx)("div",{className:p().globeWrapper,children:(0,r.jsx)(s.T,{color:"var(--accents-5)",size:24})}),(0,r.jsx)(l.x,{align:"center",as:"h6",color:"gray-1000",weight:600,children:"No webhooks are associated with this project"}),(0,r.jsxs)(l.x,{align:"center",className:p().noWebhooksDescription,color:"gray-900",children:["Create one by by going to Webhooks in"," ",(0,r.jsx)(u.r,{href:`/teams${t?`/${t}`:""}/settings/webhooks`,type:"highlight",children:"Team Settings"})]})]})}var j=(0,o.Z)(function(){let e=(0,i.useRouter)(),{project:t}=e.query,{data:n}=(0,d.PY)(null==t?void 0:t.toString()),{teamSlug:o}=(0,h.t7)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.K,{align:"center",direction:"row",gap:2,children:[(0,r.jsx)(l.x,{as:"h3",size:20,weight:600,children:"Team Webhooks"}),(0,r.jsx)(m.Z,{})]}),(0,r.jsxs)(l.x,{className:p().description,color:"gray-900",children:["Managed from"," ",(0,r.jsx)(u.r,{href:`/teams${o?`/${o}`:""}/settings/webhooks`,type:"highlight",children:"Team Settings"})]}),(0,r.jsx)(c.Z,{EmptyState:(0,r.jsx)(x,{teamSlug:o}),isProjectReady:!!n,projectId:(null==n?void 0:n.id)??""})]})})},266798:function(e,t,n){"use strict";n.d(t,{GF:function(){return i},Nr:function(){return b},XP:function(){return s},qO:function(){return v},sx:function(){return w},ur:function(){return _},xh:function(){return f}});var o,r,i,s,a=n(353729),l=n(239907),c=n.n(l),d=n(571635),u=n.n(d),h=n(785466),m=n.n(h),g=n(611648),p=n(495142),x=n(761891),j=n(557385);function b(e){let t=(0,j.Z)(),{can:n,isLoading:o}=(0,x.ZP)(),r=!o&&n(x.aU.List,x._z.Webhooks);return(0,a.ZP)(()=>r?g.lq:null,e=>{var n;let o=null===(n=t.team)||void 0===n?void 0:n.id,r=new URLSearchParams(o?{teamId:o}:{});return(0,p.I)(`${e}?${r.toString()}`,{throwOnHTTPError:!0})},e)}function w(e,t,n){let o=Object.entries(c()(n,e=>y(t,e).category)).map(n=>{let[o,r]=n,i=r.map(e=>y(t,e)),s=t.filter(e=>e.category===o);return{groupWebhookEvents:i,category:function(e,t){let n=e.find(e=>{let{name:n}=e;return n===t});if(!n)throw Error(`Cannot find webhook event for name '${t}'`);return n}(e,o),includesAllCategoryEvents:m()(N(i).sort(),N(s).sort())}});return e.length===o.length&&o.every(e=>{let{includesAllCategoryEvents:t}=e;return t})?"All events":u()(o,[e=>{let{includesAllCategoryEvents:t}=e;return!t},e=>{let{category:t}=e;return t.label}]).map(e=>{let{category:t,includesAllCategoryEvents:n,groupWebhookEvents:o}=e;return n?`All ${t.label}`:o.map(e=>{let{label:t}=e;return t}).join(", ")}).join(", ")}function f(e,t){return e.filter(e=>e.targets.some(e=>k(e).type===t))}function _(e,t,n){return t.filter(t=>{let o=e.find(e=>{let{name:n}=e;return n===t});if(!o)throw Error(`Could not find webhook event for webhook event name '${t}'`);return v(o,n)})}function v(e,t){let n=e.targets.find(e=>k(e).type===t.type);if(!n)throw Error(`No matching webhook target type found for '${t.type}' in webhook event '${e.name}'`);let{projectScope:o}=k(n);return o===t.projectScope||o===s.None}function k(e){return"string"==typeof e?{type:e,projectScope:s.None}:e}function y(e,t){let n=e.find(e=>{let{name:n}=e;return n===t});if(!n)throw Error(`Cannot find webhook event for name '${t}'`);return n}function N(e){return e.map(e=>{let{name:t}=e;return t})}(o=i||(i={})).Integration="webhook-target-integration",o.Team="webhook-target-team",(r=s||(s={})).All="all",r.Selected="selected",r.None="none"},601217:function(e,t,n){"use strict";n.d(t,{Hc:function(){return d}});var o=n(353729),r=n(611648),i=n(495142),s=n(539142),a=n(135635),l=n(761891);let c=(e,t)=>{let n=new URLSearchParams;return n.set("limit","20"),n.set("includes[]","project"),e&&n.set("teamId",e),t&&n.set("projectId",t),`${r.Bh}?${n.toString()}`};function d(e){let{isReady:t,team:n}=(0,a.t7)(),{can:d,isLoading:u}=(0,l.ZP)(),h={list:d(l.aU.List,l._z.Webhooks),create:d(l.aU.Create,l._z.Webhooks),remove:d(l.aU.Delete,l._z.Webhooks),isLoading:u},m=(0,o.ZP)(()=>t&&!h.isLoading&&h.list&&(null==e?void 0:e.enabled)?c(null==n?void 0:n.id,e.projectId):null,e=>(0,i.I)(e,{throwOnHTTPError:!0}),e),g=async e=>{let{id:t,teamId:n}=e,o=await (0,i.I)(`${r.Bh}/${t}${(0,s.c)({teamId:n})}`,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0});return await m.mutate(),o},p=async e=>{let{events:t,projectIds:n,teamId:o,url:a}=e,l=await (0,i.I)(`${r.Bh}/${(0,s.c)({teamId:o})}`,{method:"POST",throwOnHTTPError:!0,body:{events:t,projectIds:n,url:a}});return await m.mutate(),l};return{...m,deleteWebhook:g,createWebhook:p,permissions:h}}},806554:function(e){e.exports={icon:"icon-action_icon__HIMNY",iconWrapper:"icon-action_iconWrapper__DzE7t"}},802026:function(e){e.exports={project:"projects-labels_project__ysbaK",projectsWrapper:"projects-labels_projectsWrapper__cPdMg"}},125556:function(e){e.exports={"modal-title":"remove-webhook-modal_modal-title__G5Q0P","error-message":"remove-webhook-modal_error-message__tAjJ2"}},985991:function(e){e.exports={"webhook-entity":"webhook-entity_webhook-entity__1IsWq","globe-wrapper":"webhook-entity_globe-wrapper__58Axe","webhook-projects-wrapper":"webhook-entity_webhook-projects-wrapper__4VVyS","webhook-project":"webhook-entity_webhook-project__CAjDJ",reveal:"webhook-entity_reveal__3jlRi",age:"webhook-entity_age__iQLRP","webhook-main":"webhook-entity_webhook-main__HwrB7",remove:"webhook-entity_remove__qUTot",url:"webhook-entity_url__UcLjH"}},153336:function(e){e.exports={"webhook-list":"webhooks-list_webhook-list__X6TRP"}},171267:function(e){e.exports={additionalPermissionsWrapper:"additional-permissions-required_additionalPermissionsWrapper__FVwHY",message:"additional-permissions-required_message__IqhgE",link:"additional-permissions-required_link__iowP4"}},572009:function(e){e.exports={betaBadge:"beta-badge_betaBadge__nn52_",betaBadgeMuted:"beta-badge_betaBadgeMuted__VXlGg",feedbackButton:"beta-badge_feedbackButton__Q8_1M"}},618350:function(e){e.exports={description:"webhooks_description__OZv3u",noWebhooksDescription:"webhooks_noWebhooksDescription__AUn5w",noWebhooks:"webhooks_noWebhooks__G8hWx",globeWrapper:"webhooks_globeWrapper__pgzi9"}},920074:function(e){e.exports={favicon:"project-logo_favicon__lAw_s"}}},function(e){e.O(0,[4299,57976,24148,98586,85394,38419,59085,49162,81797,10599,97831,49774,92888,40179],function(){return e(e.s=636977)}),_N_E=e.O()}]);