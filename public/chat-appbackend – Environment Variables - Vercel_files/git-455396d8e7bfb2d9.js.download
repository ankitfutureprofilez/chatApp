(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71325],{879756:function(e,t,i){var n=i(786995);e.exports=function(e,t){return new Promise(function(i,r){var s=t||{},o=n.operation(s);function l(e){r(e||Error("Aborted"))}function a(e,t){if(e.bail){l(e);return}o.retry(e)?s.onRetry&&s.onRetry(e,t):r(o.mainError())}o.attempt(function(t){var n;try{n=e(l,t)}catch(e){a(e,t);return}Promise.resolve(n).then(i).catch(function(e){a(e,t)})})})}},706864:function(e,t,i){"use strict";function n(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}i.d(t,{Z:function(){return n}})},205996:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(706864),r=i(134052),s=i(559083);function o(e,t){(0,s.Z)(2,arguments);var i=(0,r.Z)(e),o=(0,r.Z)(t);return Math.round((i.getTime()-(0,n.Z)(i)-(o.getTime()-(0,n.Z)(o)))/864e5)}},885756:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});var n=i(510399),r=i(205996),s=i(559083);function o(e,t){var i=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return i<0?-1:i>0?1:i}function l(e,t){(0,s.Z)(2,arguments);var i=(0,n.Z)(e),l=(0,n.Z)(t),a=o(i,l),c=Math.abs((0,r.Z)(i,l));i.setDate(i.getDate()-a*c);var d=Number(o(i,l)===-a),u=a*(c-d);return 0===u?0:u}},710193:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[teamSlug]/[project]/settings/git",function(){return i(938319)}])},99703:function(e,t,i){"use strict";var n=i(397458),r=i(496952),s=i(832191),o=i(14517),l=i(572009),a=i.n(l);t.Z=function(e){let{feedback:t,muted:i,size:l}=e;return(0,n.jsxs)("div",{className:a().betaBadge,children:[(0,n.jsx)(r.C,{className:(0,o.W)(i?a().betaBadgeMuted:null),size:l,variant:i?"gray-subtle":"pink",children:"Beta"}),t?(0,n.jsx)(s.z,{className:a().feedbackButton,onClick:()=>{document.dispatchEvent(new Event("show-feedback"))},size:"small",type:"tertiary",children:"Provide feedback"}):null]})}},57452:function(e,t,i){"use strict";i.d(t,{r:function(){return T}});var n=i(397458),r=i(904414),s=i.n(r),o=i(652983),l=i(446118),a=i(850240),c=i(9055),d=i(832191),u=i(76845),h=i(875699),p=i(128286),g=i(604803),m=i(921690),x=i(306054),f=i(611648),j=i(559196),y=i(539142),b=i(135635),v=i(66818),_=i(927628),w=i(761891),C=i(192734);async function T(e,t,i,n){await (0,j.Z)(`${f.VE}/${e.id}/deploy-hooks${(0,y.c)({teamId:t})}`,{method:"POST",body:{ref:n,name:i},throwOnHTTPError:!0})}let S=e=>{let{branch:t,id:i,name:r,url:l,mutate:a,project:c,onError:p}=e,{team:m}=(0,b.t7)(),[x,_]=(0,o.useState)(!1),w=(0,v.e1)(),C=(0,o.useCallback)(async e=>{"preventDefault"in e&&(null==e||e.preventDefault()),_(!0);try{await (0,j.Z)(`${f.VE}/${c.id}/deploy-hooks/${i}${(0,y.c)({teamId:m?m.id:null})}`,{method:"DELETE",throwOnHTTPError:!0}),await a()}catch(e){p(e)}finally{_(!1)}},[a,m,c,i,p]);return(0,n.jsxs)("section",{className:"jsx-df36123de228beb3",children:[(0,n.jsx)("span",{className:"jsx-df36123de228beb3 geist-ellipsis",children:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("strong",{className:"jsx-df36123de228beb3",children:r})," on ",(0,n.jsx)("strong",{className:"jsx-df36123de228beb3",children:t})]}):(0,n.jsx)("strong",{className:"jsx-df36123de228beb3",children:t})}),(0,n.jsx)(h.Z,{y:.25}),(0,n.jsxs)(g.Z,{row:!0,vcenter:!0,children:[(0,n.jsx)(g.Z,{children:(0,n.jsx)("pre",{className:"jsx-df36123de228beb3 geist-ellipsis",children:l})}),(0,n.jsx)(h.Z,{}),(0,n.jsx)(d.z,{onClick:e=>{"preventDefault"in e&&(null==e||e.preventDefault()),(0,u.v)(l),w.message("Copied to clipboard!")},size:"small",children:"Copy"}),(0,n.jsx)(h.Z,{x:.5}),(0,n.jsx)(d.z,{loading:x,onClick:C,size:"small",type:"error",children:"Revoke"})]}),(0,n.jsx)(s(),{id:"df36123de228beb3",children:"section.jsx-df36123de228beb3{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;margin-bottom:10px}pre.jsx-df36123de228beb3{color:var(--accents-5);font-family:var(--font-mono);margin:0}"})]})};t.Z=()=>{let e=(0,l.useRouter)(),{data:t,mutate:i}=(0,_.PY)(e.query.project),{team:r,isReady:u}=(0,b.t7)(),{can:f,isLoading:j}=(0,w.ZP)(),y=f(w.aU.Update,w._z.Project),[v,Z]=(0,o.useState)(!1),[k,P]=(0,o.useState)(""),[L,N]=(0,o.useState)(""),[A,E]=(0,o.useState)(null),I=!u||!t||j,G=(0,o.useCallback)(async e=>{if(e.preventDefault(),E(null),""===L.replace(/\s/g,""))return E({message:"Hook name must not be empty"});if(""===k)return E({message:"Branch name must not be empty"});if(L.length>180)return E({message:"The name for your Deploy Hook cannot be longer than 180 characters."});Z(!0);try{await T(t,null==r?void 0:r.id,L,k),await i(),P(""),N("")}catch(e){E(e)}finally{Z(!1)}},[k,L,t,r,i]),H=null==t?void 0:t.link,z=H?H.deployHooks:null,M=(0,o.useMemo)(()=>t?H?Array.isArray(z)&&z.length?z.map(e=>(0,n.jsx)(S,{branch:e.ref,id:e.id,mutate:i,name:e.name,onError:E,project:t,url:e.url},e.id)):(0,n.jsx)(c.x,{children:"This project does not have any deploy hooks."}):(0,n.jsxs)(c.x,{children:["This Project is not connected to a Git repository. To be able to set up a Deploy Hook, you need to set up a new connection in the"," ",'"Connected Git Repository" section above.']}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.O,{height:17,style:{marginTop:"5px"},width:280}),(0,n.jsx)(a.O,{height:17,style:{marginTop:"5px"},width:170}),(0,n.jsx)(a.O,{className:"geist-show-on-mobile",height:17,style:{marginTop:"5px"},width:200}),(0,n.jsx)(a.O,{className:"geist-show-on-mobile",height:17,style:{marginTop:"5px"},width:45})]}),[t,H,z,i]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(C.Z,{description:"Deploy hooks are unique URLs that allow you to trigger a deployment of a given branch.",disabled:I||!y,highlightNote:!I&&!y,note:I?(0,n.jsx)(a.O,{boxHeight:32,vcenter:!0,width:200}):y?(0,n.jsxs)(c.x,{lineHeight:32,children:["Learn more about"," ",(0,n.jsx)(m.r,{external:!0,href:"/docs/concepts/deployments/deploy-hooks",tab:!0,type:"highlight",children:"Deploy Hooks"})]}):(0,n.jsx)(c.x,{lineHeight:32,children:"You need additional permissions to manage your project's deploy hooks."}),title:"Deploy Hooks",children:[M,t&&H?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{y:.5}),(0,n.jsx)(c.x,{as:"h5",size:16,weight:600,children:"Create Hook"}),(0,n.jsx)(h.Z,{y:.5}),(0,n.jsx)("form",{onSubmit:G,className:"jsx-c668af8586dc9ab2",children:(0,n.jsxs)(g.Z,{direction:["column","column","row"],vcenter:!0,children:[(0,n.jsx)(g.Z,{children:(0,n.jsx)(p.Z,{onChange:N,placeholder:"My Example Hook",style:{height:40},value:L})}),(0,n.jsx)(h.Z,{}),(0,n.jsx)(p.Z,{onChange:P,placeholder:"main",style:{height:40},value:k}),(0,n.jsx)(h.Z,{}),(0,n.jsx)(d.z,{loading:v,children:"Create Hook"})]})})]}):null,A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{}),(0,n.jsx)(x.Z,{children:A.message})]}):null]}),(0,n.jsx)(s(),{id:"c668af8586dc9ab2",children:".input.jsx-c668af8586dc9ab2 label.jsx-c668af8586dc9ab2{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:13px;color:var(--geist-foreground);cursor:pointer;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.input.disabled.jsx-c668af8586dc9ab2{opacity:.4}.input.jsx-c668af8586dc9ab2 label.jsx-c668af8586dc9ab2 .copy.jsx-c668af8586dc9ab2{margin-left:8px}.create-hook.jsx-c668af8586dc9ab2{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}},266113:function(e,t,i){"use strict";i.d(t,{e:function(){return n}});let n=e=>{switch(e){case"github":return"GitHub organization";case"gitlab":return"GitLab group";case"bitbucket":return"Bitbucket workspace";default:return"organization"}}},763211:function(e,t,i){"use strict";i.d(t,{E:function(){return d},Z:function(){return u}});var n=i(397458),r=i(14517),s=i(607974),o=i(549301),l=i.n(o),a=i(348126),c=i.n(a);let d=e=>{let{children:t,syntax:i,lite:s,style:o}=e;return(0,n.jsx)("pre",{className:(0,r.W)(c().pre,i,{[c().lite]:s}),style:o,children:(0,n.jsx)("code",{className:l().code,children:t})})},u=e=>{let{children:t,noWrap:i,fontSize:o,...l}=e,a=(0,s.B)();return(0,n.jsx)("code",{className:(0,r.W)(c().code,{[c()["no-wrap"]]:i,[c().disabled]:a}),style:{fontSize:o},...l,children:t})}},106044:function(e,t,i){"use strict";i.d(t,{c:function(){return r}});var n=i(707323);function r(e){let{includeOrg:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"error"in e)return"";switch(e.type){case"github":return t?`${e.org||""}/${e.repo}`:e.repo;case"gitlab":if("projectUrl"in e){let i=(0,n.Z)(e.projectUrl);if(i)return t?`${i.owner}/${i.name}`:i.name}return"";case"bitbucket":if("slug"in e){if(t&&"owner"in e)return`${e.owner}/${e.slug}`;return e.slug}return"";default:return""}}},938319:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return e9}});var n=i(397458),r=i(446118),s=i(75883),o=i(652983),l=i(12418),a=i.n(l),c=i(949074),d=i(369737),u=i(850240),h=i(9055),p=i(832191),g=i(572465),m=i(68839),x=i(921690),f=i(875699),j=i(66818),y=i(277346),b=i(503030),v=i(604803),_=i(14517),w=i(620473),C=i(130322),T=i(823671),S=i(101036),Z=i(340574),k=i(601679),P=i(505645),L=i(901632),N=i(427434),A=i(611648),E=i(600929),I=i(684624),G=i(495142),H=i(912692),z=i(646386),M=i(726281),B=i(283896),D=i(609230),R=i(331612),O=i(536290),F=i(801318),U=i(235018),$=i.n(U),W=i(137327),q=i.n(W);function V(e){let{gitType:t,dispatch:i,usePreferredGitAccount:r,size:s}=e,[l,a]=(0,o.useState)(!1),{user:c}=(0,D.a)(),{account:d,mutate:h}=(0,R.Z)(c??null),p=(0,o.useCallback)(async()=>{a(!0);let e=await (0,O.Iw)(t);a(!1);let n=Array.isArray(e)&&e.length>0?e[0].id:void 0;i({type:"SET_GIT_ACCOUNT",gitAccount:{provider:t,namespaceId:n}}),r&&ei({provider:t,namespaceId:n})},[i,t,r]),g=(0,H.Z)({onOpen:()=>{a(!0)},onAbort:()=>{a(!1)},onSuccess:()=>{p(),h(),a(!1)}});return(0,n.jsx)(u.O,{show:!d,children:(0,n.jsxs)(L.Z,{align:"grow","data-testid":(0,I.C)("project-settings",`${t}-connect`,"button"),disabled:!d,gitType:t,loading:l,onClick:()=>{var e;d&&((null===(e=d[t])||void 0===e?void 0:e.verified)?p():g.open(t))},size:s,width:"100%",children:[(0,n.jsx)("span",{className:q().continueWithText,children:"Continue with"})," ",(0,E.F)(t)]})})}function Y(e){let{repo:t,gitType:i,search:r,renderButton:s,repoSkeletonWidthPercentage:l=100}=e,{data:a,error:c}=(0,F.ZP)(null==t?void 0:t.url),d=(0,M.R)(null==t?void 0:t.updatedAt),h=(0,o.useMemo)(()=>t?r?t.name.split(r).reduce((e,t,i)=>(0!==i&&e.push((0,n.jsx)("span",{className:q().suggestionHighlight,children:r},e.length)),t&&e.push((0,n.jsx)("span",{children:t},e.length)),e),[]):[(0,n.jsx)("span",{children:t.name},t.name)]:null,[t,r]),p=!t,g=(0,o.useMemo)(()=>s(t,i),[t,i,s]);return(0,n.jsx)(y.JH,{actions:(0,n.jsx)(v.Z,{row:!0,children:g}),"data-testid":(0,I.C)("project-settings","repo-suggestion"),placeholder:p,thumbnail:(0,n.jsx)(y.bL,{size:24,children:(null==a?void 0:a.framework.logo)?(0,n.jsx)("img",{alt:a.framework.name,className:$().frameworkIcon,height:"24",src:a.framework.logo,width:"24"}):c?(0,n.jsx)(b.Z,{gitType:i,height:24,width:24}):(0,n.jsx)(u.O,{rounded:!0,width:24})}),children:(0,n.jsx)(y.Sn,{children:t?(0,n.jsxs)(v.Z,{gap:.25,noWrap:!0,row:!0,vcenter:!0,children:[(0,n.jsx)(v.Z,{flex:"0 1 auto",children:(0,n.jsx)("span",{className:(0,_.W)(q().repoTitle,"geist-ellipsis"),title:null==t?void 0:t.name,children:h})}),(null==t?void 0:t.private)?(0,n.jsx)(v.Z,{Component:"span",flex:"0 0 auto",title:"Private Git Repository",vcenter:!0,children:(0,n.jsx)(w.H,{color:"var(--accents-5)",size:14})}):null,(0,n.jsx)(v.Z,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,n.jsx)("span",{className:q().repoDescription,children:"\xb7"})}),(0,n.jsx)(v.Z,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,n.jsx)("span",{className:q().repoDescription,children:d})})]}):(0,n.jsx)(u.O,{height:20,width:`${l}%`})})})}function K(e){let{search:t,gitAccount:i,configureGithubInstallation:r}=e,s=null==i?void 0:i.provider,{data:l}=(0,O.ZP)({provider:s}),a=(0,o.useMemo)(()=>{var e;return i&&l?null==l?void 0:null===(e=l.find(e=>e.id===(null==i?void 0:i.namespaceId)))||void 0===e?void 0:e.name:null},[l,i]);return(0,n.jsx)(v.Z,{center:!0,className:(0,_.W)(q().selectProvider,q().emptyResult),children:(0,n.jsxs)(v.Z,{flex:"0 0 auto",gap:0,children:[(0,n.jsxs)(Z.ZP,{center:!0,noMargin:!0,preset:"body-2",weight:500,children:["No ",t?"Results":"Git Repositories"," Found"]}),(0,n.jsx)(f.L,{y:.25}),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)",wordBreak:"break-word"},children:(0,n.jsxs)(v.Z,{center:!0,inline:!0,row:!0,children:["Your search ",t?`for "${t}"`:null," ",i&&a?(0,n.jsxs)(n.Fragment,{children:["in"," ",(0,n.jsxs)(v.Z,{center:!0,flex:"0 0 auto",inline:!0,noWrap:!0,row:!0,children:[(0,n.jsx)(f.L,{x:.2}),(0,n.jsx)(v.Z,{flex:"0 0 auto",children:(0,n.jsx)(b.Z,{gitType:i.provider})}),(0,n.jsx)(f.L,{x:.2}),(0,n.jsx)(Z.ZP,{className:"geist-ellipsis",span:!0,weight:500,children:a}),(0,n.jsx)(f.L,{x:.2})]})]}):null," ","did not return any results."]})}),(0,n.jsx)(f.L,{y:.25})]}):null,r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Make sure to grant Vercel access to the Git repositories you’d like to import."}),(0,n.jsx)(f.L,{y:1}),(0,n.jsx)(L.Z,{gitType:"github",loading:!1,onClick:r,children:"Configure GitHub App"})]}):(0,n.jsx)(Z.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Try selecting a different Git account or organization on the top left."})]})})}function J(){return(0,n.jsx)(v.Z,{center:!0,className:(0,_.W)(q().selectProvider,q().emptyResult),children:(0,n.jsxs)(v.Z,{flex:"0 0 auto",gap:0,children:[(0,n.jsx)(Z.ZP,{center:!0,noMargin:!0,preset:"body-2",weight:500,children:"You're Almost There"}),(0,n.jsx)(f.L,{y:.25}),(0,n.jsx)(Z.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Select a GitHub account or organization on the top left to see your Git repositories."})]})})}function X(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.L,{y:.5}),(0,n.jsxs)(v.Z,{center:!0,className:q().loadingResult,halfGap:!0,row:!0,children:[(0,n.jsx)(f.L,{expand:!0}),(0,n.jsx)(v.Z,{flex:"0 0 auto",children:(0,n.jsx)(S.$,{})}),(0,n.jsx)(v.Z,{flex:"0 0 auto",children:(0,n.jsx)(Z.ZP,{center:!0,preset:"body-2",style:{color:"var(--accents-5)"},children:"Loading results..."})}),(0,n.jsx)(f.L,{expand:!0})]})]})}function Q(e){let{repos:t,revalidateRepos:i,search:r,debouncedSearch:s,gitAccount:l,dispatch:a,renderButton:c,usePreferredGitAccount:d,small:h,onChangeGitSelector:p}=e,g=null==l?void 0:l.provider,{data:m,mutate:j}=(0,O.ZP)({provider:g}),[y,w]=(0,o.useState)(!1),S=(0,o.useCallback)(async e=>{var t;let{installationId:n}=e,r=await j(),s=Array.isArray(r)&&r.length>0&&((null===(t=r.find(e=>e.installationId===n))||void 0===t?void 0:t.id)||r[0].id)||null;a({type:"SET_GIT_NAMESPACE",namespaceId:s}),d&&ei({provider:"github",namespaceId:s}),w(!0),await i(),w(!1)},[i,a,j,d]),{open:L}=(0,z.Z)({onSuccess:S}),N=(0,o.useMemo)(()=>{if("github"===g&&(null==m?void 0:m.length)){let e=null==m?void 0:m.find(e=>Number(e.id)===Number(null==l?void 0:l.namespaceId));if(null==e?void 0:e.isAccessRestricted)return L}},[g,L,m,l]),A=(null==l?void 0:l.provider)==="github"&&!l.namespaceId,E=(0,o.useMemo)(()=>{if(r!==s)return{ui:(0,n.jsx)(X,{}),suggestionListBorder:!0};if(A)return{ui:(0,n.jsx)(J,{}),suggestionListBorder:!1};if(!t||!m||y)return null===r?{ui:[,,,,,].fill(1).map((e,t)=>{let i=60+Math.floor(30*Math.sin(56130*t+153));return(0,n.jsx)(Y,{renderButton:c,repoSkeletonWidthPercentage:i},t)}),suggestionListBorder:!1}:{ui:(0,n.jsx)(X,{}),suggestionListBorder:!0};if(0===t.length)return null===r?{ui:(0,n.jsx)(K,{configureGithubInstallation:N,gitAccount:l}),suggestionListBorder:!1}:{ui:(0,n.jsx)(K,{configureGithubInstallation:N,gitAccount:l,search:s}),suggestionListBorder:!1};let e=!1;return(null==l?void 0:l.provider)==="github"?e=t.length<5&&!!N:((null==l?void 0:l.provider)==="gitlab"||(null==l?void 0:l.provider)==="bitbucket")&&(e=t.length<5),{ui:(0,n.jsxs)(n.Fragment,{children:[t.slice(0,5).map(e=>(0,n.jsx)(Y,{gitType:null==l?void 0:l.provider,renderButton:c,repo:e,search:s},e.id)),e?(0,n.jsxs)(Z.ZP,{preset:"body-2",style:{color:"var(--accents-6)",textAlign:"left"},children:["Missing Git repository?"," ",(null==l?void 0:l.provider)==="github"?(0,n.jsx)(x.r,{onClick:N,variant:"highlight",children:"Adjust GitHub App Permissions →"}):(0,n.jsx)(x.r,{external:!0,href:`docs/concepts/git/vercel-for-${null==l?void 0:l.provider}#missing-git-repository`,variant:"highlight",children:"Learn More"})]}):null]}),suggestionListBorder:t.length<5}},[t,r,l,s,c,m,N,y,A]),G=(0,o.useCallback)(e=>{"select-different-git-provider"===e?(a({type:"SET_GIT_ACCOUNT",gitAccount:null}),d&&ei({provider:null,namespaceId:null})):"install-github"===e?L():(a({type:"SET_GIT_NAMESPACE",namespaceId:e}),d&&ei({namespaceId:e})),null==p||p()},[a,L,d,p]),H=m&&[...m.map(e=>({value:String(e.id),label:e.name||"",prefix:(0,n.jsx)(b.Z,{gitType:g})})),..."github"===g?[{value:"install-github",label:"Add GitHub Account",prefix:(0,n.jsx)(C.v,{size:14})}]:[],{value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,n.jsx)(T.a,{size:14})}];return(0,n.jsxs)(v.Z,{className:(0,_.W)(q().suggestionList,{[q().suggestionListBorder]:!h&&E.suggestionListBorder}),gap:!1,children:[(0,n.jsx)(v.Z,{flex:"0 0 auto",children:(0,n.jsxs)(v.Z,{className:q().suggestionDescription,direction:["column","row","row"],gap:!1,inline:!0,noWrap:!0,children:[(0,n.jsx)(v.Z,{flex:"50%",children:(0,n.jsx)(u.O,{show:void 0===l||!Array.isArray(m),children:(0,n.jsxs)(k.Z,{clearable:!1,"data-git-namespace-combobox":!0,"data-testid":(0,I.C)("project-settings","repository-combobox"),onChange:G,placeholder:"Select a Git Namespace",value:(null==l?void 0:l.namespaceId)?String(l.namespaceId):null,children:[(0,n.jsx)(k.Z.Input,{"data-git-namespace-combobox-input":!0}),(0,n.jsx)(k.Z.List,{children:null==H?void 0:H.map(e=>(0,n.jsx)(k.Z.Option,{"data-testid":(0,I.C)("project-settings","repository-option"),prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,n.jsx)(f.L,{x:1/3,y:1/3}),(0,n.jsx)(v.Z,{flex:"50%",children:(0,n.jsx)(u.O,{show:!!(!t&&null===r&&!A)||!Array.isArray(m)||y,children:(0,n.jsx)(P.Z,{"data-testid":(0,I.C)("project-settings","repository-search-input"),disabled:!!((null==t?void 0:t.length)===0&&null===r),onChange:e=>a({type:"SET_SEARCH",search:e.target.value}),placeholder:"Search...",value:r??"",width:"100%"})})})]})}),(0,n.jsx)(f.L,{y:2/3}),(0,n.jsx)(v.Z,{flex:"1 0 auto",children:(0,n.jsx)(v.Z,{className:q().repoList,gap:!1,children:E.ui})})]})}function ee(e){let{dispatch:t,small:i,usePreferredGitAccount:r}=e;return i?(0,n.jsxs)("div",{className:(0,_.W)(q().selectProvider,q().small),children:[["github","gitlab","bitbucket"].map(e=>(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)("span",{className:q().providerBtn,children:(0,n.jsx)(V,{dispatch:t,gitType:e,usePreferredGitAccount:r})}),(0,n.jsx)("span",{className:(0,_.W)(q().providerBtn,q().providerBtnMobile),children:(0,n.jsx)(V,{dispatch:t,gitType:e,size:"small",usePreferredGitAccount:r})}),(0,n.jsx)(f.L,{x:.5,y:.25})]},e)),(0,n.jsx)(f.L,{expand:!0,y:.5}),(0,n.jsx)(Z.ZP,{span:!0,type:"success",weight:500,children:(0,n.jsx)(x.r,{"data-testid":(0,I.C)("project-settings","git","manage-login-connections-button"),href:"/account/login-connections",tab:!0,variant:"highlight",children:"Manage Login Connections →"})})]}):(0,n.jsx)(v.Z,{center:!0,className:q().selectProvider,children:(0,n.jsxs)(v.Z,{flex:"0 0 auto",children:[(0,n.jsx)(Z.ZP,{center:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Select a Git provider to import an existing project from a Git Repository."}),(0,n.jsx)(f.L,{}),(0,n.jsx)(v.Z,{direction:"column",gap:1/3,children:["github","gitlab","bitbucket"].map(e=>(0,n.jsx)(v.Z,{children:(0,n.jsx)(V,{dispatch:t,gitType:e,usePreferredGitAccount:r})},e))}),(0,n.jsx)(f.L,{}),(0,n.jsx)(Z.ZP,{center:!0,preset:"body-2",type:"success",weight:500,children:(0,n.jsx)(x.r,{href:"/account/login-connections",tab:!0,children:"Manage Login Connections →"})})]})})}function et(e,t){switch(t.type){case"INIT_GIT_ACCOUNT":return{...e,preferredGitAccount:t.preferredGitAccount};case"SET_SEARCH":return{...e,search:t.search};case"SET_DEBOUNCED_SEARCH":return{...e,debouncedSearch:t.debouncedSearch,ts:e.debouncedSearch!==e.search?Date.now():e.ts};case"SET_GIT_ACCOUNT":return{...e,search:null,localGitAccount:t.gitAccount};case"SET_GIT_NAMESPACE":let i=e.localGitAccount??e.preferredGitAccount;return i?{...e,search:null,localGitAccount:{...i,namespaceId:t.namespaceId}}:e;default:return e}}let ei=async e=>{let{namespaceId:t,provider:i}=e;await (0,G.I)(A.zh,{method:"PATCH",body:JSON.stringify({importFlowGitNamespaceId:t,importFlowGitProvider:i})})};function en(e){let{renderButton:t,small:i,usePreferredGitAccount:r,onChangeGitSelector:s}=e,{user:l}=(0,D.a)(),[{search:a,debouncedSearch:c,localGitAccount:d,preferredGitAccount:u,ts:h},p]=(0,o.useReducer)(et,{search:null,debouncedSearch:null,ts:Date.now()});(0,o.useEffect)(()=>{let e=setTimeout(()=>p({type:"SET_DEBOUNCED_SEARCH",debouncedSearch:a}),300);return()=>clearTimeout(e)},[a]);let{data:g,mutate:m}=(0,B.Z)({query:c,provider:null==d?void 0:d.provider,namespaceId:null==d?void 0:d.namespaceId,s:h});(0,o.useEffect)(()=>{g&&"error"in g&&"installation_not_found"===g.error.code?(p({type:"SET_GIT_NAMESPACE",namespaceId:null}),r&&ei({namespaceId:null})):g&&r&&p({type:"INIT_GIT_ACCOUNT",preferredGitAccount:"error"in g?null:g.gitAccount})},[g,r]);let x=(0,o.useMemo)(()=>{let e=void 0!==d?d:u,o=r&&void 0===u;return e||o||!l?(0,n.jsx)(Q,{debouncedSearch:c,dispatch:p,gitAccount:e,onChangeGitSelector:s,renderButton:t,repos:g&&"repos"in g?g.repos:void 0,revalidateRepos:m,search:a,small:i,usePreferredGitAccount:r}):l.limited?(0,n.jsx)(N.Z,{small:i}):(0,n.jsx)(ee,{dispatch:p,small:i,usePreferredGitAccount:r})},[g,m,t,a,d,u,c,i,r,s,l]);return(0,n.jsx)("div",{className:(0,_.W)(q().suggestionBox,{[q().small]:i}),children:x})}var er=i(192734),es=i(927628),eo=i(637161),el=i(135635),ea=i(106044),ec=i(745507),ed=i(539142),eu=i(600439),eh=i(306054),ep=i(266113),eg=i(761891),em=i(693147),ex=i(280176),ef=i(691838),ej=i.n(ef),ey=i(184949),eb=i(568841),ev=i(526810),e_=i(331049),ew=i(610029);function eC(e){var t,i;let{project:r,team:s}=e,l=(0,j.e1)(),[a,c]=(0,o.useState)((null===(t=r.gitComments)||void 0===t?void 0:t.onPullRequest)??!0),[d,u]=(0,o.useState)((null===(i=r.gitComments)||void 0===i?void 0:i.onCommit)??!1);return(0,o.useEffect)(()=>{var e,t;c((null===(e=r.gitComments)||void 0===e?void 0:e.onPullRequest)??!0),u((null===(t=r.gitComments)||void 0===t?void 0:t.onCommit)??!1)},[r.gitComments]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eT,{onChange:()=>{let e=!a;c(e),(0,ew.Z)(r.name,null==s?void 0:s.id,{gitComments:{onPullRequest:e,onCommit:d}}).catch(e=>{console.error(e),l.error("Something went wrong updating the Pull Request Comment settings.")}).then(()=>{l.success("Updated the Pull Request Comment setting successfully.")})},title:"Pull Request Comments",tooltipText:"Vercel will comment on pull requests opened against this project.",value:a}),(0,n.jsx)(e_.Z,{margin:0}),(0,n.jsx)(eT,{onChange:()=>{let e=!d;u(e),(0,ew.Z)(r.name,null==s?void 0:s.id,{gitComments:{onPullRequest:a,onCommit:e}}).catch(e=>{console.error(e),l.error("Something went wrong updating the Commit Comment settings.")}).then(()=>{l.success("Updated the Commit Comment setting successfully.")})},title:"Commit Comments",tooltipText:"Vercel will comment on commits deployed to production.",value:d})]})}function eT(e){let{value:t,title:i,tooltipText:r,onChange:s}=e;return(0,n.jsxs)(m.K,{as:"fieldset",direction:"row",gap:2,justify:"space-between",style:{border:"none",padding:0},children:[(0,n.jsxs)(m.K,{align:"center",direction:"row",gap:1,children:[(0,n.jsx)("span",{children:i}),(0,n.jsx)(eb.Z,{style:{display:"inline-flex",verticalAlign:"middle"},text:r,children:(0,n.jsx)(ey.I,{color:"var(--accents-4)",size:14,style:{marginTop:1}})})]}),(0,n.jsx)(ev.Z,{checked:t,onChange:()=>{s()},size:"large",children:(0,n.jsx)(h.x,{color:"gray-800",weight:500,children:t?"Enabled":"Disabled"})})]})}async function eS(e){let{id:t,teamId:i}=e;await (0,G.I)(`${A.AI}/${t}/link${(0,ed.c)({teamId:i,withUserCredentials:1})}`,{method:"DELETE",throwOnHTTPError:!0})}async function eZ(e){let{id:t,teamId:i,type:n,repo:r}=e;await (0,G.I)(`${A.AI}/${t}/link${(0,ed.c)({teamId:i,withUserCredentials:1})}`,{method:"POST",body:JSON.stringify({type:n,repo:r}),throwOnHTTPError:!0})}let ek=a()(()=>i.e(14743).then(i.bind(i,914743)).then(e=>e.UnlinkModal),{loadableGenerated:{webpack:()=>[914743]},ssr:!1});function eP(e){let{repo:t,gitType:i,link:r}=e,[s,l]=(0,o.useState)(!1);return(0,n.jsx)(p.z,{"data-testid":(0,I.C)("project-settings","git-settings-connect"),loading:s,onClick:()=>{if(t&&i){l(!0);try{r(t,i)}finally{l(!1)}}},size:"small",children:"Connect"})}function eL(){var e,t,i,r;let{project:s}=(0,em.U)()??{},{data:l,mutate:a}=(0,es.PY)(s),{data:_,mutate:w}=(0,eo.d)(s),{team:C,isReady:T}=(0,el.t7)(),S=(0,j.e1)(),{can:Z,isLoading:k}=(0,eg.ZP)(),[P,L]=(0,o.useState)(!1),N=!l||!_||!T||k,A=!N&&(null===(e=l.link)||void 0===e?void 0:e.type)&&Object.hasOwn(l.link,"type")?l.link.type:null,G=Z(eg.aU.Delete,eg._z.ProjectLink),H=Z(eg.aU.Create,eg._z.ProjectLink),z=!A&&H||G,B=null==l?void 0:null===(t=l.link)||void 0===t?void 0:t.updatedAt,D=(0,M.R)(B,{justNowLabel:"just now"}),[R,O]=(0,o.useState)(null),F=A&&_&&!("type"in _),U=(0,o.useMemo)(()=>F?"error"in _&&_.error.message?_.error.message:`The ${(0,E.F)(A)} App has lost access.`:"",[F,_,A]),[$,W]=(0,o.useState)(!1),q=()=>{W(!0),L(!0)},V=(0,o.useCallback)(async()=>{try{l&&await eS({id:l.id,teamId:null==C?void 0:C.id}),await a(),await w(),S.success("Disconnected Git Repository successfully.")}catch(e){S.error(e instanceof Error?e.message:"Failed to disconnect Git Repository.")}L(!1)},[l,C,S,w,a]),Y=(0,o.useCallback)(async(e,t)=>{try{if(O(null),!C&&"team"===e.ownerType){O(`Git repositories of ${(0,ep.e)(t)}s can only be connected to projects in Teams on Vercel. Not projects in Personal Accounts.`);return}(null==l?void 0:l.link)&&await eS({id:l.id,teamId:null==C?void 0:C.id});let i=e.namespace+"/"+e.slug;l&&await eZ({id:l.id,teamId:(null==C?void 0:C.id)||null,repo:i,type:t}),await w(),await a(),S.success("Connected Git Repository successfully.")}catch(e){S.error(e instanceof Error?e.message:"Failed to connect Git Repository.")}},[l,C,S,w,a]),K=(0,o.useCallback)((e,t)=>(0,n.jsx)(eP,{gitType:t,link:Y,repo:e}),[Y]),J=null;J=N?(0,n.jsxs)(y.JH,{placeholder:!0,thumbnail:(0,n.jsx)(y.bL,{size:24}),children:[(0,n.jsx)(y.Sn,{description:"",descriptionSkeletonWidth:"20%",height:45,title:"",titleSkeletonWidth:"30%"}),(0,n.jsx)(y.Sn,{right:!0,width:130,children:(0,n.jsxs)(u.O,{children:[(0,n.jsx)(p.z,{className:ej().btn,size:"small",type:"secondary",width:130,children:"Disconnect"}),(0,n.jsx)(p.z,{className:ej().btnMobile,type:"secondary",children:"Disconnect"})]})})]}):A?F?(0,n.jsxs)(y.JH,{thumbnail:(0,n.jsx)(y.bL,{size:24,children:(0,n.jsx)(c.b,{color:"var(--geist-error)",size:24})}),children:[(0,n.jsx)(y.Sn,{description:(0,n.jsxs)("span",{"data-testid":(0,I.C)("project-settings","git-settings-error"),style:{color:"var(--geist-error)"},children:[(0,n.jsx)("b",{children:"Error"}),": ",U]}),title:(0,n.jsxs)(x.r,{className:ej().repoSlug,href:(0,eu.z)({type:(null===(i=l.link)||void 0===i?void 0:i.type)||A,...l.link}),style:{color:"var(--geist-error)"},tab:!0,variant:"primary",children:[(0,n.jsx)("span",{children:(0,ea.c)(l.link,{includeOrg:!0})}),(0,n.jsx)(f.L,{inline:!0,x:.2}),(0,n.jsx)(d.d,{size:16,weight:"bold"})]})}),(0,n.jsx)(y.Sn,{width:278,children:(0,n.jsxs)(v.Z,{gap:0,row:!0,children:[(0,n.jsx)(v.Z,{className:ej().btn,flex:"1",children:(0,n.jsx)(g.Z,{href:"/docs/platform/frequently-asked-questions#lost-git-repository-access",size:"small",tab:!0,type:"secondary",children:"Learn More"})}),(0,n.jsx)(v.Z,{className:ej().btnMobile,flex:"1",children:(0,n.jsx)(g.Z,{href:"/docs/platform/frequently-asked-questions#lost-git-repository-access",tab:!0,type:"secondary",children:"Learn More"})}),(0,n.jsx)(f.L,{x:.5,y:.5}),(0,n.jsx)(v.Z,{className:ej().btn,flex:"1",children:(0,n.jsx)(p.z,{loading:P,onClick:q,size:"small",type:"error",children:"Reconnect"})}),(0,n.jsx)(v.Z,{className:ej().btnMobile,flex:"1",children:(0,n.jsx)(p.z,{loading:P,onClick:q,type:"error",width:"100%",children:"Reconnect"})})]})})]}):(0,n.jsxs)(y.JH,{thumbnail:(0,n.jsx)(y.bL,{size:24,children:(0,n.jsx)(b.Z,{gitType:A,height:24,width:24})}),children:[(0,n.jsx)(y.Sn,{description:(0,n.jsxs)(n.Fragment,{children:["Connected ",D]}),title:(0,n.jsxs)(x.r,{className:ej().repoSlug,href:(0,eu.z)({type:(null===(r=l.link)||void 0===r?void 0:r.type)||A,...l.link}),tab:!0,variant:"primary",children:[(0,n.jsx)("span",{className:"geist-ellipsis",children:(0,ea.c)(_,{includeOrg:!0})}),(0,n.jsx)(f.L,{inline:!0,x:.2}),(0,n.jsx)(d.d,{size:16,weight:"bold"})]})}),(0,n.jsxs)(y.Sn,{"data-testid":(0,I.C)("project-settings","git-settings-disconnect"),right:!0,width:130,children:[(0,n.jsx)(p.z,{className:ej().btn,loading:P,onClick:q,size:"small",type:"secondary",width:130,children:"Disconnect"}),(0,n.jsx)(p.z,{className:ej().btnMobile,loading:P,onClick:q,type:"secondary",children:"Disconnect"})]})]}):(0,n.jsx)(en,{onChangeGitSelector:()=>O(null),renderButton:K,small:!0});let{isReady:X,value:Q}=(0,ex.kd)(),ee=!F&&!N&&!P&&X&&Q;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ek,{isActive:$,onCancel:()=>{W(!1),L(!1)},onContinue:()=>{W(!1),V()}}),(0,n.jsxs)(er.Z,{description:"Seamlessly create Deployments for any commits pushed to your Git repository.",disabled:N||!z,highlightNote:!N&&!z,note:N?(0,n.jsx)(u.O,{boxHeight:32,vcenter:!0,width:200}):z?(0,n.jsxs)(h.x,{lineHeight:32,children:["Learn more about"," ",(0,n.jsxs)(x.r,{external:!0,href:"/docs/git",type:"highlight",children:[ec.c5," for Git"]})]}):(0,n.jsx)(h.x,{lineHeight:32,children:"You need additional permissions to manage your project's connected git repository."}),title:"Connected Git Repository",children:[J,R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.L,{}),(0,n.jsx)(eh.Z,{error:{message:R,link:"/docs/platform/limits#connecting-a-project-to-a-git-repository"}})]}):null,ee?(0,n.jsxs)(m.K,{dir:"column",gap:4,style:{marginTop:"var(--geist-gap)"},children:[(0,n.jsx)(h.x,{color:z?"gray-800":"inherit",children:"Vercel automatically comments to keep you up-to-date."}),(0,n.jsx)(eC,{project:l,team:C})]}):null]})]})}var eN=i(905839),eA=i(842140),eE=i(136566),eI=i(886847),eG=i(763211),eH=i(131555),ez=i(384157),eM=i(818221),eB=i.n(eM);function eD(){var e;let t=(0,r.useRouter)(),i="string"==typeof t.query.project?t.query.project:null,{data:s,mutate:l}=(0,es.PY)(i),{team:a,isReady:c}=(0,el.t7)(),{can:d,isLoading:p}=(0,eg.ZP)(),[g,f]=(0,o.useState)(!1),[y,b]=(0,o.useState)(null),v=d(eg.aU.Update,eg._z.ProjectProductionBranch),_=(0,j.e1)(),w=!s||!c||p,C=!!(null==s?void 0:s.link),T=null==s?void 0:null===(e=s.link)||void 0===e?void 0:e.productionBranch,[S,Z]=(0,o.useState)(T||""),{user:k}=(0,D.a)(),[P,L]=(0,o.useState)(!0),{readyValue:N}=(0,ez._Z)();(0,o.useEffect)(()=>{"string"==typeof T&&Z(T)},[T,Z]),(0,o.useEffect)(()=>{s&&L(s.autoAssignCustomDomains??!0)},[s]);let A=!w&&S.length&&T!==S,E=!w&&(s.autoAssignCustomDomains??!0)!==P,I=w||!A&&!E,G=(0,o.useCallback)(async e=>{e&&"preventDefault"in e&&e.preventDefault(),f(!0),b(null);try{if(A){let e=await eR(s,a,S);_.message(e)}if(E){if(!(null==k?void 0:k.uid))return null;let e=await eO(s,a,k,P);_.message(e)}await l()}catch(e){b((0,eN.SC)(e))}finally{f(!1)}},[s,a,_,S,l,P,k,A,E]);return(0,n.jsxs)(er.Z,{description:(0,n.jsxs)(n.Fragment,{children:["By default, every commit pushed to the ",(0,n.jsx)(eG.Z,{children:"main"})," ","branch will trigger a Production Deployment instead of the usual Preview Deployment. You can switch to a different branch here."]}),disabled:w||!v,highlightNote:!w&&!v,note:w?(0,n.jsx)(u.O,{boxHeight:32,vcenter:!0,width:200}):v?(0,n.jsxs)(h.x,{lineHeight:32,children:["Learn more about"," ",(0,n.jsx)(x.r,{external:!0,href:"/docs/concepts/deployments/git#production-branch",type:"highlight",children:"Production Branch"})]}):(0,n.jsx)(h.x,{lineHeight:32,children:"You need additional permissions to manage your project's production branch."}),onSave:G,saveDisabled:I,saveLoading:g,title:"Production Branch",children:[w?(0,n.jsx)(u.O,{boxHeight:40,height:40,width:300}):C?(0,n.jsx)("form",{onSubmit:G,children:(0,n.jsxs)("div",{style:{maxWidth:300,marginBottom:"1em"},children:[(0,n.jsx)(eE.Z,{id:"branch-name",value:"Branch Name",withInput:!0}),(0,n.jsx)(eH.I,{id:"branch-name",maxLength:250,onChange:e=>Z(e.target.value),placeholder:"main",type:y?"error":void 0,value:S,width:"100%"})]})}):(0,n.jsxs)("div",{className:eB().zkztrd,children:["This Project is not connected to a Git repository. To be able to set up a Production Branch, you need to set up a new connection in the"," ",'"Connected Git Repository" section above.']}),N?w?null:(0,n.jsxs)(m.K,{align:"start",direction:"column",justify:"space-between",style:{padding:"var(--geist-space-4x)",margin:"var(--geist-space-1x)",borderRadius:"var(--geist-radius)",border:"1px solid var(--accents-2)"},children:[(0,n.jsxs)(m.K,{align:"center",direction:"row",gap:4,justify:"space-between",style:{width:"100%"},children:[(0,n.jsxs)(m.K,{children:[(0,n.jsx)(h.x,{weight:700,children:"Auto-assign Custom Production Domains"}),(0,n.jsxs)(h.x,{children:["Automatically assign custom production domains after each Production deployment via merge to the production branch or Vercel CLI deploy with"," ",(0,n.jsx)(h.x,{as:"span",monospace:!0,children:"--prod"}),"."]})]}),(0,n.jsx)(ev.Z,{checked:P,onChange:()=>{L(!P)},size:"large"})]}),P?null:(0,n.jsx)(eI.Z,{fill:!0,label:!1,style:{marginTop:"var(--geist-space-4x)",width:"100%"},type:"success",children:(0,n.jsxs)(m.K,{align:"start",direction:"row",gap:4,children:[(0,n.jsx)(eA.k,{color:"inherit",fill:!1,size:20,style:{flexShrink:0}}),(0,n.jsx)(m.K,{align:"start",children:(0,n.jsxs)(h.x,{as:"p",color:"inherit",children:["Production deployments will need to be manually promoted",(0,n.jsx)("br",{}),"Learn more about"," ",(0,n.jsx)(x.r,{external:!0,href:"/docs/concepts/deployments/managing-deployments#promote-deployment-to-production",children:(0,n.jsx)(h.x,{as:"span",color:"inherit",weight:600,children:"promoting staged deployments"})})]})})]})})]}):null,y?(0,n.jsx)("div",{className:eB().mgpmxj,children:(0,n.jsx)(eh.Z,{error:y})}):null]})}async function eR(e,t,i){return await (0,G.I)(`${A.AI}/${e.id}/branch${t?`?teamId=${t.id}`:""}`,{method:"PATCH",body:JSON.stringify({branch:i}),throwOnHTTPError:!0}),"Updated Production Branch successfully."}async function eO(e,t,i,n){let r=`/v9/projects/${encodeURIComponent(e.id)}${(0,ed.c)({teamId:null==t?void 0:t.id})}`;return await (0,G.I)(r,{method:"PATCH",body:{autoAssignCustomDomains:n,autoAssignCustomDomainsUpdatedBy:i.uid}}),`${n?"Enabled":"Disabled"} Auto-assign Custom Production Domains successfully.`}var eF=i(249840),eU=i(588875);function e$(e){let[t,i]=(0,o.useState)(""),[r,s]=(0,o.useState)(null),l=(0,o.useRef)(null);return(0,o.useEffect)(()=>{e.active&&setTimeout(()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.focus()},0)},[e.active,l]),(0,n.jsx)(eU.Modal,{active:e.active,onClickOutside:e.onCancel,width:500,children:(0,n.jsxs)("form",{onSubmit:i=>{if(i.preventDefault(),e.name!==t.trim())return s(`The text you entered did not match "${e.name}".`);e.onConfirm()},children:[(0,n.jsxs)(eU.Body,{children:[(0,n.jsx)(eU.Title,{children:"Git LFS"}),(0,n.jsx)(f.L,{}),(0,n.jsx)(eI.Z,{fill:!0,label:"Warning",type:"error",variant:"contrast",children:"Disabling Git LFS might cause your builds to fail or to create broken deployments. Make sure you are not relying on Git LFS objects during your builds before you disable it."}),(0,n.jsx)(f.L,{}),(0,n.jsxs)("label",{children:[(0,n.jsxs)(h.x,{children:["Enter ",(0,n.jsx)("b",{style:{overflowWrap:"anywhere"},children:e.name})," to continue:"]}),(0,n.jsx)(f.L,{y:1/4}),(0,n.jsx)(eH.I,{"aria-label":"Confirmation Text",error:r,onChange:e=>{i(e.target.value),s(null)},ref:l,value:t})]})]}),(0,n.jsxs)(eU.Actions,{children:[(0,n.jsx)(eU.Action,{onClick:e.onCancel,children:"Cancel"}),(0,n.jsx)(eU.Action,{buttonType:"submit",loading:e.loading,type:"secondary",children:"Continue"})]})]})})}function eW(){var e;let{project:t}=(0,em.U)()||{},{data:i,mutate:r}=(0,es.PY)(String(t),{apiVersion:"v9"}),{data:s}=(0,D.a)(),{team:l,isReady:a}=(0,el.t7)(),{can:c,isLoading:d}=(0,eg.ZP)(),p=(null==i?void 0:i.gitLFS)??!1,[g,m,y]=(0,eF.Z)(p),[b,v]=(0,o.useState)(!1),[_,w]=(0,o.useState)(!1),[C,T]=(0,o.useState)(null),S=(0,j.e1)(),Z=!i||!a||!s||d,k=c(eg.aU.Update,eg._z.Project),P=!Z&&k&&g!==p;async function L(){if(t){w(!0),v(!1);try{T(null),await (0,ew.Z)(t,null==l?void 0:l.id,{gitLFS:g}),S.success("Updated Git LFS setting successfully."),y(),await r()}catch(e){T((0,eN.VK)(e))}w(!1)}}return(0,n.jsx)(er.Z,{description:(0,n.jsxs)(n.Fragment,{children:[" ","Git LFS replaces large files such as audio samples, videos, datasets, and graphics with text pointers inside Git, while storing the file contents on a remote server like GitHub.com or GitHub Enterprise."]}),disabled:Z||!k,error:C,highlightNote:!Z&&!k,note:Z?(0,n.jsx)(u.O,{height:32,width:200}):k?(0,n.jsxs)(h.x,{children:["Learn more about"," ",(0,n.jsx)(x.r,{external:!0,href:"/docs/concepts/projects/overview#git-large-file-storage-lfs",type:"highlight",children:"Git LFS"})]}):(0,n.jsx)(h.x,{lineHeight:32,children:"You need additional permissions to manage your project's LFS settings."}),onSave:g?L:()=>v(!0),saveDisabled:!P,saveLoading:_,title:"Git Large File Storage (LFS)",type:"default",children:Z?(0,n.jsx)(u.O,{height:30,width:140}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{cursor:"pointer"},children:[(0,n.jsx)(ev.Z,{checked:g,onChange:()=>m(e=>!e),size:"large"}),(0,n.jsx)(f.L,{inline:!0,x:.5}),(0,n.jsx)(h.x,{as:"span",weight:500,children:g?"Enabled":"Disabled"})]}),(0,n.jsx)(e$,{active:b,loading:Z,name:[(null==l?void 0:l.slug)??(null===(e=s.user)||void 0===e?void 0:e.username),i.name].join("/"),onCancel:()=>{v(!1)},onConfirm:L},String(b))]})})}var eq=i(57452),eV=i(241967),eY=i(528127),eK=i(261409),eJ=i(952289),eX=i(608034),eQ=i(657496),e0=i(838741),e1=i(688891),e2=i.n(e1);let e3="Automatic",e6="Custom",e8=[{label:e3,value:""},{label:"Only build production",value:'if [ "$VERCEL_ENV" == "production" ]; then exit 1; else exit 0; fi'},{label:"Only build preview",value:'if [ "$VERCEL_ENV" == "preview" ]; then exit 1; else exit 0; fi'},{label:"Only build if there are changes",value:"git diff HEAD^ HEAD --quiet"},{label:"Only build if there are changes in a folder",value:"git diff HEAD^ HEAD --quiet ./path/to/folder",selection:"./path/to/folder"},{label:"Only build Turborepo app if there are changes",value:"npx turbo-ignore"},{label:"Don't build anything",value:"exit 0"},{label:"Run my Bash script",value:"bash your-script-name.sh",selection:"your-script-name.sh"},{label:"Run my Node script",value:"node your-script-name.js",selection:"your-script-name.js"},{label:e6,value:'echo "Hello World"',selection:'echo "Hello World"'}];function e4(e){let{saving:t,value:i,setCommandForIgnoringBuildStep:r,disableSaveButton:s}=e,l=(0,o.useRef)(null),[a,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(i),h=(0,o.useMemo)(()=>{if(""===i&&""!==d&&c(!0),s(!1),void 0===i)return null;if(""===i&&!a&&""===d)return{label:e3,value:""};let e=e8.filter(e=>void 0===e.selection).find(e=>e.value===i);if(void 0!==e&&!a)return e;let t=e8.filter(e=>void 0!==e.selection).find(e=>{let t=e.value.indexOf(e.selection),n=e.value.slice(0,t);return i.startsWith(n)});return void 0!==t?(t.value===i&&s(!0),t):{label:e6,value:i}},[s,a,i,d]);return(0,o.useEffect)(()=>{(null==h?void 0:h.label)===e6?c(!0):c(!1)},[null==h?void 0:h.label]),(0,o.useEffect)(()=>{u(i)},[i]),(0,n.jsxs)(m.K,{align:"flex-end",className:e2().inputContainer,direction:{sm:"column",md:"row"},gap:4,children:[(0,n.jsx)(eK.P,{className:e2().select,label:"Behavior",onChange:e=>{let t=e8.find(t=>t.label===e.target.value);if(e.target.value===e3){r(""),c(!1),u("");return}if(void 0!==t&&(r(t.value),t.label!==e6&&c(!1),l.current&&t.selection)){let e=RegExp(t.selection,"i"),i=e.exec(t.value);null===i||eJ.tq||setTimeout(()=>{l.current&&void 0!==t.selection&&(l.current.focus(),l.current.setSelectionRange(i.index,i.index+t.selection.length))},0)}},value:null==h?void 0:h.label,children:e8.map(e=>(0,n.jsx)("option",{value:e.label,children:e.label},e.label))}),(0,n.jsx)("div",{className:(0,_.W)({[e2().hidden]:(null==h?void 0:h.label)===e3},e2().customCommand),children:(0,n.jsx)(eY.I,{disabled:t||(null==h?void 0:h.selection)===void 0&&(null==h?void 0:h.label)!==e3,id:"ignored-build-command",label:"Command",onChange:e=>r(e.target.value),placeholder:"e.g., git diff --quiet HEAD^ HEAD ./",ref:l,value:i||"",width:"100%"})})]})}function e5(){var e;let{project:t}=(0,em.U)()||{},{team:i,isReady:r}=(0,el.t7)(),{data:s,mutate:l,isLoading:a}=(0,es.PY)(t),{isLoading:c,mutate:d}=(0,es.W5)(t),{data:p,isLoading:g}=(0,eX.s)(null==s?void 0:s.id),{data:f,isLoading:y}=(0,eQ.ZP)(null==p?void 0:p.deployment.id),{can:b,isLoading:v}=(0,eg.ZP)(),w=(null==s?void 0:s.commandForIgnoringBuildStep)||"",[C,T]=(0,o.useState)(""),[S,Z]=(0,o.useState)(!1),[k,P]=(0,o.useState)(null),[L,N]=(0,o.useState)(!1),A=(0,j.e1)();(0,o.useEffect)(()=>{s&&T(w)},[s,w]);let E=!r||!s||v||a||c||g||y,I=b(eg.aU.Update,eg._z.Project),G=!E&&t&&I&&w!==C&&!L,H=(0,o.useMemo)(()=>{var e;let t=(null==s?void 0:s.commandForIgnoringBuildStep)||"",i=(null==f?void 0:null===(e=f.projectSettings)||void 0===e?void 0:e.commandForIgnoringBuildStep)||"";return t!==i},[f,s]),z=(0,o.useMemo)(()=>(null==f?void 0:f.url)?(0,n.jsx)(x.r,{href:f.inspectorUrl,variant:"highlight",children:f.url}):null,[f]);return(0,n.jsx)(er.Z,{description:(0,n.jsxs)(n.Fragment,{children:["When a commit is pushed to the Git repository that is connected with your Project, its SHA will determine if a new Build has to be issued. If the SHA was deployed before, no new Build will be issued.",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"You can customize this behavior with a command that exits with code 1 (new Build needed) or code 0."]}),disabled:E||!I,error:k,highlightNote:!E&&!I,note:E?(0,n.jsx)(u.O,{boxHeight:32,vcenter:!0,width:200}):I?(0,n.jsxs)(h.x,{lineHeight:32,children:["Learn more about"," ",(0,n.jsx)(x.r,{external:!0,href:"/docs/concepts/projects/overview#ignored-build-step",tab:!0,type:"highlight",children:"Ignored Build Step"})]}):(0,n.jsx)(h.x,{lineHeight:32,children:"You need additional permissions to manage your project's ignore build step."}),onSave:async()=>{if(void 0!==t){Z(!0);try{P(null),await (0,ew.Z)(t,null==i?void 0:i.id,{commandForIgnoringBuildStep:C}),A.success("Updated Ignore Builds successfully."),await l(),await d()}catch(e){P(e.message)}Z(!1)}},saveDisabled:!G,saveLoading:S,title:"Ignored Build Step",children:(0,n.jsx)("div",{className:(0,_.W)({[e2().ignoreCommandFieldsetContent]:H}),children:E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.O,{boxHeight:36,height:24,width:100}),(0,n.jsx)(u.O,{height:40,width:"100%"})]}):H?(0,n.jsxs)(m.K,{className:e2().multipleDeploymentSettingStack,gap:3,children:[(0,n.jsxs)(m.K,{align:"center",direction:"row",gap:1,children:[(0,n.jsx)(eV.u,{className:`${e2().warningMessageIcon} geist-hide-on-mobile`}),(0,n.jsx)(h.x,{className:e2().warningMessageMainText,weight:600,children:"Configuration Settings in the current Production deployment differ from your current Project Settings."})]}),(0,n.jsx)(e0.Lt,{deploymentLink:z,title:"Production Overrides",children:(0,n.jsx)(eY.I,{disabled:!0,id:"ignored-build-step-command",label:"Command",value:(null==f?void 0:null===(e=f.projectSettings)||void 0===e?void 0:e.commandForIgnoringBuildStep)||"",width:"100%"})}),(0,n.jsx)(e0.Lt,{title:"Project Settings",children:(0,n.jsx)(e4,{disableSaveButton:N,saving:S,setCommandForIgnoringBuildStep:T,value:C})})]}):(0,n.jsx)(e4,{disableSaveButton:N,saving:S,setCommandForIgnoringBuildStep:T,value:C})})})}var e9=(0,i(897831).Z)(function(){let e=(0,r.useRouter)(),{project:t}=e.query;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.G,{title:`${t||""} – Git`,titlePostfix:!0}),(0,n.jsx)(eL,{}),(0,n.jsx)(eD,{}),(0,n.jsx)(eW,{}),(0,n.jsx)(eq.Z,{}),(0,n.jsx)(e5,{})]})})},801318:function(e,t,i){"use strict";i.d(t,{HP:function(){return c},ZP:function(){return d}});var n=i(566855),r=i(611648),s=i(539142),o=i(495142),l=i(609230);async function a(e){return(0,o.I)(e,{throwOnHTTPError:!0})}function c(e){return`${r.Ms}/detect-framework${(0,s.c)({url:e})}`}function d(e){let{user:t}=(0,l.a)();return(0,n.Z)(()=>t&&!t.limited&&e?c(e):null,a)}},637161:function(e,t,i){"use strict";i.d(t,{d:function(){return a}});var n=i(353729),r=i(495142),s=i(611648),o=i(539142),l=i(135635);function a(e){let{config:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:i,team:a}=(0,l.t7)();return(0,n.ZP)(i&&e?`${(0,s.nv)(e)}${(0,o.c)({teamId:null==a?void 0:a.id})}`:null,r.I,t)}},813348:function(e,t,i){"use strict";i.d(t,{C:function(){return r}});var n=i(923390);let r=(0,n.H)('<path d="M6 17C4.89543 17 4 16.1046 4 15V5C4 3.89543 4.89543 3 6 3H13C13.7403 3 14.3866 3.4022 14.7324 4M11 21H18C19.1046 21 20 20.1046 20 19V9C20 7.89543 19.1046 7 18 7H11C9.89543 7 9 7.89543 9 9V19C9 20.1046 9.89543 21 11 21Z"/>')},378853:function(e,t,i){"use strict";i.d(t,{X:function(){return r}});var n=i(923390);let r=(0,n.H)('<path d="M6 3v12"/><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M18 9a9 9 0 01-9 9"/>')},572009:function(e){e.exports={betaBadge:"beta-badge_betaBadge__nn52_",betaBadgeMuted:"beta-badge_betaBadgeMuted__VXlGg",feedbackButton:"beta-badge_feedbackButton__Q8_1M"}},691838:function(e){e.exports={btnMobile:"connected-git-repository_btnMobile__6uqHl",repoSlug:"connected-git-repository_repoSlug__CIOcv",btn:"connected-git-repository_btn__foaIZ"}},818221:function(e){e.exports={zkztrd:"production-branch_zkztrd__A5lmg",mgpmxj:"production-branch_mgpmxj__Qakfl"}},137327:function(e){e.exports={suggestionBox:"select-git-repository_suggestionBox__31f0C",small:"select-git-repository_small__URQCG",suggestionList:"select-git-repository_suggestionList__52IG3",suggestionListBorder:"select-git-repository_suggestionListBorder__qlKR3",suggestionDescription:"select-git-repository_suggestionDescription__X5JBf",suggestionHighlight:"select-git-repository_suggestionHighlight__214pK",repoTitle:"select-git-repository_repoTitle__rh3YU",repoDescription:"select-git-repository_repoDescription__b2lpU",selectProvider:"select-git-repository_selectProvider__p9kyg",gitPill:"select-git-repository_gitPill__IdLRh",continueWithText:"select-git-repository_continueWithText__2Iynj",providerBtnMobile:"select-git-repository_providerBtnMobile__29USe",emptyResult:"select-git-repository_emptyResult__CDO6w",loadingResult:"select-git-repository_loadingResult__W3IL_",repoList:"select-git-repository_repoList__wQVEj",providerBtn:"select-git-repository_providerBtn__JkOjn"}},348126:function(e){e.exports={pre:"code_pre__XGz__",lite:"code_lite__o9_1l",code:"code_code__U8dqF","no-wrap":"code_no-wrap__26R1l",disabled:"code_disabled__wbvte"}},549301:function(e){e.exports={pre:"syntax-theme_pre__gn2yG",code:"syntax-theme_code__dI_Fb",lineNumber:"syntax-theme_lineNumber__QiymF",row:"syntax-theme_row__ieAT6"}},786995:function(e,t,i){e.exports=i(22592)},22592:function(e,t,i){var n=i(301664);t.operation=function(e){var i=t.timeouts(e);return new n(i,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var i in e)t[i]=e[i];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var n=[],r=0;r<t.retries;r++)n.push(this.createTimeout(r,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(r,t)),n.sort(function(e,t){return e-t}),n},t.createTimeout=function(e,t){return Math.min(Math.round((t.randomize?Math.random()+1:1)*t.minTimeout*Math.pow(t.factor,e)),t.maxTimeout)},t.wrap=function(e,i,n){if(i instanceof Array&&(n=i,i=null),!n)for(var r in n=[],e)"function"==typeof e[r]&&n.push(r);for(var s=0;s<n.length;s++){var o=n[s],l=e[o];e[o]=(function(n){var r=t.operation(i),s=Array.prototype.slice.call(arguments,1),o=s.pop();s.push(function(e){r.retry(e)||(e&&(arguments[0]=r.mainError()),o.apply(this,arguments))}),r.attempt(function(){n.apply(e,s)})}).bind(e,l),e[o].options=i}}},301664:function(e){function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(void 0===i){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),i=this._timeouts.shift()}var n=this,r=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},i);return this._options.unref&&r.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,i=0,n=0;n<this._errors.length;n++){var r=this._errors[n],s=r.message,o=(e[s]||0)+1;e[s]=o,o>=i&&(t=r,i=o)}return t}}},function(e){e.O(0,[4299,2459,24148,98586,85394,38419,59085,49162,81797,48715,10599,97831,76108,49774,92888,40179],function(){return e(e.s=710193)}),_N_E=e.O()}]);