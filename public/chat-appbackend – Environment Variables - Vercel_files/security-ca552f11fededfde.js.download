(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8674],{48008:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[teamSlug]/[project]/settings/security",function(){return n(494568)}])},99703:function(e,t,n){"use strict";var r=n(397458),i=n(496952),o=n(832191),s=n(14517),l=n(572009),a=n.n(l);t.Z=function(e){let{feedback:t,muted:n,size:l}=e;return(0,r.jsxs)("div",{className:a().betaBadge,children:[(0,r.jsx)(i.C,{className:(0,s.W)(n?a().betaBadgeMuted:null),size:l,variant:n?"gray-subtle":"pink",children:"Beta"}),t?(0,r.jsx)(o.z,{className:a().feedbackButton,onClick:()=>{document.dispatchEvent(new Event("show-feedback"))},size:"small",type:"tertiary",children:"Provide feedback"}):null]})}},192734:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(397458),i=n(904414),o=n.n(i);n(652983);var s=n(68839),l=n(832191),a=n(607974),d=n(135205),c=n(684624),u=n(99703);function h(e){let{title:t,description:n,note:i,error:h,type:x,disabled:p=!1,disabledForBilling:j,onSave:g=null,saveLoading:f=!1,saveDisabled:v=!1,highlightNote:m=!1,beta:y=!1,action:b=null,className:k,children:w,headerNote:C}=e,L=(0,a.B)(p);return(0,r.jsxs)("div",{className:"jsx-20df583c4acadbf9 "+(k||""),children:[(0,r.jsxs)(d.Fieldset,{"data-testid":(0,c.C)("project-settings",t),disabled:L&&void 0===j,type:L||j||"error"!==x?"default":"error",children:[(0,r.jsxs)(d.Content,{disabled:j,children:[(0,r.jsx)(d.Title,{children:(0,r.jsxs)(s.K,{direction:"row",gap:3,style:{flexWrap:"wrap"},children:[(0,r.jsx)(r.Fragment,{children:t}),y?(0,r.jsx)(u.Z,{muted:j}):null,(0,r.jsx)(r.Fragment,{children:C})]})}),(0,r.jsx)(d.Subtitle,{children:n}),w]}),(0,r.jsxs)(d.Footer,{disabled:!1,highlight:j||m,children:[(0,r.jsx)(d.Footer.Status,{children:h?(0,r.jsx)(d.ErrorText,{children:h instanceof Error?h.message:h}):i||null}),!L&&(g||b)?(0,r.jsxs)(d.Footer.Actions,{children:[g?(0,r.jsx)(l.z,{"data-testid":(0,c.C)("project-settings","save"),disabled:L||v,loading:f,onClick:g,size:"small",children:"Save"}):null,b]}):null]})]}),(0,r.jsx)(o(),{id:"20df583c4acadbf9",children:"div.jsx-20df583c4acadbf9:not(:last-of-type){margin-bottom:var(--geist-gap-section)}"})]})}},647387:function(e,t,n){"use strict";n.d(t,{B8:function(){return a},D9:function(){return s},Er:function(){return l},uX:function(){return o}});var r=n(149836),i=n(557385);let o=()=>{var e;let{team:t}=(0,i.Z)();if(null===t)return!1;let n=(null===(e=t.billing)||void 0===e?void 0:e.plan)==="enterprise";return n||(0,r.X)(t,"passwordProtection")},s=e=>{let{deployment:t,project:n}=e;if(!t||!n)return{isLoading:!0,protectionEnabledForDeployment:null,protectionEnabledForProject:null,productionProtectionEnabled:null};let{passwordProtection:r,ssoProtection:i,trustedIps:o}=n,s="production"!==t.target,l=(null==r?void 0:r.deploymentType)==="all"||s&&(null==r?void 0:r.deploymentType)==="preview",a=(null==i?void 0:i.deploymentType)==="all"||s&&(null==i?void 0:i.deploymentType)==="preview",d=(null==o?void 0:o.deploymentType)==="all"||s&&(null==o?void 0:o.deploymentType)==="preview",c=(null==r?void 0:r.deploymentType)==="all"||(null==i?void 0:i.deploymentType)==="all"||(null==o?void 0:o.deploymentType)==="all";return{productionProtectionEnabled:c,protectionEnabledForProject:!!(r||i||o),protectionEnabledForDeployment:l||a||d,isLoading:!1}},l=e=>{let{team:t,user:n,projectName:r}=e,i=(null==t?void 0:t.slug)||(null==n?void 0:n.username);return i&&r?`/${i}/${r}/settings/deployment-protection`:""},a=e=>{let{team:t}=e;return t?`/teams/${t.slug}/settings/general#preview-comments`:"/account/general#preview-comments"}},541e3:function(e,t,n){"use strict";var r=n(397458),i=n(14517),o=n(494145),s=n.n(o);t.Z=e=>{let{children:t,className:n,noWrap:o,title:l,truncate:a,style:d}=e;return(0,r.jsx)("code",{className:(0,i.W)(s().code,n,{[s().nowrap]:o,[s().truncate]:a}),"data-geist-inline-code":"","data-version":"v1",style:d,title:l,children:t})}},610029:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(611648),i=n(495142);async function o(e,t,n){return(0,i.I)(`${(0,r.HJ)("v5")}/${encodeURIComponent(e)}${t?"?teamId="+t:""}`,{method:"PATCH",body:JSON.stringify(n),throwOnHTTPError:!0})}},249840:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(652983);function i(e){let[t,n]=(0,r.useState)(e),i=(0,r.useRef)(!1);(0,r.useEffect)(()=>{i.current||n(e)},[e]);let o=(0,r.useCallback)(e=>(i.current=!0,n(e)),[]),s=(0,r.useCallback)(()=>{i.current=!1},[]);return[t,o,s]}},494568:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var r=n(397458),i=n(446118),o=n(68839),s=n(75883),l=n(652983),a=n(905839),d=n(850240),c=n(9055),u=n(66818),h=n(526810),x=n(921690),p=n(875699),j=n(886847),g=n(131555),f=n(541e3),v=n(610029),m=n(927628),y=n(135635),b=n(588875),k=n(609230),w=n(761891),C=n(693147),L=n(192734);function S(e){let[t,n]=(0,l.useState)(""),[i,o]=(0,l.useState)(null),s=(0,l.useRef)(null);return(0,l.useEffect)(()=>{e.active&&setTimeout(()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.focus()},0)},[e.active,s]),(0,r.jsx)(b.Modal,{active:e.active,onClickOutside:e.onCancel,width:500,children:(0,r.jsxs)("form",{onSubmit:n=>{if(n.preventDefault(),e.name!==t.trim())return o(`The text you entered did not match "${e.name}".`);e.onConfirm()},children:[(0,r.jsxs)(b.Body,{children:[(0,r.jsx)(b.Title,{children:"Disable Logs and Source Protection"}),(0,r.jsx)(p.L,{}),(0,r.jsx)(j.Z,{fill:!0,label:"Warning",type:"error",variant:"contrast",children:"Continuing will make Deployment Status, Logs and Source for all deployments publicly accessible."}),(0,r.jsx)(p.L,{}),(0,r.jsxs)("label",{children:[(0,r.jsxs)(c.x,{children:["Enter ",(0,r.jsx)("b",{style:{overflowWrap:"anywhere"},children:e.name})," to continue:"]}),(0,r.jsx)(p.L,{y:1/4}),(0,r.jsx)(g.I,{"aria-label":"Confirmation Text",error:i,onChange:e=>{n(e.target.value),o(null)},ref:s,value:t})]})]}),(0,r.jsxs)(b.Actions,{children:[(0,r.jsx)(b.Action,{onClick:e.onCancel,type:"secondary",children:"Cancel"}),(0,r.jsx)(b.Action,{buttonType:"submit",loading:e.loading,children:"Disable"})]})]})})}function F(){var e;let{project:t}=(0,C.U)()||{},{data:n,mutate:i}=(0,m.PY)(String(t)),{data:o}=(0,k.a)(),{team:s,isReady:j}=(0,y.t7)(),{can:g,isLoading:b}=(0,w.ZP)(),[F,_]=(0,l.useState)(!(null==n?void 0:n.publicSource)),[P,E]=(0,l.useState)(!1),[T,Z]=(0,l.useState)(!1),[D,B]=(0,l.useState)(null),W=(0,u.e1)(),A=!n||!j||!o||b||!t;async function M(){if(!A){Z(!0),E(!1);try{B(null),await (0,v.Z)(t,null==s?void 0:s.id,{publicSource:!F}),W.success("Updated Logs and Source Protection successfully."),await i()}catch(e){B((0,a.VK)(e))}Z(!1)}}let z=g(w.aU.Update,w._z.Project),N=!A&&z&&!n.publicSource!==F;return(0,l.useEffect)(()=>{A||_(!n.publicSource)},[A,n]),(0,r.jsx)(L.Z,{description:(0,r.jsxs)(r.Fragment,{children:["Ensures visitors of the ",(0,r.jsx)(f.Z,{children:"/_logs"})," and"," ",(0,r.jsx)(f.Z,{children:"/_src"})," paths of your Production and Preview Deployments must log in with Vercel (requires being a member of your team) to see the Source, Logs and Deployment Status."]}),disabled:A||!z,error:D,highlightNote:!A&&!z,note:A?(0,r.jsx)(d.O,{boxHeight:32,vcenter:!0,width:200}):z?(0,r.jsxs)(c.x,{children:["Learn more about"," ",(0,r.jsx)(x.r,{external:!0,href:"/docs/platform/projects#logs-and-source-protection",type:"highlight",children:"Logs and Source Protection"})]}):(0,r.jsx)(c.x,{lineHeight:32,children:"You need additional permissions to manage your project's logs and source protection."}),onSave:F?M:()=>E(!0),saveDisabled:!N,saveLoading:T,title:"Logs and Source Protection",type:A||F?"default":"error",children:A?(0,r.jsx)(d.O,{height:30,width:140}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{cursor:"pointer"},children:[(0,r.jsx)(h.Z,{checked:F,onChange:()=>_(e=>!e),size:"large"}),(0,r.jsx)(p.L,{inline:!0,x:.5}),(0,r.jsx)(c.x,{as:"span",weight:500,children:F?"Enabled":"Disabled"})]}),(0,r.jsx)(S,{active:P,loading:A,name:[(null==s?void 0:s.slug)??(null===(e=o.user)||void 0===e?void 0:e.username),n.name].join("/"),onCancel:()=>{_(!0),E(!1)},onConfirm:M},String(P))]})})}var _=n(249840);function P(e){let[t,n]=(0,l.useState)(""),[i,o]=(0,l.useState)(null),s=(0,l.useRef)(null);return(0,l.useEffect)(()=>{e.active&&setTimeout(()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.focus()},0)},[e.active,s]),(0,r.jsx)(b.Modal,{active:e.active,onClickOutside:e.onCancel,width:500,children:(0,r.jsxs)("form",{onSubmit:n=>{if(n.preventDefault(),e.name!==t.trim())return o(`The text you entered did not match "${e.name}".`);e.onConfirm()},children:[(0,r.jsxs)(b.Body,{children:[(0,r.jsx)(b.Title,{children:"Git Fork Protection"}),(0,r.jsx)(p.L,{}),(0,r.jsx)(j.Z,{fill:!0,label:"Warning",type:"error",variant:"contrast",children:"Continuing will expose your Environment Variables to pull requests from outside of your team."}),(0,r.jsx)(p.L,{}),(0,r.jsxs)("label",{children:[(0,r.jsxs)(c.x,{children:["Enter ",(0,r.jsx)("b",{style:{overflowWrap:"anywhere"},children:e.name})," to continue:"]}),(0,r.jsx)(p.L,{y:1/4}),(0,r.jsx)(g.I,{"aria-label":"Confirmation Text",error:i,onChange:e=>{n(e.target.value),o(null)},ref:s,value:t})]})]}),(0,r.jsxs)(b.Actions,{children:[(0,r.jsx)(b.Action,{onClick:e.onCancel,type:"secondary",children:"Cancel"}),(0,r.jsx)(b.Action,{buttonType:"submit",loading:e.loading,children:"Disable"})]})]})})}function E(){var e;let{project:t}=(0,C.U)()||{},{data:n,mutate:i}=(0,m.PY)(String(t)),{data:o}=(0,k.a)(),{team:s,isReady:j}=(0,y.t7)(),{can:g,isLoading:f}=(0,w.ZP)(),b=(null==n?void 0:n.gitForkProtection)??!0,[S,F,E]=(0,_.Z)(b),[T,Z]=(0,l.useState)(!1),[D,B]=(0,l.useState)(!1),[W,A]=(0,l.useState)(null),M=(0,u.e1)(),z=!n||!j||!o||f,N=g(w.aU.Update,w._z.Project),V=!z&&t&&N&&S!==b;async function H(){if(V){B(!0),Z(!1);try{A(null),await (0,v.Z)(t,null==s?void 0:s.id,{gitForkProtection:S}),M.success("Updated Git Fork Protection successfully."),E(),await i()}catch(e){A((0,a.VK)(e))}B(!1)}}return(0,r.jsx)(L.Z,{description:(0,r.jsx)(r.Fragment,{children:"Ensures that pull requests targeting your Git repository must be authorized by a member of your Team before deploying and assigning your Environment Variables."}),disabled:z||!N,error:W,highlightNote:!z&&!N,note:z?(0,r.jsx)(d.O,{height:32,width:200}):N?(0,r.jsxs)(c.x,{children:["Learn more about"," ",(0,r.jsx)(x.r,{external:!0,href:"/docs/platform/projects#git-fork-protection",type:"highlight",children:"Git Fork Protection"})]}):(0,r.jsx)(c.x,{lineHeight:32,children:"You need additional permissions to manage your project's git fork protection."}),onSave:S?H:()=>Z(!0),saveDisabled:!V,saveLoading:D,title:"Git Fork Protection",type:z||S?"default":"error",children:z?(0,r.jsx)(d.O,{height:30,width:140}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{cursor:"pointer"},children:[(0,r.jsx)(h.Z,{checked:S,onChange:()=>F(e=>!e),size:"large"}),(0,r.jsx)(p.L,{inline:!0,x:.5}),(0,r.jsx)(c.x,{as:"span",weight:500,children:S?"Enabled":"Disabled"})]}),(0,r.jsx)(P,{active:T,loading:z,name:[(null==s?void 0:s.slug)??(null===(e=o.user)||void 0===e?void 0:e.username),n.name].join("/"),onCancel:()=>{F(!0),Z(!1)},onConfirm:H},String(T))]})})}var T=n(164876),Z=n(277346),D=n(557385),B=n(647387);function W(){return(0,r.jsxs)("svg",{fill:"none",height:"39",viewBox:"0 0 41 39",width:"41",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M25.3333 14.6665H6.66667C5.19391 14.6665 4 15.8604 4 17.3332V26.6665C4 28.1393 5.19391 29.3332 6.66667 29.3332H25.3333C26.8061 29.3332 28 28.1393 28 26.6665V17.3332C28 15.8604 26.8061 14.6665 25.3333 14.6665Z",stroke:"#0070F3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M9.33337 14.6665V9.33317C9.33337 7.56506 10.0358 5.86937 11.286 4.61913C12.5362 3.36888 14.2319 2.6665 16 2.6665C17.7682 2.6665 19.4638 3.36888 20.7141 4.61913C21.9643 5.86937 22.6667 7.56506 22.6667 9.33317V14.6665",stroke:"#0070F3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M29 37C34.5228 37 39 32.5228 39 27C39 21.4772 34.5228 17 29 17C23.4772 17 19 21.4772 19 27C19 32.5228 23.4772 37 29 37Z",fill:"#D3E5FF",stroke:"#FAFAFA",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M29 31L33 27L29 23",stroke:"#0070F3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M25 27H33",stroke:"#0070F3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}function A(){var e;let{team:t,user:n}=(0,D.Z)(),o=null===(e=(0,i.useRouter)().query.project)||void 0===e?void 0:e.toString(),s=(0,B.Er)({team:t,user:n,projectName:o});return(0,r.jsx)(x.r,{href:s,variant:"highlight",children:"Deployment Protection settings →"})}function M(){return(0,r.jsx)(Z.JH,{filled:!0,children:(0,r.jsxs)(o.K,{gap:6,style:{padding:"var(--geist-space-2x)"},children:[(0,r.jsx)(W,{}),(0,r.jsx)(c.x,{size:20,weight:600,children:"Password Protection"}),(0,r.jsxs)(c.x,{children:["This setting has moved. Go to ",(0,r.jsx)(A,{})]})]})})}function z(){return(0,r.jsxs)("svg",{fill:"none",height:"39",viewBox:"0 0 41 39",width:"41",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M16 29.3332C16 29.3332 26.6667 23.9998 26.6667 15.9998V6.6665L16 2.6665L5.33337 6.6665V15.9998C5.33337 23.9998 16 29.3332 16 29.3332Z",stroke:"#0070F3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M29 37C34.5228 37 39 32.5228 39 27C39 21.4772 34.5228 17 29 17C23.4772 17 19 21.4772 19 27C19 32.5228 23.4772 37 29 37Z",fill:"#D3E5FF",stroke:"#FAFAFA",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M29 31L33 27L29 23",stroke:"#0070F3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M25 27H33",stroke:"#0070F3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}function N(){return(0,r.jsx)(Z.JH,{filled:!0,children:(0,r.jsxs)(o.K,{gap:6,style:{padding:"var(--geist-space-2x)"},children:[(0,r.jsx)(z,{}),(0,r.jsxs)(o.K,{direction:"row",gap:2,children:[(0,r.jsx)(c.x,{color:"gray-900",size:20,weight:600,children:"SSO Protection"}),(0,r.jsx)(T.o,{color:"var(--accents-5)"}),(0,r.jsx)(c.x,{size:20,weight:600,children:"Vercel Authentication"})]}),(0,r.jsxs)(c.x,{children:["This setting has moved and been renamed. Go to"," ",(0,r.jsx)(A,{})]})]})})}var V=(0,n(897831).Z)(function(){let e=(0,i.useRouter)(),{project:t}=e.query;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.G,{title:`${t||""} – Security`,titlePostfix:!0}),(0,r.jsx)(F,{}),(0,r.jsx)(E,{}),(0,r.jsxs)(o.K,{gap:8,children:[(0,r.jsx)(M,{}),(0,r.jsx)(N,{})]})]})})},572009:function(e){e.exports={betaBadge:"beta-badge_betaBadge__nn52_",betaBadgeMuted:"beta-badge_betaBadgeMuted__VXlGg",feedbackButton:"beta-badge_feedbackButton__Q8_1M"}},494145:function(e){e.exports={code:"inline_code__oyCmg",nowrap:"inline_nowrap__9PYnJ",truncate:"inline_truncate__7Rl6D"}}},function(e){e.O(0,[4299,63349,24148,98586,85394,38419,59085,49162,81797,10599,97831,49774,92888,40179],function(){return e(e.s=48008)}),_N_E=e.O()}]);