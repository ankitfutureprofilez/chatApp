(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45060],{963366:function(t,e,n){"use strict";var r,a;n.d(e,{H:function(){return i},g:function(){return r}});let i={hour:"hour",day:"day"};(a=r||(r={})).TEAM="team",a.USER="user"},582157:function(t,e,n){"use strict";n.d(e,{J:function(){return i},c:function(){return o}});var r=n(355344),a=n(963366);function i(t,e){let n=Math.abs(e);return t===a.H.hour?n/(0,r.Z)("1h")<=400:n/(0,r.Z)("1d")<=400}function o(t){return i(a.H.hour,t)?a.H.hour:a.H.day}},206669:function(t,e,n){"use strict";n.d(e,{L:function(){return i},f:function(){return a}});var r=n(652983);let a=(0,r.createContext)({setProject:()=>{},setFunctionIdentifier:()=>{},setRange:()=>{}}),i=()=>(0,r.useContext)(a)},45060:function(t,e,n){"use strict";n.d(e,{EC:function(){return E},NT:function(){return H},kg:function(){return A},lj:function(){return R}});var r=n(397458),a=n(652983),i=n(351267),o=n(927062),l=n(14517),s=n(393796),u=n(446118),c=n(487289),h=n(813348),d=n(228809),f=n(609095),m=n(101036),p=n(68839),g=n(9055),_=n(496952),v=n(832191),x=n(76845),b=n(315935),j=n(999844),$=n(921690),y=n(321182),C=n(986324),w=n(66818),S=n(135635),D=n(786484),N=n(582157),M=n(340611),I=n(159305),k=n(539965),P=n(793075),T=n(206669),L=n(395464),F=n.n(L);let H=(0,a.memo)(function(t){let{data:e,sortKey:n,onExploreHandler:f,isCardFullscreen:b,isLoadingNextPageOfData:j,pathKey:y,search:N}=t,M=(0,C.dD)()||!1,{pageContext:P}=(0,I.R)(),L=(0,w.e1)(),H=(0,a.useRef)(null),{range:V}=(0,T.L)(),W=(0,u.useRouter)(),{teamSlug:K,team:q}=(0,S.t7)(),[Z,U]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!b){var t;null===(t=H.current)||void 0===t||t.scrollToIndex(0)}},[b]);let Q=(0,a.useMemo)(()=>N?null==e?void 0:e.filter(t=>E(t,!0).toLowerCase().includes(N.toLowerCase())):e,[N,e]),Y=(0,a.useMemo)(()=>{let t={...function(t){try{if(!t.includes("."))return{targetPath:t};let e=new URL(t.startsWith("http")?t:`https://${t}`);return{host:e.host,targetPath:e.pathname}}catch{return{targetPath:t}}}(N??""),sortKey:n,pathKey:y};return V&&(t.range={startDate:new Date(V.start),endDate:new Date(V.end)}),A(t,K,"ObserveTab"===P,!0)},[n,y,K,V,N,P]);return e&&0!==e.length?N&&(null==Q?void 0:Q.length)===0?(0,r.jsx)("div",{className:F().noDataCard,children:(0,r.jsxs)(p.K,{align:"center",className:F().content,direction:"column",gap:2,justify:"center",children:[(0,r.jsx)(g.x,{size:14,weight:500,children:"No Results Found"}),(0,r.jsxs)(g.x,{align:"center",color:"gray-900",size:14,style:{maxWidth:"60ch"},children:["Your search did not match any paths in your Top 1000 paths. You can look at all your paths with"," ",(0,r.jsx)($.r,{href:Y,type:"highlight",children:"Monitoring"}),"."]})]})}):(0,r.jsxs)("div",{className:(0,l.W)(F().container,{[F().isFullscreen]:b}),children:[(0,r.jsx)(i.M,{children:!b&&(0,r.jsx)(o.m.div,{animate:{opacity:1},className:F().exploreButtonContainer,exit:{opacity:0},children:(0,r.jsx)(v.z,{"aria-label":"Explore",className:F().button,onClick:f,prefix:(0,r.jsx)(c.I,{size:"16px"}),svgOnly:!0,type:"secondary",children:"Explore"})})}),(0,r.jsx)("div",{className:(0,l.W)(F().tableContainer,{[F().isFullscreen]:b,[F().isScrolled]:Z}),children:(0,r.jsx)(s.OO,{atTopStateChange:t=>{U(!t)},className:F().tableStack,components:{Item:t=>{let{children:e,...n}=t;return(0,r.jsx)("div",{...n,className:F().virtualListItem,children:e})},Footer:t=>{var n;return e.length>0&&(null==Q?void 0:Q.length)===0?null:e.length>D.D.InPage?(0,r.jsx)(p.K,{className:F().fullDataInformational,children:(0,r.jsxs)(g.x,{color:"gray-900",children:[N?`Found ${(null==Q?void 0:Q.length)??0} matches in`:"Showing "," ","the top"," ",D.D.Fullscreen.toLocaleString()," ","paths within the last 90 days."]})}):(null===(n=t.context)||void 0===n?void 0:n.isLoadingNextPageOfData)?(0,r.jsx)(p.K,{align:"center",children:(0,r.jsx)(m.$,{size:24})}):null}},context:{isLoadingNextPageOfData:j},data:Q,itemContent:(t,e)=>{var a;return(0,r.jsxs)("div",{className:F().row,children:[(0,r.jsx)("button",{className:(0,l.W)(F().rowButton,F().interactive),onClick:()=>{O({row:e,sortKey:n,pathKey:y,pageContext:P,router:W,teamSlug:K,range:V})},type:"button",children:(0,r.jsxs)(p.K,{align:"center",direction:"row",gap:2,justify:"space-between",children:[(0,r.jsxs)(p.K,{align:"center",className:F().contentContainer,direction:"row",gap:2,justify:"space-between",children:[(0,r.jsx)("div",{className:F().fullPathContainer,children:(0,r.jsx)(z,{row:e,search:N})}),(0,r.jsx)("p",{className:F().rowSum,children:R(e,n,M)})]},`${y}-${e.target_path}-${e.host}-${e.type}`),(0,r.jsx)("div",{className:F().barVisual,style:{width:`${100*e[`${n}_percentage`]}%`}})]})},`${y}-${e.target_path}-${e.host}-${e.type}`),(0,r.jsx)("div",{className:F().actionsContainer,children:(0,r.jsxs)(k.Fe,{position:"bottom-start",children:[(0,r.jsx)(B,{}),(0,r.jsxs)(k.v2,{width:"200px",children:[(0,r.jsx)(k.sN,{"aria-label":"Copy row to clipboard",onClick:()=>{let t=`${E(e,!0)}`;(0,x.v)(t),L.message("Copied to clipboard!")},prefix:(0,r.jsx)(h.C,{size:16}),children:"Copy"}),(0,r.jsx)(k.sN,{onClick:()=>O({row:e,sortKey:n,pathKey:y,pageContext:P,router:W,teamSlug:K,range:V}),prefix:(0,r.jsx)(d.c,{size:16}),suffix:(null===q||(null===(a=q.billing)||void 0===a?void 0:a.plan)==="hobby")&&(0,r.jsx)(_.C,{size:"md",variant:"gray",children:"Pro"}),children:"View Query"})]})]})})]})},ref:H,style:{height:"100%"}})})]}):(0,r.jsx)("div",{className:F().noDataCard,children:(0,r.jsxs)(p.K,{align:"center",className:F().content,direction:"column",gap:2,justify:"center",children:[(0,r.jsx)(g.x,{weight:500,children:"No Data"}),(0,r.jsx)(g.x,{align:"center",color:"gray-900",children:"There's no data available for your selection."})]})})});function B(){let{state:{open:t}}=(0,P.H9)();return(0,r.jsx)(k.j2,{"aria-label":"Top Paths actions",className:F().menuButton,shape:"square",size:"small",style:{opacity:t?1:void 0},svgOnly:!0,type:"secondary",variant:"shadow",children:(0,r.jsx)(f.y,{size:16})})}let O=t=>{let{row:e,sortKey:n,pathKey:r,pageContext:a,router:i,teamSlug:o,range:l}=t,s={sortKey:n,targetPath:e.target_path,host:e.host,pathType:e.type,pathKey:r};l&&(s.range={startDate:new Date(l.start),endDate:new Date(l.end)});let u=A(s,o,"ObserveTab"===a);if("ObserveTab"===a){i.push(u);return}window.open(u,"_blank","noopener")},R=function(t,e,n){let r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],a=t[e],i="";return("execution_time"===e&&(a=a/1e3/36e5,i="GB-hr"),"bandwidth"===e)?(0,j.h)(a):n?`~${(0,M.d)(a)} ${i}`:(a>1e6&&(a=Math.floor(a)),"execution_time"===e)?`${r?a.toLocaleString():a} ${i}`:r?a.toLocaleString():a};function z(t){let{row:e,search:n}=t,i=e.target_path.startsWith("/"),o=`${e.host}${i?"":"/"}${e.target_path}`,l=(0,a.useMemo)(()=>{if(!n||"."===n)return(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:V(o)}});let t=RegExp(`(${n})`,"gi");return o.split(t).filter(String).map((e,n)=>t.test(e)?(0,r.jsx)(y.v,{children:(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:V(e)}})},(0,b.k)(n,e)):(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:V(e)}},(0,b.k)(n,e)))},[o,n]);return(0,r.jsx)("code",{className:F().fullPath,title:o,children:l})}let E=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.target_path.startsWith("/"),r=`${t.host}${n?"":"/"}${t.target_path}`;return e?r:V(r)};function V(t){let e=t.split("//"),n=e.map(t=>t.replace(/(?<after>:)/giu,"$1<wbr>").replace(/(?<before>[/~.,\-_?#%])/giu,"<wbr>$1").replace(/(?<beforeAndAfter>[=&])/giu,"<wbr>$1<wbr>")).join("//<wbr>");return n}let W={bandwidth:"sum(bandwidth_total)",execution_time:"sum(execution)",invocations:"sum(requests)",requests:"sum(requests)"};function A(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e?`/dashboard/${e}/${n?"observe/metrics":"monitoring"}`:`/dashboard/${n?"observe/metrics":"monitoring"}`;if(!t)return a;let{targetPath:i,host:o,range:l,pathKey:s}=t,u=W[t.sortKey],c="request_path"===s?"request_path":"source_path",h=r?`match(${c}, '${i}')`:`${c} = '${i}'`;void 0!==o&&(h=`${h} AND host = '${o}'`),void 0!==t.pathType&&(h=`${h} AND path_type = '${t.pathType}'`),void 0!==t.status&&(h=`${h} AND status = '${t.status}'`);let d="",f="";if(l){let t=l.startDate.getTime(),e=Math.min(l.endDate.getTime(),Date.now())-l.startDate.getTime(),n=(0,N.c)(e);d=`&startTime=${t}&deltaTime=${e}`,f=`&g=${n}`}return`${a}?visualize=${encodeURIComponent(u)}&where=${encodeURIComponent(h)}${d}${f}`}},321182:function(t,e,n){"use strict";n.d(e,{v:function(){return o}});var r=n(397458);n(652983);var a=n(291047),i=n.n(a);function o(t){let{children:e}=t;return(0,r.jsx)("mark",{className:i().mark,"data-version":"v1",children:e})}},999844:function(t,e,n){"use strict";n.d(e,{h:function(){return o}});var r=n(250916),a=n.n(r),i=n(192766);let o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!(0,i.hj)(t))return"–";let r=a()(t,{maximumFractionDigits:"short"===e?0:n,minimumFractionDigits:2!==n?n:void 0});return"short"===e&&r.length<5?a()(t,{maximumFractionDigits:n}):r}},470460:function(t,e,n){"use strict";n.d(e,{Q:function(){return i},g:function(){return a}});var r=n(192766);let a=t=>{if(!(0,r.hj)(t))return"–";if(t<60)return`${t.toFixed(0)} s`;let e=Math.round(t/3600);return e<1?`${Math.round(t/60)} m`:`${(0,r.x6)(e)} h`},i=t=>{if(!(0,r.hj)(t))return"–";let e=Math.round(t/1e3);return a(e,"short")}},192766:function(t,e,n){"use strict";n.d(e,{hj:function(){return o},kA:function(){return i},x6:function(){return a}});var r=n(470460);function a(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function i(t,e){if(0===t)return e===r.g?300:5;let n=Math.pow(10,Math.floor(Math.log10(t)));t=Math.ceil(10*t/n)*n/10;let a=5*n;if(t>=3*n&&t<=a)return a;let i=n/10,o=0;for(;!function(t){let n=t/5,r=new Set([0,n,2*n,3*n,4*n,t].map(t=>e(t)));return 6===r.size}(t);)t+=i,++o>=10&&(i*=10,o=0);return t}function o(t){return"number"==typeof t&&!Number.isNaN(t)}},340611:function(t,e,n){"use strict";n.d(e,{d:function(){return r}});let r=function(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t<1e3)return e?t.toLocaleString():t.toString();if(t>=1e3&&t<1e6){let n=Math.floor(t/1e3);return`${e?n.toLocaleString():n.toString()}k`}if(t>=1e6&&t<1e9){let n=Math.floor(t/1e6);return`${e?n.toLocaleString():n.toString()}m`}if(t>=1e9&&t<1e12){let n=Math.floor(t/1e9);return`${e?n.toLocaleString():n.toString()}bn`}if(t>=1e12){let n=Math.floor(t/1e12);return`${e?n.toLocaleString():n.toString()}tn`}return t.toString()}},786484:function(t,e,n){"use strict";n.d(e,{D:function(){return a},L:function(){return h}});var r,a,i=n(353729),o=n(652983),l=n(611648),s=n(539142),u=n(495142),c=n(135635);function h(t){let{endDatetime:e,startDatetime:n,projectId:r,sortKey:h,isCardFullscreen:d,pathType:f}=t,[m,p]=(0,o.useState)(0),[g,_]=(0,o.useState)(d?a.Fullscreen:a.InPage),v=m!==g,x=function(t){let{endDatetime:e,limit:n,startDatetime:r,projectId:a,sortKey:o,opts:h,pathType:d}=t,{isReady:f,team:m}=(0,c.t7)();return(0,i.ZP)(()=>f&&r&&e?`${l.jn}${(0,s.c)({owner_id:null==m?void 0:m.id,teamId:null==m?void 0:m.id,projectId:a,from:"object"==typeof r?r.toISOString():new Date(r).toISOString(),to:"object"==typeof e?e.toISOString():new Date(e).toISOString(),limit:n,sortKey:o,pathType:"source_path"===d?"target_path":d})}`:null,t=>(0,u.I)(t),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:void 0,keepPreviousData:null==h?void 0:h.keepPreviousData})}({endDatetime:e,startDatetime:n,limit:g,sortKey:h,projectId:r||void 0,pathType:f,opts:{keepPreviousData:v}});return(0,o.useEffect)(()=>{p(g),_(d?a.Fullscreen:a.InPage)},[d,h]),x}(r=a||(a={}))[r.InPage=50]="InPage",r[r.Fullscreen=1e3]="Fullscreen"},813348:function(t,e,n){"use strict";n.d(e,{C:function(){return a}});var r=n(923390);let a=(0,r.H)('<path d="M6 17C4.89543 17 4 16.1046 4 15V5C4 3.89543 4.89543 3 6 3H13C13.7403 3 14.3866 3.4022 14.7324 4M11 21H18C19.1046 21 20 20.1046 20 19V9C20 7.89543 19.1046 7 18 7H11C9.89543 7 9 7.89543 9 9V19C9 20.1046 9.89543 21 11 21Z"/>')},487289:function(t,e,n){"use strict";n.d(e,{I:function(){return a}});var r=n(923390);let a=(0,r.H)('<path d="M15 3h6m0 0v6m0-6l-7 7M9 21H3m0 0v-6m0 6l7-7M3 9V3m0 0h6M3 3l7 7m11 5v6m0 0h-6m6 0l-7-7"/>')},395464:function(t){t.exports={container:"table_container__xdj5p",isFullscreen:"table_isFullscreen__dxWhh",tableContainer:"table_tableContainer__V_2ml",tableStack:"table_tableStack__qgB95",isScrolled:"table_isScrolled__3lhlh",row:"table_row__lYhBX",interactive:"table_interactive__H7v69",contentContainer:"table_contentContainer__XD5pK",icon:"table_icon__VZPV5",rowButton:"table_rowButton__xQZAC",rowSum:"table_rowSum__DWW_r",fullPathContainer:"table_fullPathContainer__nQCaM",fullPath:"table_fullPath___82Jr",actionsContainer:"table_actionsContainer__gNe7b",copyToClipboardButton:"table_copyToClipboardButton__EMb_l",menuButton:"table_menuButton__PvsM0",barVisual:"table_barVisual__2t5Ge",noDataCard:"table_noDataCard__We88b",content:"table_content__QZD3t",exploreButtonContainer:"table_exploreButtonContainer___0vFO",button:"table_button__14hS0",virtualListItem:"table_virtualListItem__fC3ki",fullDataInformational:"table_fullDataInformational__USrRt"}},291047:function(t){t.exports={mark:"mark_mark__rUR3E"}}}]);