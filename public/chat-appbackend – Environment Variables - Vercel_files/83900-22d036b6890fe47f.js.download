(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83900],{464544:function(e,t,r){"use strict";r.d(t,{_:function(){return p}});var n=r(397458),a=r(603385),i=r.n(a),s=r(68839),l=r(9055),o=r(921690),d=r(466332),c=r(291033),u=r(171267),v=r.n(u);function p(e){var t;let{team:r,resource:a,title:u="Additional Permissions Required",customMessage:p,className:h}=e,m=(null==r?void 0:null===(t=r.membership)||void 0===t?void 0:t.role)??"",g=i()(m.replaceAll("_"," "));return(0,n.jsxs)(s.K,{align:"center",className:h??v().additionalPermissionsWrapper,gap:4,justify:"center",children:[(0,n.jsx)(l.x,{align:"center",weight:500,children:u}),(0,n.jsx)(l.x,{align:"center",as:"p",className:v().message,children:m?(0,n.jsxs)(n.Fragment,{children:["As a ",(0,n.jsx)(l.x,{as:"span",weight:500,children:g})," on the ",(0,n.jsx)(d.qE,{size:20,teamId:(null==r?void 0:r.id)??""}),(0,n.jsx)(l.x,{as:"span",weight:500,children:` ${(null==r?void 0:r.name)??""}`})," team, ",p||`you do not have permission to view ${a}.`]}):`You do not have permission to view ${a}.`}),(0,n.jsxs)(l.x,{align:"center",as:"p",className:v().link,color:"gray-900",children:["Learn more about"," ",(0,n.jsx)(o.r,{external:!0,href:"/docs/accounts/team-members-and-roles/access-roles",onClick:()=>{c.co.track(c.s6.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]})}},164481:function(e,t,r){"use strict";var n=r(397458),a=r(832191),i=r(607974),s=r(291033);t.Z=e=>{var t,r,l;let o=(0,i.B)(e.disabled),d=e.loading??(null===(t=e.swr)||void 0===t?void 0:t.isLoadingMore),c="Load More";return!(null===(r=e.swr)||void 0===r?void 0:r.initialDataLoaded)||(null===(l=e.swr)||void 0===l?void 0:l.isReachingEnd)?null:(0,n.jsx)(a.z,{type:"secondary",width:"100%",...e,disabled:o,loading:d,onClick:t=>{var r;let n=e.onClick??(null===(r=e.swr)||void 0===r?void 0:r.loadMore);null==n||n(t),s.co.track(s.s6.CLICK_EVENT,{click_name:"dashboard_cta",click_value:c})},children:c})}},748088:function(e,t,r){"use strict";r.d(t,{v:function(){return E}});var n=r(397458),a=r(652983),i=r(313003),s=r.n(i),l=r(588875),o=r(948825),d=r(875699),c=r(131555),u=r(136566),v=r(604803),p=r(646912),h=r(921690),m=r(340574),g=r(306054),x=r(66818),j=r(495142),f=r(611648),y=r(539142),b=r(135635),_=r(930316),k=r(566968),S=r(927628);let w=()=>Math.random().toString(36).substring(9),E=e=>e.startsWith("-----BEGIN PRIVATE KEY-----\\n")&&e.endsWith("\\n-----END PRIVATE KEY-----\\n")?e.replace(/\\n/g,"\n"):e;t.Z=e=>{let{active:t,initialSecretName:r,onCancel:i,onAdd:C}=e,[I,P]=(0,a.useState)(""),[N,Z]=(0,a.useState)(""),[$,L]=(0,a.useState)(void 0),[V,B]=(0,a.useState)(!1),{team:T}=(0,b.t7)(),A=(0,x.e1)(),{data:z}=(0,_.s)(),{data:H}=(0,S.PY)((0,k.ic)());(0,a.useEffect)(()=>{t&&P(e=>{if(e)return e;let t=s()(r||(null==H?void 0:H.name)||""),n=!!(null==z?void 0:z.secrets.find(e=>e.name.toLowerCase()===t.toLowerCase()));return n?`${t}-${w()}`:t})},[r,t,H,z]);let O=async()=>{B(!0);let e=await (0,j.I)(`${f.iM}${(0,y.c)({teamId:null==T?void 0:T.id})}`,{method:"POST",body:JSON.stringify({name:I,value:N}),throwOnHTTPError:!1});B(!1),e.error?L(e.error):(C(e.uid),A.success("Created Secret successfully."))},R=(0,a.useCallback)(()=>{L(void 0),Z(""),P("")},[]);return(0,n.jsxs)(l.Modal,{active:t,onAnimationDone:R,onClickOutside:i,width:"420px",children:[(0,n.jsxs)(l.Body,{children:[(0,n.jsxs)(v.Z,{center:!0,children:[(0,n.jsx)(m.ZP,{h4:!0,style:{fontWeight:500,margin:0},children:"Add Secret"}),(0,n.jsx)(m.ZP,{center:!0,preset:"body-2",style:{color:"var(--accents-5)"},children:"Secrets contain sensitive information, are encrypted and also available across all projects."})]}),(0,n.jsx)("main",{children:(0,n.jsxs)("form",{className:"form",onSubmit:async e=>{null==e||e.preventDefault(),await O()},children:[(0,n.jsx)(v.Z,{children:(0,n.jsx)(u.Z,{value:"Value",children:(0,n.jsx)(p.g,{"aria-label":"Value",autoFocus:!0,disabled:V,name:"add-secret-value",onChange:e=>{Z(E(e.target.value))},placeholder:"i9ju23nf39nunu3asn",rows:2,value:N,width:"100%"})})}),(0,n.jsx)(d.L,{y:1}),(0,n.jsx)(v.Z,{children:(0,n.jsx)(u.Z,{id:"add-secret-name",value:"Name",withInput:!0,children:(0,n.jsx)(c.I,{disabled:V,id:"add-secret-name",name:"add-secret-name",onChange:e=>{P(e.target.value)},placeholder:"secret-name",prefix:"@",style:{height:40},value:I,width:"100%"})})}),(0,n.jsx)(d.L,{}),(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{style:{color:"var(--accents-5)"},children:["You will be able to reuse this Secret in multiple Projects using this name."," "]}),(0,n.jsx)(h.r,{external:!0,href:"/docs/environment-variables#secrets",type:"highlight",children:"Learn More"})]}),$?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(d.L,{y:.5})," ",(0,n.jsx)(g.Z,{error:$})," "]}):null]})})]}),(0,n.jsxs)(l.Actions,{children:[(0,n.jsx)(l.Action,{onClick:i,type:"secondary",children:"Cancel"}),(0,n.jsxs)(l.Action,{disabled:V,onClick:O,children:[V?(0,n.jsx)(o.Z,{}):null,!V&&"Create Secret"]})]})]})}},96149:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(397458),a=r(652983),i=r(446118),s=r(68839),l=r(9055),o=r(572465),d=r(760093),c=r(601679),u=r(875699),v=r(921690),p=r(136566),h=r(331049),m=r(530333),g=r(927628),x=r(135635),j=r(761891),f=r(568841),y=r(502383);function b(e){let{selectedGitBranch:t,checkedProduction:r,checkedPreview:b,checkedDevelopment:_,setCheckedProduction:k,setCheckedPreview:S,setCheckedDevelopment:w,setSelectedGitBranch:E,type:C}=e,[I,P]=a.useState(""),{project:N}=(0,i.useRouter)().query,{data:Z}=(0,g.PY)(N),{teamSlug:$}=(0,x.t7)(),{can:L,isLoading:V}=(0,j.ZP)(),B=null==Z?void 0:Z.id,{data:T}=(0,m.h)(B),A="string"==typeof t,z=(T||[]).filter(Boolean).map(e=>e.ref),H=L(j.aU.Create,j._z.ProjectEnvVarsProduction);return(0,n.jsxs)(s.K,{direction:"column",children:[(0,n.jsx)(p.Z,{value:"Environment"}),(0,n.jsx)(u.L,{y:.3}),(0,n.jsx)(s.K,{direction:"row",justify:"space-between",children:(0,n.jsx)(f.Z,{disableTriggers:V||H,text:"Additional permissions are required to create production environment variables.",children:(0,n.jsx)(d.X,{checked:H&&!A&&r,disabled:V||!H||A,name:"add-form-production",onChange:()=>k(!r),children:"Production"})})}),(0,n.jsx)(h.Z,{margin:10}),(0,n.jsxs)(s.K,{direction:"row",justify:"space-between",children:[(0,n.jsx)(d.X,{checked:b,name:"add-form-preview",onChange:()=>{S(!b),E(null)},children:"Preview"}),A?(0,n.jsx)(l.x,{size:14,children:(0,n.jsx)(v.r,{href:"#",onClick:e=>{null==e||e.preventDefault(),E(null)},tab:!0,variant:"highlight",children:"Cancel"})}):(0,n.jsx)(l.x,{size:14,children:(0,n.jsx)(v.r,{href:"#",onClick:e=>{null==e||e.preventDefault(),t||E(""),k(!1),S(!0),w(!1)},tab:!0,variant:"highlight",children:"Select Custom Branch"})})]}),A?(null==Z?void 0:Z.link)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.L,{y:.5}),(0,n.jsxs)(c.Z,{className:"select-git-branch",onChange:e=>E(e||""),placeholder:"All Preview Branches",value:t||null,children:[(0,n.jsx)(c.Z.Input,{onChange:e=>P(e.target.value)}),(0,n.jsxs)(c.Z.List,{emptyMessage:"No preview branches",children:[(0,n.jsx)(n.Fragment,{children:I&&!z.find(e=>e===I)?(0,n.jsx)(c.Z.Option,{displayValue:!0,value:I||"",children:`Use "${I}"`}):null}),(0,n.jsx)(n.Fragment,{children:z.map(e=>{var t;let r=String(null===(t=Z.link)||void 0===t?void 0:t.productionBranch),a=r===e;return a?null:(0,n.jsx)(c.Z.Option,{disabled:a,value:e,children:e},e)})})]})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.L,{y:.5}),(0,n.jsx)(o.Z,{as:`/${$}/${null==Z?void 0:Z.name}/settings/git`,href:"/[teamSlug]/[project]/settings/git",type:"secondary",children:"Connect Git Repository"})]}):null,(0,n.jsx)(h.Z,{margin:10}),(0,n.jsx)(d.X,{checked:C!==y.t.Sensitive&&!A&&_,disabled:A||C===y.t.Sensitive,name:"add-form-development",onChange:()=>w(!_),children:"Development"})]})}},283900:function(e,t,r){"use strict";r.d(t,{pW:function(){return a},lZ:function(){return ej},ZP:function(){return eb},_j:function(){return ek}});var n,a,i=r(397458),s=r(652983),l=r(14517),o=r(905839),d=r(118838),c=r(565893),u=r(241967),v=r(68839),p=r(9055),h=r(496952),m=r(832191),g=r(76845),x=r(277346),j=r(340574),f=r(875699),y=r(588875),b=r(306054),_=r(466332),k=r(604803),S=r(541e3),w=r(539965),E=r(66818),C=r(568841),I=r(327943),P=r(620473),N=r(347771),Z=r(951994),$=r(939678),L=()=>(0,i.jsxs)("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M2.66675 4.66675V2.66675H13.3334V4.66675",stroke:"#666666",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,i.jsx)("path",{d:"M6 13.3333H10",stroke:"#666666",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,i.jsx)("path",{d:"M8 2.66675V13.3334",stroke:"#666666",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]}),V=r(566516),B=r.n(V);function T(e){let{env:t}=e,{data:r}=(0,Z.Z)(null==t?void 0:t.configurationId),{data:n}=(0,N.Z)(null==r?void 0:r.integrationId);if(!t.configurationId)return"plain"===t.type?(0,i.jsx)(k.Z,{center:!0,className:(0,l.W)(B().iconContainer,"plaintextIconContainer"),children:(0,i.jsx)(L,{})}):"system"===t.type?(0,i.jsx)(k.Z,{center:!0,className:(0,l.W)(B().iconContainer,"systemIconContainer"),children:(0,i.jsx)($.Z,{color:"var(--accents-5)",width:16})}):"encrypted"===t.type?(0,i.jsx)(k.Z,{center:!0,className:(0,l.W)(B().iconContainer,"encryptedIconContainer"),children:(0,i.jsx)(I.E,{color:"var(--accents-5)",size:16,weight:"bold"})}):"sensitive"===t.type?(0,i.jsx)(k.Z,{center:!0,className:(0,l.W)(B().iconContainer,"sensitiveIconContainer"),children:(0,i.jsx)(P.H,{color:"var(--accents-5)",size:16,weight:"bold"})}):(0,i.jsx)(k.Z,{center:!0,className:(0,l.W)(B().iconContainer,"secretIconContainer"),children:(0,i.jsx)(P.H,{color:"var(--accents-5)",size:16,weight:"bold"})});return(0,i.jsx)(_.qE,{className:"integrationIcon",hash:null==n?void 0:n.icon,placeholder:!r||!n,size:30})}var A=r(446118),z=r(850240),H=r(760093),O=r(668909),R=r(136566),W=r(601679),M=r(886847),D=r(131555),F=r(646912),K=r(748088),U=r(495142),J=r(611648),q=r(539142),X=r(502383),Y=r(930316),G=r(135635),Q=r(609230),ee=r(927628),et=r(881441),er=r(684624),en=r(96149),ea=r(986750),ei=r.n(ea);function es(e){let{env:t,onDiscard:r,onSave:n,onSecretAdd:a}=e,[l,d]=(0,s.useState)(t.type),[c,u]=(0,s.useState)({value:t.key,edited:!1}),[p,h]=(0,s.useState)(()=>l===X.t.Plain?t.value:""),[g,y]=(0,s.useState)(()=>l===X.t.Encrypted&&t.decrypted?t.value:""),[_,S]=(0,s.useState)(!1),w=Array.isArray(t.target)?t.target:[t.target],C=t.type===X.t.Secret&&w.includes(X.r.Development),[I,N]=(0,s.useState)(w.includes(X.r.Production)),[Z,$]=(0,s.useState)(w.includes(X.r.Preview)),[L,V]=(0,s.useState)(w.includes(X.r.Development)),{data:B}=(0,Y.s)(),{team:T}=(0,G.t7)(),{user:ea}=(0,Q.a)(),{project:es}=(0,A.useRouter)().query,{data:el}=(0,ee.PY)(es),[eo,ed]=(0,s.useState)(void 0),ec=(0,E.e1)(),eu=null==T?void 0:T.id;(0,s.useEffect)(()=>{t.decrypted&&y(t.value)},[t.decrypted,t.value]);let ev=(0,s.useMemo)(()=>(null==B?void 0:B.secrets.map(e=>({label:`@${e.name}`,value:e.uid})))??[],[B]),[ep,eh]=(0,s.useState)(t.gitBranch),{data:em}=(0,et.Z)(es),[eg,ex]=(0,s.useState)(!1),[ej,ef]=(0,s.useState)(""),[ey,eb]=(0,s.useState)(()=>l===X.t.Secret?t.value:null),[e_,ek]=(0,s.useState)(()=>l===X.t.System?t.value:null),eS=(0,s.useCallback)(e=>{if("create-new-secret"===e){ex(!0);return}null===e&&ef(""),eb(e)},[ex,eb,ef]),ew=(0,s.useCallback)(e=>{if(ek(e),null!==e&&(!c.value||!c.edited))switch(null==el?void 0:el.framework){case"nextjs":u({edited:!1,value:`NEXT_PUBLIC_${e}`});break;case"create-react-app":u({edited:!1,value:`REACT_APP_${e}`})}},[c,el]),eE=(0,s.useCallback)(async()=>{S(!0);let e="";switch(l){case X.t.Plain:e=p;break;case X.t.Secret:e=ey;break;case X.t.System:e=e_;break;case X.t.Encrypted:e=g;break;case X.t.Sensitive:e=""}let r=[];I&&r.push(X.r.Production),Z&&r.push(X.r.Preview),L&&r.push(X.r.Development);try{let a=ep||null,i=await (0,U.I)(`${(0,J.HJ)("v7")}/${es}/env/${t.id}${(0,q.c)({teamId:eu})}`,{method:"PATCH",body:JSON.stringify(l===X.t.Sensitive?{target:r,gitBranch:a}:{key:c.value,value:e,target:r,type:l,gitBranch:a}),throwOnHTTPError:!0});ec.success("Updated Environment Variable successfully."),n(i)}catch(e){ed((0,o.SC)(e))}S(!1)},[n,c,p,ey,e_,g,es,eu,ec,L,Z,I,t,l,ep]),eC=(0,s.useMemo)(()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.Z,{value:"Type"}),(0,i.jsx)(O.Ee,{label:"Environment Variable Type",onChange:e=>{d(e),C||e!==X.t.Secret||V(!1)},value:l,children:(0,i.jsxs)(k.Z,{direction:["column","row","row"],gap:0,style:{fontSize:"14px"},children:[(0,i.jsx)(O.Ee.Item,{value:X.t.Plain,children:"Plaintext"}),(0,i.jsx)(f.L,{x:1,y:.5}),(0,i.jsx)(O.Ee.Item,{value:X.t.Secret,children:"Secret"}),(0,i.jsx)(f.L,{x:1,y:.5}),(0,i.jsx)(O.Ee.Item,{value:X.t.System,children:"Provided by System"})]})})]}),[l,V,C]),eI=(0,s.useMemo)(()=>(0,i.jsx)(k.Z,{flex:.5,children:(0,i.jsx)(R.Z,{value:"Value",children:(0,i.jsxs)(W.Z,{disabled:C,onChange:eS,placeholder:"Select Secret...",value:ey,children:[(0,i.jsx)(W.Z.Input,{className:"edit-var-select-secret",onChange:e=>ef(e.target.value)}),(0,i.jsxs)(W.Z.List,{children:[(0,i.jsx)(W.Z.Option,{value:"create-new-secret",children:ej?`Create new Secret "${ej}" for ${(null==T?void 0:T.name)??(null==ea?void 0:ea.name)??(null==ea?void 0:ea.username)}`:`Create a new Secret for ${(null==T?void 0:T.name)??(null==ea?void 0:ea.name)??(null==ea?void 0:ea.username)}`}),(0,i.jsx)(i.Fragment,{children:ev.map(e=>(0,i.jsx)(W.Z.Option,{value:e.value,children:e.label},e.value))})]})]})})}),[ef,eS,ev,C,ej,ey,T,ea]),eP=(0,s.useMemo)(()=>(0,i.jsx)(k.Z,{flex:.5,children:(0,i.jsx)(R.Z,{value:"Value",children:(0,i.jsxs)(W.Z,{onChange:ew,placeholder:"Select System Environment Variable...",value:e_,children:[(0,i.jsx)(W.Z.Input,{}),(0,i.jsx)(W.Z.List,{children:null==em?void 0:em.systemEnvValues.map(e=>(0,i.jsx)(W.Z.Option,{value:e,children:e},e))})]})})}),[em,ew,e_]),eN=(0,s.useMemo)(()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.L,{y:.5}),(0,i.jsx)(R.Z,{value:"Value",children:(0,i.jsx)(F.g,{onChange:e=>h((0,K.v)(e.target.value)),placeholder:"i9ju23nf39nunu3asn",rows:3,value:p,width:"100%"})})]}),[p,h]),eZ=!t.decrypted;return(0,i.jsxs)(x.D2,{primaryAction:(0,i.jsx)(m.z,{"data-testid":(0,er.C)("env-variables-edit-form","save-button"),loading:_,onClick:eE,size:"small",children:"Save"}),secondaryAction:(0,i.jsx)(m.z,{onClick:r,size:"small",type:"secondary",children:"Cancel"}),children:[(0,i.jsxs)(k.Z,{direction:["column","row","row"],children:[(0,i.jsxs)(k.Z,{flex:3,gap:0,children:[C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(M.Z,{size:"small",children:["Secrets can no longer be used in the Development Environment."," ",'Please switch this Environment Variable to the "Plaintext" type in order to edit its value.']}),(0,i.jsx)(f.L,{y:.5})]}):null,![X.t.Encrypted,X.t.Sensitive].includes(l)&&(0,i.jsxs)(i.Fragment,{children:[eC,(0,i.jsx)(f.L,{y:.5})]}),(0,i.jsx)(k.Z,{children:(0,i.jsxs)(k.Z,{direction:["column","row","row"],gap:.5,children:[(0,i.jsx)(k.Z,{flex:[X.t.Plain,X.t.Encrypted,X.t.Sensitive].includes(l)?1:.5,children:(0,i.jsx)(R.Z,{value:"Name",children:(0,i.jsx)(D.I,{disabled:l===X.t.Sensitive,id:"edit-env-name",onChange:e=>u({edited:!0,value:e.target.value}),placeholder:"EXAMPLE_NAME",value:c.value,width:"100%"})})}),l===X.t.Secret?eI:null,l===X.t.System?eP:null]})}),l===X.t.Plain?eN:null,[X.t.Encrypted,X.t.Sensitive].includes(l)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.L,{y:.5}),(0,i.jsx)(R.Z,{value:"Value",children:(0,i.jsxs)(z.O,{show:l===X.t.Encrypted&&eZ,children:[(0,i.jsx)(F.g,{disabled:l===X.t.Sensitive,onChange:e=>y((0,K.v)(e.target.value)),placeholder:"YOUR_SECRET_VALUE_GOES_HERE",rows:6,value:l===X.t.Sensitive?" ":g,width:"100%"}),l===X.t.Sensitive&&(0,i.jsxs)(v.K,{align:"center",className:ei().envVarValueSensitive,gap:2,justify:"center",children:[(0,i.jsx)(P.H,{size:16,weight:"bold"}),(0,i.jsx)("div",{className:ei().envVarValueSensitiveText,children:"Sensitive values can only be decrypted by Vercel's deployment systems"})]})]})})]}),[X.t.Encrypted,X.t.Sensitive].includes(l)?null:(0,i.jsx)(()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.L,{y:.5}),(0,i.jsx)(j.ZP,{span:!0,style:{textTransform:"uppercase",fontSize:"0.75rem",fontWeight:500,color:"var(--geist-secondary)"},children:"Environments"}),(0,i.jsx)(f.L,{y:.5}),(0,i.jsxs)(k.Z,{direction:["column","row","row"],gap:0,children:[(0,i.jsx)(H.X,{checked:I,name:"edit-form-production",onChange:()=>N(!I),children:"Production"}),(0,i.jsx)(f.L,{x:1,y:.5}),(0,i.jsx)(H.X,{checked:Z,name:"edit-form-preview",onChange:()=>$(!Z),children:"Preview"}),(0,i.jsx)(f.L,{x:1,y:.5}),(0,i.jsx)(H.X,{checked:L,disabled:l===X.t.Secret&&!C||l===X.t.Sensitive,name:"edit-form-development",onChange:()=>V(!L),children:"Development"})]})]}),{})]}),[X.t.Encrypted,X.t.Sensitive].includes(l)&&(0,i.jsx)(k.Z,{flex:2,children:(0,i.jsx)(en.Z,{checkedDevelopment:L,checkedPreview:Z,checkedProduction:I,selectedGitBranch:ep,setCheckedDevelopment:V,setCheckedPreview:$,setCheckedProduction:N,setSelectedGitBranch:eh,type:l})})]}),eo?(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(f.L,{y:1})," ",(0,i.jsx)(b.Z,{error:eo})," "]}):null,(0,i.jsx)(K.Z,{active:eg,initialSecretName:ej||c.value,onAdd:e=>{ex(!1),ef(""),eb(e),a()},onCancel:()=>{ex(!1),ef("")}})]})}var el=r(951517),eo=r(726281),ed=r(921690),ec=r(966130),eu=r(566968),ev=r(986324),ep=r(464544),eh=r(121930),em=r(662778),eg=r(691966),ex=r.n(eg);function ej(e){let{env:t,secretsMappedById:r,revealType:n,onViewEnvironmentVariable:o}=e,[u,h]=(0,s.useState)("hidden");if((0,s.useEffect)(()=>{void 0===t.decrypted||(t.decrypted&&"loading"===u?h("revealed"):t.decrypted||"revealed"!==u||h("hidden"))},[t.decrypted,u,t]),n===a.NeverShow)return(0,i.jsx)(C.Z,{text:"Additional permissions are required to reveal production environment variables values.",children:(0,i.jsx)(p.x,{className:ex().bullets,color:"gray-900",children:"•".repeat(15)})});if(n===a.AlwaysShow)return(0,i.jsx)(eS,{value:t.value});if(t.type===X.t.Secret&&r){var g;let e=null===(g=r[t.value])||void 0===g?void 0:g.name;return e?(0,i.jsx)("i",{title:`@${e}`,children:`@${e}`}):(0,i.jsx)("i",{title:t.value,children:t.value||"-"})}if(t.type===X.t.Plain)return(0,i.jsx)(S.Z,{className:(0,l.W)(ex().plaintextEnvValue,"env-var-value","geist-ellipsis"),title:t.value,children:t.value});if(t.type===X.t.Encrypted){if(t.decrypted&&!t.value)return(0,i.jsx)("i",{title:"This Environment Variable has no value",children:"Empty"});switch(u){case"revealed":return(0,i.jsxs)(v.K,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(m.z,{"aria-label":"Click to hide",className:ex().reveal,onClick:()=>h("hidden"),svgOnly:!0,title:"Click to hide",variant:"unstyled",children:(0,i.jsx)(d._,{size:16})}),(0,i.jsx)(eS,{value:t.value})]});case"hidden":case"loading":return(0,i.jsxs)(v.K,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(m.z,{"aria-label":"Click to reveal",className:ex().reveal,loading:"loading"===u,onClick:()=>{t.decrypted?h("revealed"):h("loading"),o(t)},size:"small",svgOnly:!0,title:"Click to reveal",variant:"unstyled",children:"loading"!==u&&(0,i.jsx)(c.b,{size:16})}),(0,i.jsx)(p.x,{color:"gray-900",className:ex().bullets,children:"•".repeat(15)})]})}}return t.type===X.t.Sensitive?null:(0,i.jsx)("i",{title:t.value,children:t.value})}function ef(e){var t;let{env:r,team:n,projectIdOrName:a}=e;if(r.edgeConfigId)return(0,i.jsx)(C.Z,{desktopOnly:!0,text:"This environment variable connects this project to an Edge Config",children:(0,i.jsx)(ed.r,{href:n&&a?`/${n.slug}/${a}/stores/edge-config/${r.edgeConfigId}`:n?`/dashboard/${n.slug}/stores/edge-config/${r.edgeConfigId}`:`/dashboard/stores/edge-config/${r.edgeConfigId}`,style:{color:"var(--geist-secondary)"},children:(0,i.jsx)("div",{className:ex().dataStoreIconWrapperStyles,children:(0,i.jsx)(eh.K,{size:"small",type:"edge-config"})})})});switch(null===(t=r.contentHint)||void 0===t?void 0:t.type){case"postgres-database":case"postgres-host":case"postgres-password":case"postgres-prisma-url":case"postgres-url":case"postgres-url-non-pooling":case"postgres-user":return(0,i.jsx)(ed.r,{href:n&&a?`/${n.slug}/${a}/stores/postgres/${r.contentHint.storeId}`:n?`/dashboard/${n.slug}/stores/postgres/${r.contentHint.storeId}`:`/dashboard/stores/postgres/${r.contentHint.storeId}`,style:{color:"var(--geist-secondary)"},children:(0,i.jsx)("div",{className:ex().dataStoreIconWrapperStyles,children:(0,i.jsx)(eh.K,{size:"small",type:"postgres"})})});case"blob-read-write-token":return(0,i.jsx)(ed.r,{href:n&&a?`/${n.slug}/${a}/stores/blob/${r.contentHint.storeId}`:n?`/dashboard/${n.slug}/stores/blob/${r.contentHint.storeId}`:`/dashboard/stores/blob/${r.contentHint.storeId}`,style:{color:"var(--geist-secondary)"},children:(0,i.jsx)("div",{className:ex().dataStoreIconWrapperStyles,children:(0,i.jsx)(eh.K,{size:"small",type:"blob"})})});case"redis-rest-api-read-only-token":case"redis-rest-api-token":case"redis-rest-api-url":case"redis-url":return(0,i.jsx)(ed.r,{href:n&&a?`/${n.slug}/${a}/stores/kv/${r.contentHint.storeId}`:n?`/dashboard/${n.slug}/stores/kv/${r.contentHint.storeId}`:`/dashboard/stores/kv/${r.contentHint.storeId}`,style:{color:"var(--geist-secondary)"},children:(0,i.jsx)("div",{className:ex().dataStoreIconWrapperStyles,children:(0,i.jsx)(eh.K,{size:"small",type:"redis"})})});default:return null}}function ey(e){let{env:t,onRemove:r,onSave:n,onSecretAdd:o,secretsMappedById:d,isEditing:c,setIsEditing:v,search:p,canReadProductionValues:m,onViewEnvironmentVariable:g,team:j,projectIdOrName:f,getOverriddenTargetsForSharedEnvVar:y=e=>[]}=e,b=(0,ev.dD)(),k=(0,ec.p5)(t),S=(0,eo.R)(t.updatedAt||t.createdAt,{justNowLabel:"just now"}),E=(0,s.useMemo)(()=>k?y(t):[],[t,y,k]),C=(0,s.useMemo)(()=>t?(0,i.jsxs)("span",{className:ex().varNameContainer,children:[(0,i.jsx)("span",{className:(0,l.W)(E.length?ex().overriddenEnvVar:void 0,ex().varName),style:{fontFamily:"var(--font-mono)",fontWeight:500},title:t.key,children:p?function(e,t){let r=e.split(RegExp("("+t+")","gi"));return r.map((e,r)=>e.toLowerCase()===t.toLowerCase()?(0,i.jsx)("span",{className:ex().suggestionHighlight,children:e},r):e)}(t.key,p):t.key},t.id),(0,i.jsx)(ef,{env:t,projectIdOrName:f,team:j}),"sensitive"===t.type?(0,i.jsx)(h.C,{size:"sm",style:{marginLeft:"8px",backgroundColor:"var(--geist-secondary-lighter)",color:"var(--geist-secondary-dark)"},children:"Sensitive"}):null]}):null,[t,E.length,f,p,j]),I=t.target===X.r.Production||Array.isArray(t.target)&&t.target.includes(X.r.Production),P=(0,s.useMemo)(()=>{if(!t.contentHint)return null;switch(t.contentHint.type){case"postgres-database":case"postgres-host":case"postgres-password":case"postgres-prisma-url":case"postgres-url":case"postgres-url-non-pooling":case"postgres-user":return(0,i.jsx)(w.sN,{href:j&&f?`/${j.slug}/${f}/stores/postgres/${t.contentHint.storeId}/projects`:j?`/dashboard/${j.slug}/stores/postgres/${t.contentHint.storeId}/projects`:`/dashboard/stores/postgres/${t.contentHint.storeId}/projects`,isLink:!0,children:"Manage Postgres Connection"});case"blob-read-write-token":return(0,i.jsx)(w.sN,{href:j&&f?`/${j.slug}/${f}/stores/blob/${t.contentHint.storeId}/projects`:j?`/dashboard/${j.slug}/stores/blob/${t.contentHint.storeId}/projects`:`/dashboard/stores/blob/${t.contentHint.storeId}/projects`,isLink:!0,children:"Manage Blob Connection"});case"redis-rest-api-read-only-token":case"redis-rest-api-token":case"redis-rest-api-url":case"redis-url":return(0,i.jsx)(w.sN,{href:j&&f?`/${j.slug}/${f}/stores/kv/${t.contentHint.storeId}/connections`:j?`/dashboard/${j.slug}/stores/kv/${t.contentHint.storeId}/connections`:`/dashboard/stores/kv/${t.contentHint.storeId}/connections`,isLink:!0,children:"Manage KV Connection"});default:return null}},[t.contentHint,f,j]),N=(0,s.useMemo)(()=>k?f?"Unlink from this Project":"Delete":"Remove",[k,f]);return(0,i.jsxs)(x.JH,{className:ex().resultRow,disabledDotMenuTooltip:(0,i.jsx)(i.Fragment,{children:"Additional permissions are required to manage production environment variables."}),editing:c,footer:c?j&&k?(0,i.jsx)(em.vl,{envVar:t,isEditing:c,onCancel:()=>v(!1),onRemove:()=>{null==r||r(t)},onSave:e=>{v(!1),n(e)},teamId:j.id}):(0,i.jsx)(es,{env:t,onDiscard:()=>v(!1),onSave:e=>{v(!1),n(e)},onSecretAdd:()=>{null==o||o()}},t.id):null,indent:!1,isDotMenuDisabled:!m&&I,menuItems:P||(0,i.jsxs)(i.Fragment,{children:[!(k&&f)&&(0,i.jsx)(w.sN,{"data-testid":(0,er.C)("env-vars-table","menu-item","edit",t.key),onClick:()=>v(!0),children:"Edit"}),(0,i.jsx)(w.sN,{onClick:()=>{null==r||r(t)},style:{color:"var(--geist-error)"},children:N})]}),thumbnail:(0,i.jsx)(x.bL,{size:24,children:(0,i.jsx)(T,{env:t})}),children:[(0,i.jsx)(x.Sn,{className:ex().key,description:E.length?(0,i.jsxs)("span",{children:[(0,i.jsx)(u.u,{align:"bottom",size:16,style:{marginRight:"4px"}}),E.length===t.target.length?"Overridden by Project":`Overridden by ${e_({target:E})}`]}):e_(t),title:C}),t.type===X.t.Sensitive&&b?null:(0,i.jsx)(x.Sn,{children:(0,i.jsx)(ej,{env:t,onViewEnvironmentVariable:g,revealType:!I||m?a.Encrypted:a.NeverShow,secretsMappedById:d})}),(0,i.jsx)(x.Sn,{avatar:t.updatedBy||t.createdBy?(0,i.jsx)(_.qE,{size:24,uid:t.updatedBy||t.createdBy}):null,className:ex().time,description:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:ex().timeAgoText,children:[t.updatedBy?"Updated":"Added","\xa0"]}),S]}),right:!0})]},t.id)}function eb(e){var t;let{envs:r,onRemove:n,onSave:a,secretsData:l,onSecretAdd:o,search:d,isLoading:c,withSecrets:u,withEnvs:v,canReadProductionValues:p,disabled:h,onViewEnvironmentVariable:m,textConfig:g,getOverriddenTargetsForSharedEnvVar:y=e=>[]}=e,b=(0,eu.ic)(),{isReady:S,team:E}=(0,G.t7)(),[C,I]=(0,s.useState)(null),P=(null==l?void 0:null===(t=l.secrets)||void 0===t?void 0:t.reduce((e,t)=>(e[t.uid]=t,e),{}))??{},N=!S||c||v&&!Array.isArray(r)||u&&!l;return N?(0,i.jsx)("div",{children:["p1","p2"].map(e=>(0,i.jsxs)(x.JH,{className:ex().resultRow,menuItems:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.sN,{children:"Edit"}),(0,i.jsx)(w.sN,{children:"Remove"})]}),placeholder:!0,thumbnail:(0,i.jsx)(x.bL,{size:30}),children:[(0,i.jsx)(x.Sn,{description:"",descriptionSkeletonWidth:"50%",title:"",titleSkeletonWidth:"40%",width:"40%"}),(0,i.jsx)(x.Sn,{description:"",descriptionSkeletonWidth:"80%",title:"",titleSkeletonWidth:"20%",width:"27%"}),(0,i.jsx)(x.Sn,{avatar:(0,i.jsx)(_.qE,{size:24}),description:"",descriptionSkeletonWidth:"60%",right:!0})]},e))}):h?(0,i.jsx)(ep._,{resource:"Environment Variables",team:E}):d&&(null==r?void 0:r.length)===0?(0,i.jsxs)(k.Z,{center:!0,className:ex().empty,"data-testid":(0,er.C)("env-vars-table","container","empty"),children:[(0,i.jsx)(j.ZP,{center:!0,h6:!0,noMargin:!0,children:"No Results Found"}),(0,i.jsx)(f.L,{y:.5}),(0,i.jsxs)(j.ZP,{center:!0,noMargin:!0,p:!0,preset:"body-2",style:{color:"var(--accents-6)",wordBreak:"break-word"},children:['Your search for "',d,'" did not return any results.']})]}):(null==r?void 0:r.length)===0?(0,i.jsxs)(k.Z,{center:!0,className:ex().empty,children:[(0,i.jsx)(j.ZP,{center:!0,h6:!0,noMargin:!0,children:(null==g?void 0:g.emptyState.title)??"No Environment Variables Added"}),(0,i.jsx)(f.L,{y:.5}),(0,i.jsx)(j.ZP,{center:!0,noMargin:!0,p:!0,preset:"body-2",children:(null==g?void 0:g.emptyState.description)??"Add Environment Variables to Production, Preview, and Development environments, including branches in Preview."})]}):(0,i.jsx)("div",{"data-testid":(0,er.C)("env-vars-table","container"),children:null==r?void 0:r.map(e=>(0,i.jsx)(ey,{canReadProductionValues:p,env:e,getOverriddenTargetsForSharedEnvVar:y,isEditing:e.id===C,onRemove:n,onSave:a,onSecretAdd:o,onViewEnvironmentVariable:m,projectIdOrName:b,search:d,secretsMappedById:P,setIsEditing:t=>{m(e),I(t?e.id:null)},team:E},e.id))})}function e_(e){let t=(Array.isArray(e.target)?e.target:[e.target||""]).map(el.Z).sort().join(", ");return e.gitBranch?`${t} on ${e.gitBranch}`:t}function ek(e,t){let[r,n]=(0,s.useState)(!1),[a,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1),[u,v]=(0,s.useState)(null),p=(0,E.e1)(),{team:h}=(0,G.t7)(),m=(0,s.useCallback)(e=>{v(e),n(!0)},[]),g=(0,s.useCallback)(()=>{n(!1)},[]),x=(0,s.useCallback)(()=>{c(!1),l(null),v(null)},[]),_=(0,s.useCallback)(async()=>{if(u){c(!0);try{await (0,ec.Y0)({envVars:[u],projectId:e,teamId:null==h?void 0:h.id}),g(),p.success("Removed Environment Variable successfully."),await (null==t?void 0:t())}catch(e){l((0,o.SC)(e))}finally{c(!1)}}},[u,p,h,e,g,t]),k=(0,s.useMemo)(()=>(0,i.jsxs)(y.Modal,{active:r,onAnimationDone:x,onClickOutside:g,children:[(0,i.jsxs)(y.Body,{children:[(0,i.jsx)("header",{style:{textAlign:"center"},children:(0,i.jsx)(j.ZP,{Component:"h1",h3:!0,children:"Remove Environment Variable"})}),(0,i.jsxs)("main",{style:{textAlign:"center"},children:[(0,i.jsx)(j.ZP,{preset:"body-2",children:"The following Environment Variable will be permanently deleted. Are you sure you want to continue?"}),(0,i.jsxs)(j.ZP,{preset:"body-2",style:{wordWrap:"break-word"},children:['"',u?u.key:"",'"']})]}),a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.L,{y:1}),(0,i.jsx)(b.Z,{error:a})]}):null]}),(0,i.jsxs)(y.Actions,{children:[(0,i.jsx)(y.Action,{onClick:g,type:"secondary",children:"Cancel"}),(0,i.jsx)(y.Action,{loading:d,onClick:_,children:"Remove"})]})]}),[r,g,x,_,u,d,a]);return{modal:k,open:m,close:g}}function eS(e){let{value:t}=e,[r,n]=(0,s.useState)("Click to copy");return(0,i.jsx)(C.Z,{center:!1,cursor:"pointer",delay:!1,desktopOnly:!0,padding:"var(--geist-gap-quarter)",position:"top",style:{minWidth:"0"},text:r,children:(0,i.jsx)("button",{className:ex().encryptedEnvValue,onBlur:()=>{"Copied!"===r&&setTimeout(()=>n("Click to copy"),500)},onClick:()=>{(0,g.v)(t),n("Copied!")},onMouseOut:()=>{"Copied!"===r&&setTimeout(()=>n("Click to copy"),500)},type:"button",children:(0,i.jsx)(S.Z,{className:(0,l.W)("env-var-value","geist-ellipsis"),noWrap:!0,title:t,children:t})})})}(n=a||(a={}))[n.Encrypted=0]="Encrypted",n[n.AlwaysShow=1]="AlwaysShow",n[n.NeverShow=2]="NeverShow"},353659:function(e,t,r){"use strict";r.d(t,{V:function(){return l}});var n=r(397458),a=r(331049),i=r(295489),s=r.n(i);function l(){return(0,n.jsx)("div",{"aria-hidden":!0,children:(0,n.jsx)(a.Z,{className:s().fullWidthHR,margin:0})})}},623762:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(397458),a=r(652983),i=r(14517),s=r(601679),l=r(418519),o=r.n(l);function d(e){let{items:t,selectedItems:r,hideSelectedItems:l,placeholderText:d,OptionComponent:c,search:u,setSearch:v,onChange:p,ListFooterComponent:h,disabled:m,size:g,classNames:x}=e,[j,f]=(0,a.useState)(!1),y=(0,a.useMemo)(()=>l?t.filter(e=>!r.find(t=>e.id===t.id)):t,[l,t,r]);return(0,n.jsxs)(s.Z,{className:(0,i.W)(o().portal,null==x?void 0:x.combobox),disabled:m,onChange:p,onChangeOpen:f,placeholder:d,size:g,value:u,children:[(0,n.jsx)(s.Z.Input,{className:(0,i.W)(o().themeBorder,o().inputBox,{[o().popoverShadow]:j},null==x?void 0:x.input),onChange:e=>{v(e.target.value)}}),(0,n.jsx)(s.Z.List,{ListFooterComponent:h,avoidCollisions:!1,className:(0,i.W)(o().projectOptionList,o().themeBorder,o().popoverBottom,o().popoverShadow,null==x?void 0:x.list),children:y.map(e=>(0,n.jsx)(c,{item:e},e.id))})]})}},662778:function(e,t,r){"use strict";r.d(t,{xJ:function(){return eL},Rn:function(){return e$},vl:function(){return eZ}});var n=r(397458),a=r(652983),i=r(905839),s=r(446118),l=r(235551),o=r(68839),d=r(9055),c=r(832191),u=r(465805),v=r(277346),p=r(306054),h=r(761891),m=r(66818),g=r(611648),x=r(495142),j=r(539142),f=r(502383);async function y(e){let{projectId:t,kvs:r,target:n,type:a=f.t.Encrypted,teamId:i}=e;return(0,x.I)(`${g.Nc}${(0,j.c)({teamId:i})}`,{method:"POST",body:JSON.stringify({evs:r,projectId:t,target:n,type:a}),throwOnHTTPError:!0})}var b=r(234113),_=r(927628),k=r(672689),S=r(384157),w=r(571445),E=r(14517),C=r(572465),I=r(760093),P=r(693147),N=r(136566),Z=r(331049),$=r(568841),L=r(523154),V=r.n(L),B=r(601679),T=r(530333),A=r(135635),z=r(986324),H=r(633590),O=r.n(H);function R(e){let{dispatch:t,state:r,sensitiveEnvVarFlagBoolean:i,mustBeSensitive:s,isEditing:l=!1,teamId:d,variant:u,gitBranch:v}=e,{can:p,isLoading:m}=(0,h.ZP)({teamId:d}),g=(0,z.Av)()||"project"===u&&!i,x=r.target,j=x.production||x.preview,f=!!(s&&!l?j:r.sensitive),y=!1;i&&(y=!!(s&&!l?x.development:r.sensitive&&x.development));let b=p(h.aU.Create,"project"===u?h._z.ProjectEnvVarsProduction:h._z.SharedEnvVarsProduction);return(0,a.useEffect)(()=>{!m&&(b||t({type:"update_target",payload:{target:{production:!1}}}),(r.sensitive||s)&&j&&t({type:"update_target",payload:{target:{development:!1}}}))},[b,m,s,r.sensitive,j,x.production,t]),(0,n.jsxs)(o.K,{gap:g?1:0,children:[(0,n.jsx)(N.Z,{value:"Environment"}),(0,n.jsxs)(o.K,{direction:g?"column":"row",gap:g?0:3,style:{lineHeight:g?"inherit":"2rem"},children:[(0,n.jsx)(o.K,{direction:"row",justify:"space-between",children:(0,n.jsx)($.Z,{disableTriggers:m||b,text:"Additional permissions are required to create production environment variables.",children:(0,n.jsx)(I.X,{checked:b&&x.production,disabled:m||!b||y,name:"add-form-production",onChange:()=>t({type:"update_target",payload:{target:{production:!x.production}}}),children:"Production"})})}),(0,n.jsx)(Z.Z,{margin:10}),(0,n.jsxs)(o.K,{direction:g?"column":"row",gap:g?2:4,children:[(0,n.jsxs)(o.K,{align:"center",direction:"row",gap:4,children:[(0,n.jsx)(I.X,{checked:x.preview,disabled:y,name:"add-form-preview",onChange:()=>t({type:"update_target",payload:{target:{preview:!x.preview}}}),children:"Preview"}),"project"===u&&!g&&(0,n.jsx)(M,{checkedState:x,dispatch:t,gitBranch:v}),"project"===u&&(0,n.jsx)(c.z,{className:(0,E.W)(V().link,V().highlight,V().external,O().customBranchButton),onClick:()=>{t({type:"update_target",payload:{target:{gitBranch:!x.gitBranch}}})},typeName:"button",variant:"unstyled",children:x.gitBranch?"Cancel":"Select custom branch"})]}),"project"===u&&g?(0,n.jsx)(M,{checkedState:x,dispatch:t,gitBranch:v}):null]}),(0,n.jsx)(Z.Z,{margin:10}),(0,n.jsx)(I.X,{checked:x.development,disabled:f,name:"add-form-development",onChange:()=>t({type:"update_target",payload:{target:{development:!x.development}}}),children:(0,n.jsx)($.Z,{disableTriggers:!i||!f,text:"Sensitive environment variables cannot be created in the Development environment.",children:"Development"})})]})]})}function W(e){let t=[];return e.development&&t.push(f.r.Development),e.preview&&t.push(f.r.Preview),e.production&&t.push(f.r.Production),t}function M(e){var t;let{gitBranch:r,checkedState:a,dispatch:i}=e,s=null===(t=(0,P.U)())||void 0===t?void 0:t.project,{data:l}=(0,_.PY)(s),{teamSlug:d}=(0,A.t7)(),c=null==l?void 0:l.id,{data:u}=(0,T.h)(c),v=(u||[]).filter(Boolean).map(e=>e.ref);return a.gitBranch?(null==l?void 0:l.link)?(0,n.jsx)(o.K,{direction:"row",gap:4,children:(0,n.jsxs)(B.Z,{className:O().selectGitBranch,onChange:e=>i({type:"set_git_branch_name",payload:{branchName:e||void 0}}),placeholder:"All Preview Branches",size:"small",value:r||null,children:[(0,n.jsx)(B.Z.Input,{onChange:e=>{i({type:"set_git_branch_name",payload:{branchName:e.target.value||void 0}})}}),(0,n.jsxs)(B.Z.List,{emptyMessage:"No preview branches",children:[(0,n.jsx)(n.Fragment,{children:r&&!v.find(e=>e===r)?(0,n.jsx)(B.Z.Option,{displayValue:!0,value:r||"",children:`Use "${r}"`}):null}),(0,n.jsx)(n.Fragment,{children:v.map(e=>{var t;let r=String(null===(t=l.link)||void 0===t?void 0:t.productionBranch),a=r===e;return a?null:(0,n.jsx)(B.Z.Option,{disabled:a,value:e,children:e},e)})})]})]})}):(0,n.jsx)(o.K,{direction:"row",gap:4,children:(0,n.jsx)(C.Z,{as:`/${d}/${null==l?void 0:l.name}/settings/git`,href:"/[teamSlug]/[project]/settings/git",size:"small",type:"secondary",children:"Connect Git Repository"})}):null}var D=r(338859),F=r(850240),K=r(557385),U=r(164481),J=r(284997),q=r(655122),X=r(36012),Y=r(608034),G=r(189362),Q=r(566968),ee=r(331350),et=r.n(ee),er=r(623762);function en(e){let{dispatch:t,selectedProjects:r,SWRDataToWaitFor:a}=e,{data:i}=(0,q.G)(),{account:s}=(0,K.Z)();return(0,n.jsx)(o.K,{direction:"column",children:(0,n.jsx)(N.Z,{value:"Link to Projects",children:(0,n.jsx)(o.K,{flex:1,gap:4,children:(0,n.jsxs)(X.E,{data:[s,i,...a],fallback:(0,n.jsx)(F.O,{height:40,width:"100%"}),children:[(0,n.jsx)(ei,{selectProject:e=>{t({type:"add_project",payload:{project:e}})},selectedProjects:r}),!!r.length&&(0,n.jsx)(o.K,{flex:1,children:r.map(e=>(0,n.jsx)(ea,{project:e,removeProject:()=>{t({type:"remove_project",payload:{id:e.id}})}},e.id))})]})})})})}function ea(e){let{project:t,removeProject:r}=e,{domain:a,isLoading:i}=(0,Y.s)(t.id),s=(0,Q.mk)(t);return(0,n.jsxs)(v.JH,{actions:(0,n.jsx)(c.z,{"aria-label":"remove row",className:(0,E.W)(et().removeButton),onClick:()=>{r(t)},svgOnly:!0,type:"tertiary",children:(0,n.jsx)(D.S,{size:16})}),className:et().selectedProjectEntity,thumbnail:(0,n.jsx)(v.bL,{size:24,wrap:!0,children:s?(0,n.jsx)(G.A,{framework:s,size:24}):null}),children:[(0,n.jsx)(v.Sn,{className:et().bold,title:t.name}),(0,n.jsx)(v.Sn,{active:!i,description:null==a?void 0:a.name})]},t.id)}function ei(e){let{selectedProjects:t,selectProject:r}=e,[i,s]=(0,a.useState)(""),[l,o]=(0,J.xk)({limit:20,latestDeployments:0,search:i},{},!1,!0);if(void 0===l.data)return(0,n.jsx)(F.O,{height:40,width:"100%"});let{projects:d}=o;return(0,n.jsx)(er._,{ListFooterComponent:(0,n.jsx)(U.Z,{swr:o}),OptionComponent:es,classNames:{list:et().projectList},hideSelectedItems:!0,items:d,onChange:e=>{let t=d.find(t=>t.name===e)??null;t&&r(t)},placeholderText:"Search for a Project to link to...",search:i,selectedItems:t,setSearch:s})}function es(e){let{item:t}=e,{domain:r}=(0,Y.s)(t.id),a=(0,Q.mk)(t);return(0,n.jsx)(B.Z.Option,{prefix:a?(0,n.jsx)(G.A,{framework:a,size:24}):void 0,suffix:(null==r?void 0:r.name)??void 0,truncateSuffix:!0,value:t.name,children:(0,n.jsx)("span",{className:et().projectName,children:t.name})})}var el=r(565893),eo=r(118838),ed=r(620473),ec=r(57325),eu=r(131555),ev=r(875699),ep=r(303477),eh=r(926829),em=r(684624),eg=r(607974),ex=r(372962);let ej=(0,a.forwardRef)((e,t)=>{let{disabled:r,label:i,resize:s,width:l,error:d,type:u,size:v,className:h,wrapperClassName:m,spellCheck:g=!1,autoCapitalize:x="off",autoComplete:j="off",autoCorrect:f="off",isEditing:y=!1,isSensitive:b=!1,inputType:_,...k}=e,S=i?N.Z:"label",w={...i?{value:i,withInput:!0,wrapperClassName:m}:{className:m}},C=(0,eg.B)()||r,I=(0,ep.M)("textarea-"),P=(0,eh.o)(d?"error":u),[Z,$]=(0,a.useState)(!!b);(0,a.useEffect)(()=>{$(!!b)},[b]);let L=Z||b&&y,V=!!(b&&!y)&&(0,n.jsx)(c.z,{"aria-label":"toggle sensitive value visibility",className:(0,E.W)(et().viewValueButton),onClick:()=>$(!Z),svgOnly:!0,type:"tertiary",typeName:"button",children:Z?(0,n.jsx)(el.b,{size:16}):(0,n.jsx)(eo._,{size:16})});return(0,n.jsxs)(S,{"data-version":"v1",...w,children:[(0,n.jsxs)(o.K,{className:(0,E.W)(et().textareaStack,L?et().textAreaHeight:""),direction:"row",children:[(0,n.jsx)("div",{className:(0,E.W)(et().container,P,et().textareaWrapper),children:L?(0,n.jsx)(eu.I,{...k,autoCapitalize:x,autoComplete:j,autoCorrect:f,className:(0,E.W)(et().textarea,P,{[et().large]:"large"===v,[et().small]:"small"===v},h,et().textareaInput),disabled:C,prefix:b&&y?(0,n.jsx)(ed.H,{size:16,weight:"bold"}):null,prefixStyling:!1,ref:t,spellCheck:g,typeName:_,width:l??"100%"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("pre",{"aria-hidden":"true",className:et().textareaLayout,style:{width:l??"100%"},children:`${0===k.value.length?" ":k.value.replace(/\n$/,"\n ")}`}),(0,n.jsx)("textarea",{...k,autoCapitalize:x,autoComplete:j,autoCorrect:f,className:(0,E.W)(et().textarea,P,{[et().large]:"large"===v,[et().small]:"small"===v},h,et().textareaInput),disabled:C,ref:t,spellCheck:g,style:{resize:s,width:l}})]})}),V]}),d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ev.L,{y:.5}),(0,n.jsx)(p.Z,{"data-testid":k["data-testid"]?(0,em.C)(k["data-testid"],"error"):void 0,error:d,id:`${I}-error`,size:v,style:{width:l}})]}):null]})});function ef(e){let{kvs:t,dispatch:r,enableBulk:a=!1,isEditing:i=!1,isLoading:s=!1,firstInputRef:l,error:d,isSensitive:u}=e;return(0,n.jsx)(F.O,{show:s,children:(0,n.jsxs)(o.K,{direction:"column",gap:3,children:[t.map((e,t,s)=>(0,n.jsx)(ey,{dispatch:r,enableBulk:a,index:t,inputRef:0===t?l:void 0,isEditing:i,isErrorState:null==d?void 0:d.envVarIds.includes(e.tempId),isSensitive:u,kv:e},e.tempId)),a?(0,n.jsx)(o.K,{align:"stretch",direction:"row",flex:"1",gap:3,justify:"flex-start",children:(0,n.jsx)(c.z,{onClick:()=>r({type:"add_new_kv"}),prefix:(0,n.jsx)(ec.F,{}),size:"small",type:"secondary",typeName:"button",children:"Add another"})}):null]})})}function ey(e){let{inputRef:t,dispatch:r,index:i,kv:s,enableBulk:l=!1,isEditing:d=!1,isErrorState:u,isSensitive:v}=e,[p,h]=(0,a.useState)(!!v);return(0,a.useEffect)(()=>{h(!!v)},[v]),(0,n.jsxs)(o.K,{align:"stretch",direction:"row",flex:"1",gap:3,justify:"space-evenly",children:[(0,n.jsxs)(o.K,{flex:1,children:[(0,n.jsx)(eu.I,{"aria-label":"shared environment key",className:et().monoInput,disabled:!!v&&d,label:t?"key":null,maxLength:256,onChange:e=>r({type:"update_kv",payload:{index:i,update:{key:e.target.value}}}),onPaste:e=>{if(!l)return;let t=Object.entries((0,ex.y)(e.clipboardData.getData("text")));0!==t.length&&(e.preventDefault(),r({type:"import_file",payload:{fileData:e.clipboardData.getData("text"),insertAtIndex:i}}))},placeholder:"e.g. CLIENT_KEY",ref:t,type:u?"error":"default",value:s.key}),(0,n.jsx)("div",{className:et().inputSpacer})]}),(0,n.jsx)(o.K,{flex:1,children:(0,n.jsx)(ej,{"aria-label":"shared environment value",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",disabled:!!v&&d,inputType:p&&!d?"password":"text",isEditing:d,isSensitive:v,label:t?"value":null,onChange:e=>r({type:"update_kv",payload:{index:i,update:{value:e.target.value}}}),type:u?"error":"default",value:v&&d?"This value is sensitive":s.value})}),(0,n.jsx)(o.K,{align:"center",className:(0,E.W)(et().inputBoxButtons),direction:"row",flex:0,gap:1,justify:"center",children:l?(0,n.jsx)(c.z,{"aria-label":"remove row",className:(0,E.W)(et().removeButton,{[et().first]:!!t}),onClick:()=>r({type:"remove_kv",payload:{id:s.tempId}}),svgOnly:!0,type:"tertiary",typeName:"button",children:(0,n.jsx)(D.S,{size:16,style:{flexShrink:0}})}):null})]})}ej.displayName="Textarea";var eb=r(353659),e_=r(261422),ek=r.n(e_),eS=r(198667);let ew={kvs:[{key:"",value:"",tempId:ek()("env_")}],projects:[],target:{development:!0,production:!0,preview:!0,gitBranch:!1},error:void 0,isProcessing:!1,gitBranch:""},eE=(e,t)=>(0,eS.Uy)(e,e=>{switch(t.type){case"add_new_kv":return e.kvs=[...e.kvs,{key:"",value:"",tempId:ek()("env_")}],e;case"remove_kv":return e.kvs=e.kvs.filter(e=>e.tempId!==t.payload.id),0===e.kvs.length&&(e.kvs=[{key:"",value:"",tempId:ek()("env_")}]),e;case"update_kv":return e.kvs[t.payload.index]={...e.kvs[t.payload.index],...t.payload.update},e.error&&(e.error.envVarIds=e.error.envVarIds.filter(r=>r!==e.kvs[t.payload.index].tempId)),e;case"prefill_form":{let{envVar:r}=t.payload;return e.kvs=[{key:r.key,value:r.value,tempId:r.id}],e.target=function(e){let t={production:e.target.includes(f.r.Production),preview:e.target.includes(f.r.Preview),development:e.target.includes(f.r.Development),gitBranch:!!e.gitBranch};return t}(r),e.gitBranch=r.gitBranch||"",e.projects=r.projects??[],e.sensitive=r.type===f.t.Sensitive,e}case"update_target":return e.target={...e.target,...t.payload.target},e;case"add_project":{let{project:r}=t.payload;return e.projects.find(e=>e.id===r.id)||(e.projects=[...e.projects,r]),e}case"remove_project":{let{id:r}=t.payload;return e.projects=e.projects.filter(e=>e.id!==r),e}case"error":return e.error={errorObject:t.payload.error,envVarIds:e.kvs.map(e=>e.tempId)},e;case"processing":return e.isProcessing=t.payload.isProcessing,e;case"sensitive":return e.sensitive=t.payload.sensitive,e;case"reset":return e.kvs=ew.kvs,e.target=ew.target,e.projects=ew.projects,e.error=ew.error,e.sensitive=ew.sensitive,e;case"import_file":{let{fileData:r,insertAtIndex:n}=t.payload,a=Object.entries((0,ex.y)(r));if(0===a.length)return e;return e.kvs=[...e.kvs.slice(0,n),...a.map(e=>{let[t,r]=e;return{key:t,value:r,tempId:ek()("env_")}}),...e.kvs.slice(n+1)],e}case"set_git_branch_name":{let{branchName:r}=t.payload;return e.gitBranch=r,e}case"form_submitted":{let{response:r}=t.payload;if(0===r.failed.length)return e.kvs=ew.kvs,e.target=ew.target,e.projects=ew.projects,e.error=ew.error,e;let n=e.kvs.filter(e=>!r.created.find(t=>t.key===e.key));return e.kvs=n,e.error={errorObject:r.failed[0].error,envVarIds:n.map(e=>e.tempId)},e}default:return e}});var eC=r(496952),eI=r(526810),eP=r(921690);function eN(e){let{dispatch:t,state:r,sensitiveEnvVarFlagBoolean:i,mustBeSensitive:s}=e,l=!1;return i&&(l=!!(s||r.target.development)),(0,a.useEffect)(()=>{s&&t({type:"sensitive",payload:{sensitive:!r.target.development}})},[s,r.target.development]),(0,n.jsxs)(o.K,{align:"start",gap:0,children:[(0,n.jsx)(N.Z,{value:"Sensitive"}),(0,n.jsxs)(o.K,{align:"start",gap:2,children:[(0,n.jsxs)(d.x,{children:["If enabled, you and your team will not be able to read the values after creation."," ",(0,n.jsx)(eP.r,{external:!0,href:"/docs/concepts/projects/sensitive-environment-variables",type:"highlight",children:"Learn more"})]}),(0,n.jsx)($.Z,{disableTriggers:!r.target.development,text:"Sensitive environment variables cannot be created in the Development environment.",children:(0,n.jsx)(eI.Z,{"aria-labelledby":"label-for-sensitive-toggle",checked:!!r.sensitive,direction:"switch-first",disabled:l,name:"add-form-sensitive",onChange:()=>{t({type:"sensitive",payload:{sensitive:!r.sensitive}}),!1===r.sensitive&&t({type:"update_target",payload:{target:{development:!1}}})},size:"large",children:(0,n.jsxs)(d.x,{id:"label-for-sensitive-toggle",weight:400,children:[r.sensitive?"Enabled":"Disabled",s&&r.sensitive?(0,n.jsx)($.Z,{text:"A team admin has enforced the creation of sensitive environment variables.",children:(0,n.jsx)(eC.C,{size:"sm",style:{marginLeft:"8px",transform:"translateY(-1px)",backgroundColor:"var(--geist-secondary-lighter)",color:"var(--geist-secondary-dark)"},variant:l?"gray":"blue",children:"Enforced"})}):null]})})})]})]})}function eZ(e){let{isEditing:t,envVar:r,teamId:i,onSave:s,onCancel:l}=e,{can:o,isLoading:d}=(0,h.ZP)({teamId:i}),u=o(h.aU.Update,h._z.SharedEnvVars),v=(0,m.e1)(),{data:p,isLoading:g}=(0,_.Z0)(r.projectId),[x,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{!g&&(r.type===f.t.Sensitive||r.decrypted)&&j({...r,projects:p})},[p,r,g]);let y=(0,a.useCallback)(e=>(0,b.PN)({envVar:r,payload:{...e.kvs[0],projectId:e.projects.map(e=>e.id),target:W(e.target)},teamId:i}),[r,i]);return(0,n.jsx)(eV,{arePermissionsLoading:d,bulkEnvVarEnabled:!1,canCreateSharedEnvVars:u,envVar:x,formSubmit:y,isEditing:t,onSave:e=>{v.success("Updated Shared Environment Variable successfully."),s(e)},secondaryAction:(0,n.jsx)(c.z,{onClick:l,size:"small",type:"secondary",children:"Cancel"}),teamId:i,variant:"shared"})}function e$(e){let{teamId:t,onSave:r}=e,{isReady:i,value:s}=(0,S.We)(),{can:u,isLoading:v}=(0,h.ZP)({teamId:t}),p=u(h.aU.Create,h._z.SharedEnvVars),g=(0,m.e1)(),x=(0,a.useRef)(null),j=(0,a.useCallback)(e=>y({kvs:e.kvs,projectId:e.projects.map(e=>e.id),target:W(e.target),teamId:t,type:e.sensitive?f.t.Sensitive:f.t.Encrypted}),[t]);return(0,n.jsx)(eV,{arePermissionsLoading:v,bulkEnvVarEnabled:!!(i&&s),canCreateSharedEnvVars:p,destructiveAction:i&&s?(0,n.jsxs)(o.K,{align:"center",direction:"row",gap:3,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{accept:"env","aria-hidden":!0,multiple:!1,ref:x,style:{display:"none"},type:"file"}),(0,n.jsx)(c.z,{disabled:!x.current,onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},prefix:(0,n.jsx)(l.U,{}),size:"small",type:"secondary",typeName:"button",children:"Import"})]}),(0,n.jsxs)(d.x,{color:"gray-900",children:[(0,n.jsx)("strong",{children:"TIP:"})," Paste a .env above to populate the form"]})]}):null,fileUploadRef:x,formSubmit:j,onSave:e=>{g.success("Added Shared Environment Variable successfully."),null==r||r(e)},teamId:t,variant:"shared"})}function eL(e){let{teamId:t,onSave:r}=e,{project:i}=(0,s.useRouter)().query,{data:u}=(0,_.PY)(i),v=null==u?void 0:u.id,{can:p,isLoading:g}=(0,h.ZP)({teamId:t}),{isReady:x,value:j}=(0,S.We)(),y=p(h.aU.Create,h._z.ProjectEnvVars),b=(0,m.e1)(),w=(0,a.useRef)(null),E=(0,a.useCallback)(e=>{let r=W(e.target);if(void 0===v)throw Error("Couldn't find project");return(0,k.mT)(v,e.kvs.map(t=>({name:t.key,value:t.value,target:r,type:e.sensitive?f.t.Sensitive:f.t.Encrypted,gitBranch:e.target.gitBranch&&e.gitBranch?e.gitBranch:void 0})),t)},[v,t]);return(0,n.jsx)(eV,{arePermissionsLoading:g,bulkEnvVarEnabled:!!(x&&j),canCreateSharedEnvVars:y,destructiveAction:x&&j?(0,n.jsxs)(o.K,{align:"center",direction:"row",gap:3,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{accept:"env","aria-hidden":!0,multiple:!1,ref:w,style:{display:"none"},type:"file"}),(0,n.jsx)(c.z,{disabled:!w.current,onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},prefix:(0,n.jsx)(l.U,{}),size:"small",type:"secondary",typeName:"button",children:"Import"})]}),(0,n.jsxs)(d.x,{color:"gray-900",children:[(0,n.jsx)("strong",{children:"TIP:"})," Paste a .env above to populate the form"]})]}):null,fileUploadRef:w,formSubmit:E,onSave:e=>{b.success("Added Environment Variable successfully."),null==r||r(e)},teamId:t,variant:"project"})}function eV(e){let{formSubmit:t,onSave:r,isEditing:s,canCreateSharedEnvVars:l,arePermissionsLoading:d,bulkEnvVarEnabled:h,envVar:g,secondaryAction:x,destructiveAction:j,teamId:y,fileUploadRef:b,variant:_}=e,[k,S]=(0,a.useReducer)(eE,ew),{team:E,isTeamReady:C,isLoading:I,sensitiveEnvVarFlagBoolean:P}=(0,w.bM)(),N=C&&!I&&P&&(0,w.ry)(null==E?void 0:E.sensitiveEnvironmentVariablePolicy),Z=(0,a.useRef)(null),$=(0,a.useRef)(null),L=(0,m.e1)();(0,a.useEffect)(()=>{let e=null==b?void 0:b.current;if(e)return document.addEventListener("dragenter",t),document.addEventListener("dragover",r),document.addEventListener("dragleave",n),document.addEventListener("drop",s),e.addEventListener("change",i),()=>{document.removeEventListener("dragenter",t),document.removeEventListener("dragover",r),document.removeEventListener("dragleave",n),document.removeEventListener("drop",s),e.removeEventListener("change",i)};function t(e){var t;$.current&&(null===(t=e.dataTransfer)||void 0===t?void 0:t.items[0].kind)==="file"&&$.current.classList.add("drag-enter")}function r(e){$.current&&e.target===$.current&&(e.preventDefault(),$.current.classList.add("drag-over"))}function n(e){$.current&&e.target===$.current&&($.current.classList.remove("drag-over"),$.current.classList.remove("drag-enter"))}function a(e){if(!e||"text/plain"!==e.type&&""!==e.type){L.error("Please upload a valid env file");return}let t=new FileReader;t.onload=e=>{var t;let r=null===(t=e.target)||void 0===t?void 0:t.result;r&&S({type:"import_file",payload:{fileData:r.toString(),insertAtIndex:k.kvs.length-1}})},t.readAsText(e)}function i(e){var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];a(r)}function s(e){if($.current){if(e.target===$.current){var t;e.preventDefault();let r=null===(t=e.dataTransfer)||void 0===t?void 0:t.files[0];a(r)}$.current.classList.remove("drag-over"),$.current.classList.remove("drag-enter")}}},[b,k.kvs.length,L]),(0,a.useEffect)(()=>{((null==g?void 0:g.type)===f.t.Sensitive||(null==g?void 0:g.decrypted))&&S({type:"prefill_form",payload:{envVar:g}})},[g]);let V=(0,a.useCallback)(async()=>{var e;S({type:"processing",payload:{isProcessing:!0}});try{let e;let n=await t(k);S({type:"form_submitted",payload:{response:n}}),(null==g?void 0:g.id)&&(e={id:g.id,key:k.kvs[0].key,value:k.kvs[0].value,target:W(k.target),projectId:k.projects.map(e=>e.id),type:k.sensitive?f.t.Sensitive:f.t.Encrypted}),r(e)}catch(e){S({type:"error",payload:{error:(0,i.SC)(e)}})}S({type:"processing",payload:{isProcessing:!1}}),null===(e=Z.current)||void 0===e||e.focus()},[null==g?void 0:g.id,t,r,k]),B=k.error?(0,n.jsx)(p.Z,{error:k.error.errorObject}):null;return(0,n.jsxs)(u.Z,{className:et().envVarsForm,onSubmit:()=>void V(),children:[(0,n.jsx)("div",{className:et().dragEffectBackground,ref:$}),(0,n.jsx)(v.D2,{destructiveAction:j,disabled:d||!l,footerNote:null,footerSeparator:!1,primaryAction:(0,n.jsx)(c.z,{loading:k.isProcessing,size:"small",typeName:"submit",children:"Save"}),secondaryAction:x,title:null,children:(0,n.jsxs)(o.K,{gap:4,children:[P?(0,n.jsxs)(n.Fragment,{children:[I||s?null:(0,n.jsx)(eN,{dispatch:S,mustBeSensitive:N,sensitiveEnvVarFlagBoolean:P,state:k}),(0,n.jsx)(eb.V,{}),(0,n.jsx)(R,{dispatch:S,gitBranch:k.gitBranch,isEditing:s,mustBeSensitive:N,sensitiveEnvVarFlagBoolean:P,state:k,teamId:y,variant:_}),(0,n.jsx)(eb.V,{})]}):B,(0,n.jsx)(ef,{dispatch:S,enableBulk:h,error:k.error,firstInputRef:Z,isEditing:s,isLoading:null===g,isSensitive:k.sensitive,kvs:k.kvs}),P?B:null,!P&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eb.V,{}),(0,n.jsx)(R,{dispatch:S,gitBranch:k.gitBranch,mustBeSensitive:N,sensitiveEnvVarFlagBoolean:P,state:k,teamId:y,variant:_})]}),"shared"===_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eb.V,{}),(0,n.jsx)(en,{SWRDataToWaitFor:[null===g?void 0:null],dispatch:S,selectedProjects:k.projects})]}),(0,n.jsx)(eb.V,{})]})})]})}},571445:function(e,t,r){"use strict";r.d(t,{bM:function(){return c},ry:function(){return u}});var n=r(652983),a=r(905839),i=r(135635),s=r(611648),l=r(384157),o=r(66818),d=r(495142);function c(){let{value:e,isReady:t}=(0,l.hj)(),{team:r,isReady:c,isLoading:u,mutate:v}=(0,i.t7)(),p=(0,o.e1)(),[h,m]=(0,n.useState)(!1),[g,x]=(0,n.useState)(null),j=(null==r?void 0:r.sensitiveEnvironmentVariablePolicy)||"default",f=["default","off"].includes(j),[y,b]=(0,n.useState)(j),[_,k]=(0,n.useState)(!1),S=!u&&y!==j;(0,n.useEffect)(()=>{u||(b(j),k(!1))},[u]);let w=async()=>{m(!0),x(null);try{if(!r)throw Error("Team not found");await (0,d.I)(`${s.EY}/${r.id}`,{method:"PATCH",body:{sensitiveEnvironmentVariablePolicy:y,..._?{migrateExistingEnvVariablesToSensitive:_}:null},throwOnHTTPError:!0}),v(),p.success("Updated Environment Variable Policy setting successfully.")}catch(e){x((0,a.SC)(e))}m(!1)};return{sensitiveEnvVarFlagBoolean:!!e,state:j,team:r,error:g,saving:h,isTeamReady:c,isLoading:!t||u,handleSave:w,hasChangedSensitiveEnvVarPolicy:S,isDefaultOrOffSensitiveEnvVarPolicy:f,sensitiveEnvVarPolicySetting:y,setSensitiveEnvVarPolicySetting:b,migrateExistingEnvVarsToSensitive:_,setMigrateExistingEnvVarsToSensitive:k}}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"on":return!0;case"off":return!1;default:return t}}},189362:function(e,t,r){"use strict";r.d(t,{A:function(){return v},V:function(){return u}});var n=r(397458),a=r(652983),i=r(850240),s=r(503030),l=r(977904),o=r(466332),d=r(597973),c=r.n(d);function u(e){let{projects:t,error:r,gitType:a}=e,l=((null==t?void 0:t.length)??0)>1?11:24;return r?(0,n.jsx)("div",{className:c().frameworkIconGroup,children:(0,n.jsx)(s.Z,{gitType:a,height:24,width:24})}):t?(0,n.jsx)("div",{className:c().frameworkIconGroup,children:t.length<5?t.map(e=>e.framework.logo?(0,n.jsx)(v,{framework:e.framework,size:l},e.name):null):(0,n.jsx)("div",{className:c().numProjects,children:t.length<9?t.length:"9+"})}):(0,n.jsx)("div",{className:c().frameworkIconGroup,children:(0,n.jsx)(i.O,{height:24,rounded:!0,width:24})})}let v=(0,a.memo)(function(e){let{framework:t,size:r,style:a,className:i}=e,s=(0,l.EE)({logo:t.logo,darkModeLogo:t.darkModeLogo});return(0,n.jsx)(o.qE,{className:i,size:r,style:a,title:t.name,url:s})})},977904:function(e,t,r){"use strict";r.d(t,{EE:function(){return i}});var n=r(652983),a=r(869668);function i(e){let{loading:t,resolvedTheme:r}=function(){let e=(0,a.Z)(),[t,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>r(!0),[]),{loading:!t,resolvedTheme:e?"light":"dark"}}();return t?e.logo:"dark"===r&&e.darkModeLogo?e.darkModeLogo:e.logo}},465805:function(e,t,r){"use strict";var n=r(397458);t.Z=function(e){return(0,n.jsx)("form",{...e,onKeyDown:e=>{if("Enter"===e.key&&e.metaKey){let t=e.target;t.form&&t.form.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},onSubmit:t=>{var r;t.preventDefault(),null===(r=e.onSubmit)||void 0===r||r.call(e,t)}})}},951517:function(e,t,r){"use strict";function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}r.d(t,{Z:function(){return n}})},672689:function(e,t,r){"use strict";r.d(t,{FR:function(){return l},Fy:function(){return u},ie:function(){return c},mT:function(){return d},sx:function(){return o}});var n=r(502383),a=r(495142),i=r(611648),s=r(539142);function l(e){return e.startsWith("VERCEL_")}function o(e){return e.map(e=>{let t,r=e.type;return void 0===r&&(r=l(e.name)?n.t.System:n.t.Encrypted),e.target&&(t=Array.isArray(e.target)?e.target:[e.target]),{type:r,key:e.name,value:r===n.t.System?e.name:e.value,target:t??[n.r.Production,n.r.Preview,n.r.Development],gitBranch:e.gitBranch}})}async function d(e,t,r){let n=o(t);return(0,a.I)(`${(0,i.HJ)("v10")}/${e}/env${(0,s.c)({teamId:r})}`,{method:"POST",body:JSON.stringify(n),throwOnHTTPError:!0})}async function c(e){let{projectId:t,key:r,value:n,target:l,type:o,teamId:d,gitBranch:c}=e;await (0,a.I)(`${(0,i.HJ)("v7")}/${t}/env${(0,s.c)({teamId:d})}`,{method:"POST",body:JSON.stringify({key:r,value:n,target:l,type:o,gitBranch:c}),throwOnHTTPError:!0})}async function u(e,t,r){await (0,a.I)(`${(0,i.HJ)("v4")}/${e}/env/${t.key}${(0,s.c)({teamId:r,target:t.target})}`,{method:"DELETE",throwOnHTTPError:!0})}Object.values(n.r),n.r.Production,n.r.Preview,n.r.Development},36012:function(e,t,r){"use strict";r.d(t,{E:function(){return s}});var n=r(397458),a=r(652983);let i=!1;function s(e){let{fallback:t,data:r,children:s}=e,l=function(){let e=(0,a.useRef)(i),[,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{e.current||(i=!0,e.current=!0,t())},[]),i}();return!l||r.includes(void 0)?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(n.Fragment,{children:s})}},372962:function(e,t,r){"use strict";r.d(t,{y:function(){return a}});let n=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function a(e){let t;let r={},a=e.toString();for(a=a.replace(/\r\n?/gm,"\n");null!=(t=n.exec(a));){let e=t[1],n=t[2]||"";n=n.trim();let a=n[0];n=n.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===a&&(n=(n=n.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),r[e]=n}return r}},155088:function(e,t,r){"use strict";function n(e,t){if(e===t)return!0;if(null===e||null===t||e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}r.d(t,{c:function(){return n}})},966130:function(e,t,r){"use strict";r.d(t,{In:function(){return l},Y0:function(){return o},p5:function(){return s}});var n=r(611648),a=r(495142),i=r(539142);function s(e){return l(e.id)}function l(e){return e.startsWith("env")}function o(e){let{envVars:t,teamId:r,projectId:l}=e;return s(t[0])?function(e){let{envVars:t,teamId:r}=e;return(0,a.I)(`${n.Nc}${(0,i.c)({teamId:r})}`,{body:JSON.stringify({ids:t.map(e=>e.id)}),method:"DELETE",throwOnHTTPError:!0})}({envVars:t,teamId:r}):function(e){let{envVars:t,projectId:r,teamId:s}=e;return Promise.all(t.map(e=>(0,a.I)(`${(0,n.HJ)("v7")}/${r??""}/env/${e.id}${(0,i.c)({teamId:s})}`,{method:"DELETE",throwOnHTTPError:!0})))}({envVars:t,teamId:r,projectId:l})}},234113:function(e,t,r){"use strict";r.d(t,{PN:function(){return l},jk:function(){return o},uD:function(){return d}});var n=r(611648),a=r(495142),i=r(539142),s=r(155088);async function l(e){let{envVar:t,teamId:r,payload:l}=e,o={};return t.key!==l.key&&(o.key=l.key),t.value!==l.value&&(o.value=l.value),(0,s.c)(t.target.sort(),l.target.sort())||(o.target=[...l.target]),(0,s.c)(t.projectId.sort(),l.projectId.sort())||(o.projectId=[...l.projectId]),(0,a.I)(`${n.Nc}${(0,i.c)({teamId:r})}`,{method:"PATCH",body:JSON.stringify({updates:{[t.id]:o}}),throwOnHTTPError:!0})}async function o(e){let{envVar:t,projectId:r,teamId:s}=e,l={};if(!t.projectId.includes(r))throw Error("Project was not linked to specified Shared Environment Variable");l[t.id]={projectId:t.projectId.filter(e=>e!==r)},await (0,a.I)(`${n.Nc}${(0,i.c)({teamId:s})}`,{method:"PATCH",body:JSON.stringify({updates:l}),throwOnHTTPError:!0})}async function d(e){let{envVars:t,projectId:r,teamId:s}=e,l={};t.forEach(e=>{if(e.projectId.includes(r))throw Error("Project already added to env var");l[e.id]={projectId:[...e.projectId,r]}}),await (0,a.I)(`${n.Nc}${(0,i.c)({teamId:s})}`,{method:"PATCH",body:JSON.stringify({updates:l}),throwOnHTTPError:!0})}},951994:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(353729),a=r(495142),i=r(135635),s=r(611648),l=r(539142);function o(e,t){let{isReady:r,team:o}=(0,i.t7)();return(0,n.ZP)(()=>e&&"$cfgId"!==e&&r?`${s.Ms}/configuration/${e}${(0,l.c)({teamId:null==o?void 0:o.id})}`:"",e=>(0,a.I)(e,t))}},530333:function(e,t,r){"use strict";r.d(t,{h:function(){return o}});var n=r(353729),a=r(611648),i=r(495142),s=r(539142),l=r(135635);function o(e,t){let{team:r}=(0,l.t7)(),o=null==r?void 0:r.id;return(0,n.ZP)(e?`${a.Ms}/git-branches${(0,s.c)({projectId:e,teamId:o})}`:"",e=>(0,i.I)(e,{throwOnHTTPError:!0}),t)}},881441:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(353729),a=r(495142),i=r(611648),s=r(539142),l=r(135635);function o(e,t){let{isReady:r,team:o}=(0,l.t7)();return(0,n.ZP)(()=>e&&r?`${(0,i.HJ)("v7")}/${encodeURIComponent(e)}/system-env-values${(0,s.c)({teamId:null==o?void 0:o.id})}`:"",e=>(0,a.I)(e,{throwOnHTTPError:!0}),t)}},930316:function(e,t,r){"use strict";r.d(t,{s:function(){return d}});var n=r(353729),a=r(495142),i=r(611648),s=r(539142),l=r(135635),o=r(761891);function d(){let{config:e,id:t,noRequest:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isReady:d,team:c}=(0,l.t7)(),{can:u,isLoading:v}=(0,o.ZP)(),p=u(o.aU.Read,o._z.Secrets),h=d&&!v&&!r&&p;return(0,n.ZP)(()=>h?`${i.iM}${(0,s.c)({teamId:null==c?void 0:c.id,id:t})}`:null,e=>(0,a.I)(e,{throwOnHTTPError:!0}),e)}},668909:function(e,t,r){"use strict";r.d(t,{Ee:function(){return p},xL:function(){return m}});var n=r(397458),a=r(652983),i=r(14517),s=r(837604),l=r(303477),o=r(656913),d=r(718138),c=r.n(d);let u=(0,a.createContext)({disabled:!1,name:"",required:!1,selectedValue:"",setSelected:e=>{}}),v=()=>(0,a.useContext)(u);function p(e){let{children:t,disabled:r,label:i,name:o,onChange:d,required:c,value:v}=e,p=(0,s.B)(),h=(0,l.M)("radio-"),m=(0,l.M)("radio-name-"),g=(0,a.useMemo)(()=>({name:o??m,selectedValue:v,setSelected:d,required:c,disabled:r||p}),[r,p,o,m,d,c,v]);return(0,n.jsxs)("div",{"aria-labelledby":i?h:void 0,"data-geist-radio-group":"","data-version":"v1",role:"radiogroup",children:[i?(0,n.jsx)("span",{className:"geist-sr-only",id:h,children:i}):null,(0,n.jsx)(u.Provider,{value:g,children:t})]})}let h=(0,a.forwardRef)((e,t)=>{let{children:r,className:s,disabled:l,label:d=!0,value:u,fullWidth:p,noMarginLeft:h}=e,{selectedValue:m,setSelected:g,...x}=v(),j=(0,a.useCallback)(()=>null==g?void 0:g(u),[u,g]);return(0,n.jsxs)(d?"label":"span",{className:(0,i.W)(c().item,(x.disabled||l)&&c().disabled,s),"data-geist-radio-item":"",children:[(0,n.jsx)(o.Y,{checked:u===m,className:(0,i.W)(c()["radio-check"]),iconClassName:(0,i.W)(c()["radio-icon"]),inputClassName:(0,i.W)(c()["radio-input"]),...x,alignRadioToText:!!r,disabled:x.disabled||l,onChange:j,ref:t,value:u}),r?(0,n.jsx)("span",{className:(0,i.W)(c().text,p&&c()["full-width"],h&&c()["no-margin-left"]),children:r}):null]})});h.displayName="RadioItem",p.Item=h;let m=e=>{let{value:t,disabled:r}=e,{selectedValue:a,...i}=v();return{component:(0,n.jsx)(p.Item,{disabled:r,label:!1,value:t}),checked:t===a,...i}}},656913:function(e,t,r){"use strict";r.d(t,{Y:function(){return o}});var n=r(397458),a=r(14517),i=r(652983),s=r(948959),l=r.n(s);let o=(0,i.forwardRef)((e,t)=>{let{alignRadioToText:r,checked:i,className:s,disabled:o,iconClassName:d,inputClassName:c,onChange:u,value:v,...p}=e;return(0,n.jsxs)("span",{className:(0,a.W)(l().check,o&&l().disabled,s),children:[r?(0,n.jsx)(n.Fragment,{children:"​"}):null,(0,n.jsx)("input",{...p,checked:i,className:(0,a.W)(l().input,"geist-sr-only",c),disabled:o,onChange:u,ref:t,type:"radio",value:v}),(0,n.jsx)("span",{"aria-hidden":!0,className:(0,a.W)(l().icon,d)})]})});o.displayName="Radio"},118838:function(e,t,r){"use strict";r.d(t,{_:function(){return a}});var n=r(923390);let a=(0,n.H)('<path d="M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"/><path d="M1 1l22 22"/>')},565893:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n=r(923390);let a=(0,n.H)('<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>')},171267:function(e){e.exports={additionalPermissionsWrapper:"additional-permissions-required_additionalPermissionsWrapper__FVwHY",message:"additional-permissions-required_message__IqhgE",link:"additional-permissions-required_link__iowP4"}},986750:function(e){e.exports={envVarValueSensitive:"env-variables-edit-form_envVarValueSensitive__NxRfc",envVarValueSensitiveText:"env-variables-edit-form_envVarValueSensitiveText__sXcFb"}},566516:function(e){e.exports={iconContainer:"env-variables-icon_iconContainer__5JIX0"}},691966:function(e){e.exports={plaintextEnvValue:"env-variables-table_plaintextEnvValue__euy_l",key:"env-variables-table_key__C2Kyj",time:"env-variables-table_time__YMeLc",encryptedEnvValue:"env-variables-table_encryptedEnvValue__kJ442",bullets:"env-variables-table_bullets__sLcSs",reveal:"env-variables-table_reveal__IqVFz",timeAgoText:"env-variables-table_timeAgoText__bliau",resultRow:"env-variables-table_resultRow__bPmgI",empty:"env-variables-table_empty__DbG_X",suggestionHighlight:"env-variables-table_suggestionHighlight__QyeJJ",overriddenEnvVar:"env-variables-table_overriddenEnvVar__YwlUD",varNameContainer:"env-variables-table_varNameContainer__vUJNW",varName:"env-variables-table_varName__rRRiy",dataStoreIconWrapperStyles:"env-variables-table_dataStoreIconWrapperStyles__zSeG6"}},295489:function(e){e.exports={fullWidthHR:"full-width-hr_fullWidthHR__XEese"}},418519:function(e){e.exports={themeBorder:"styled-combobox_themeBorder__6OPgr",popoverShadow:"styled-combobox_popoverShadow__xhgTR",popoverBottom:"styled-combobox_popoverBottom__xwpw1",projectOptionList:"styled-combobox_projectOptionList__3T_2p"}},331350:function(e){e.exports={removeButton:"tev-add-form_removeButton__QqZeg",first:"tev-add-form_first__W7pMM",viewValueButton:"tev-add-form_viewValueButton__8Qu0E",container:"tev-add-form_container__QCp3k input_container__eoK_W",textarea:"tev-add-form_textarea__AQcMz input_input__1Zknj",error:"tev-add-form_error__fNegN input_error__rdacw",monoInput:"tev-add-form_monoInput__o0dB0",textareaStack:"tev-add-form_textareaStack__Ezwma",small:"tev-add-form_small__sQmES",large:"tev-add-form_large__lrZqN",textareaWrapper:"tev-add-form_textareaWrapper__zZsUm",textareaLayout:"tev-add-form_textareaLayout__Ma5aU",textareaInput:"tev-add-form_textareaInput__hDHsN",textAreaHeight:"tev-add-form_textAreaHeight__ol8mb",inputSpacer:"tev-add-form_inputSpacer__OGpHd",selectedProjectEntity:"tev-add-form_selectedProjectEntity__7znqX",bold:"tev-add-form_bold__Ey6CA",projectName:"tev-add-form_projectName__QOrXp",projectList:"tev-add-form_projectList__vIKNX",envVarsForm:"tev-add-form_envVarsForm___U86j",dragEffectBackground:"tev-add-form_dragEffectBackground__XB55l"}},633590:function(e){e.exports={bold:"tev-environments-selector_bold__fdudw",selectGitBranch:"tev-environments-selector_selectGitBranch__gKhXc",customBranchButton:"tev-environments-selector_customBranchButton__aHyVU"}},597973:function(e){e.exports={frameworkIconGroup:"framework-icon-group_frameworkIconGroup__z0fzb",numProjects:"framework-icon-group_numProjects__Icjps"}},718138:function(e){e.exports={item:"radio-group_item__rXszd","radio-check":"radio-group_radio-check__hpSxQ","radio-icon":"radio-group_radio-icon__ww5fV",text:"radio-group_text__HR5Ve","no-margin-left":"radio-group_no-margin-left__9u_Bx","full-width":"radio-group_full-width__Jd8_5",disabled:"radio-group_disabled___6D6s","radio-input":"radio-group_radio-input__8o7pF"}},948959:function(e){e.exports={check:"radio_check__6yeFj",disabled:"radio_disabled__Jbbif",input:"radio_input___HGmM",icon:"radio_icon___dDGS"}}}]);